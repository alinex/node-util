<!DOCTYPE html>
<html>
<head>
  <title>codemirror.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../doc-style.css" />
  <script src="../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../", thisFile = "home/alex/github/node-util/report/metrics/assets/scripts/bundles/codemirror.js", defaultSidebar = true;
  </script>
  <script src="../../../../../doc-script.js"></script>
</head>
<body>
  <nav>
<div class="logo"><a href="http://alinex.github.io" onmouseover="lllogo.src='https://alinex.github.io/images/Alinex-200.png'" onmouseout="lllogo.src='https://alinex.github.io/images/Alinex-black-200.png'">
  <img name="lllogo" src="https://alinex.github.io/images/Alinex-black-200.png" width="150" title="Alinex Universe Homepage" />
  </a>
  <img src="http://alinex.github.io/images/Alinex-200.png" style="display:none" alt="preloading" />
</div>
<div class="links">
  <a href="http://alinex.github.io/blog" class="btn btn-primary"><span class="glyphicon-cog"></span> Blog</a>
  <a href="http://alinex.github.io/code.html" class="btn btn-warning"><span class="glyphicon-pencil"></span> Code</a>
</div>
</nav><div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container" tabindex="0"><a id="fork" href="https://github.com/alinex/node-util" title="Fork me on GitHub"></a><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>codemirror.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="nb">window</span><span class="p">.</span><span class="nx">CodeMirror</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="s2">&quot;use strict&quot;</span><span class="p">;</span><span class="kd">function</span> <span class="nx">a</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">a</span><span class="p">))</span><span class="k">return</span> <span class="k">new</span> <span class="nx">a</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="o">=</span><span class="nx">f</span><span class="o">=</span><span class="nx">f</span><span class="o">||</span><span class="p">{};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">h</span> <span class="k">in</span> <span class="nx">_d</span><span class="p">)</span><span class="o">!</span><span class="nx">f</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">_d</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span><span class="o">=</span><span class="nx">_d</span><span class="p">[</span><span class="nx">h</span><span class="p">]);</span><span class="nx">l</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="nx">b</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span><span class="nx">j</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">CodeMirror</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">i</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">f</span><span class="p">.</span><span class="nx">autofocus</span><span class="o">&amp;&amp;!</span><span class="nx">Rd</span><span class="o">&amp;&amp;</span><span class="nx">_</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="o">=</span><span class="nx">c</span><span class="p">(</span><span class="k">new</span> <span class="nx">Dc</span><span class="p">([</span><span class="k">new</span> <span class="nx">Cc</span><span class="p">([</span><span class="nx">rc</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">R</span><span class="p">(</span><span class="nx">j</span><span class="p">))])])),</span><span class="k">this</span><span class="p">.</span><span class="nx">nextOpId</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">g</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">f</span><span class="p">.</span><span class="nx">lineWrapping</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">className</span><span class="o">+=</span><span class="s2">&quot; CodeMirror-wrap&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">value</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">Ed</span><span class="o">&amp;&amp;</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">ed</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="mi">20</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="o">=</span><span class="nx">Kc</span><span class="p">(),</span><span class="nx">bb</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="kd">var</span> <span class="nx">k</span><span class="p">;</span><span class="k">try</span><span class="p">{</span><span class="nx">k</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span><span class="o">==</span><span class="nx">j</span><span class="p">.</span><span class="nx">input</span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">m</span><span class="p">){}</span><span class="nx">k</span><span class="o">||</span><span class="nx">f</span><span class="p">.</span><span class="nx">autofocus</span><span class="o">&amp;&amp;!</span><span class="nx">Rd</span><span class="o">?</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">ed</span><span class="p">(</span><span class="nx">rb</span><span class="p">,</span><span class="k">this</span><span class="p">),</span><span class="mi">20</span><span class="p">)</span><span class="o">:</span><span class="nx">sb</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">V</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span> <span class="k">in</span> <span class="nx">$d</span><span class="p">)</span><span class="nx">$d</span><span class="p">.</span><span class="nx">propertyIsEnumerable</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">$d</span><span class="p">[</span><span class="nx">a</span><span class="p">](</span><span class="k">this</span><span class="p">,</span><span class="nx">f</span><span class="p">[</span><span class="nx">a</span><span class="p">],</span><span class="nx">ae</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">ee</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">b</span><span class="p">)</span><span class="nx">ee</span><span class="p">[</span><span class="nx">b</span><span class="p">](</span><span class="k">this</span><span class="p">)})()}</span><span class="kd">function</span> <span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">{},</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">input</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;textarea&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;position: absolute; padding: 0; width: 1px; height: 1em; outline: none;&quot;</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;wrap&quot;</span><span class="p">,</span><span class="s2">&quot;off&quot;</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;autocorrect&quot;</span><span class="p">,</span><span class="s2">&quot;off&quot;</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;autocapitalize&quot;</span><span class="p">,</span><span class="s2">&quot;off&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">inputDiv</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">c</span><span class="p">],</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;overflow: hidden; position: relative; width: 3px; height: 0px;&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;height: 1px&quot;</span><span class="p">)],</span><span class="s2">&quot;CodeMirror-hscrollbar&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;width: 1px&quot;</span><span class="p">)],</span><span class="s2">&quot;CodeMirror-vscrollbar&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">scrollbarFiller</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;CodeMirror-scrollbar-filler&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">lineDiv</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">selectionDiv</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;position: relative; z-index: 1&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">cursor</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;pre&quot;</span><span class="p">,</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;CodeMirror-cursor&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">otherCursor</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;pre&quot;</span><span class="p">,</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;CodeMirror-cursor CodeMirror-secondarycursor&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">measure</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;CodeMirror-measure&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">lineSpace</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">b</span><span class="p">.</span><span class="nx">measure</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">selectionDiv</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">lineDiv</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">cursor</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">otherCursor</span><span class="p">],</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;position: relative; outline: none&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">mover</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">b</span><span class="p">.</span><span class="nx">lineSpace</span><span class="p">],</span><span class="s2">&quot;CodeMirror-lines&quot;</span><span class="p">)],</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;position: relative&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">sizer</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">b</span><span class="p">.</span><span class="nx">mover</span><span class="p">],</span><span class="s2">&quot;CodeMirror-sizer&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">heightForcer</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;position: absolute; height: &quot;</span><span class="o">+</span><span class="nx">je</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">gutters</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;CodeMirror-gutters&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">lineGutter</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">b</span><span class="p">.</span><span class="nx">sizer</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">heightForcer</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">gutters</span><span class="p">],</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;position: relative; min-height: 100%&quot;</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">scroller</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">d</span><span class="p">],</span><span class="s2">&quot;CodeMirror-scroll&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;tabIndex&quot;</span><span class="p">,</span><span class="s2">&quot;-1&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">wrapper</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">b</span><span class="p">.</span><span class="nx">inputDiv</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">scrollbarFiller</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">scroller</span><span class="p">],</span><span class="s2">&quot;CodeMirror&quot;</span><span class="p">),</span><span class="nx">Fd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zIndex</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">paddingRight</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">appendChild</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">),</span><span class="nx">Qd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="s2">&quot;0px&quot;</span><span class="p">),</span><span class="nx">Hd</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">draggable</span><span class="o">=!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Md</span><span class="o">?</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">inputDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="s2">&quot;1px&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">inputDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span><span class="o">=</span><span class="s2">&quot;absolute&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">Fd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">minWidth</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">minWidth</span><span class="o">=</span><span class="s2">&quot;18px&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">viewOffset</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">showingTo</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">lastSizeC</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">lineNumWidth</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">lineNumInnerWidth</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">lineNumChars</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">prevInput</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">alignWidgets</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">pollingFast</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">poll</span><span class="o">=</span><span class="k">new</span> <span class="nx">Zc</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">draggingText</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">cachedCharWidth</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">cachedTextHeight</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">measureLineCache</span><span class="o">=</span><span class="p">[],</span><span class="nx">b</span><span class="p">.</span><span class="nx">measureLineCachePos</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">inaccurateSelection</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">pasteIncoming</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">};</span><span class="k">return</span><span class="p">{</span><span class="nx">doc</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">frontier</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">highlight</span><span class="o">:</span><span class="k">new</span> <span class="nx">Zc</span><span class="p">,</span><span class="nx">sel</span><span class="o">:</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">head</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">anchor</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">shift</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">extend</span><span class="o">:!</span><span class="mi">1</span><span class="p">},</span><span class="nx">scrollTop</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">scrollLeft</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">overwrite</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">focused</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">maxLine</span><span class="o">:</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="nx">maxLineLength</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">maxLineChanged</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">suppressEdits</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">goalColumn</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">cantEdit</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">keyMaps</span><span class="o">:</span><span class="p">[]}}</span><span class="kd">function</span> <span class="nx">d</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">mode</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getMode</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">mode</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">stateAfter</span><span class="o">=</span><span class="kc">null</span><span class="p">}),</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">frontier</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">C</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="mi">100</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">e</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">R</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineWrapping</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">className</span><span class="o">+=</span><span class="s2">&quot; CodeMirror-wrap&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">/</span><span class="nx">S</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">)</span><span class="o">-</span><span class="mi">3</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">height</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="nx">d</span><span class="p">)</span><span class="o">||</span><span class="mi">1</span><span class="p">;</span><span class="mi">1</span><span class="o">!=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">Fc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="o">*</span><span class="nx">c</span><span class="p">)}}),</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">sizer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">minWidth</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">}</span><span class="k">else</span> <span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot; CodeMirror-wrap&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">k</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="mi">0</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">height</span><span class="o">&amp;&amp;</span><span class="nx">Fc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">)});</span><span class="nx">W</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">size</span><span class="p">),</span><span class="nx">L</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">m</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">height</span><span class="p">)},</span><span class="mi">100</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">ge</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">keyMap</span><span class="p">].</span><span class="nx">style</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s*cm-keymap-\S+/g</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="nx">b</span><span class="o">?</span><span class="s2">&quot; cm-keymap-&quot;</span><span class="o">+</span><span class="nx">b</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">g</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s*cm-s-\S+/g</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">theme</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(^|\s)\s*/g</span><span class="p">,</span><span class="s2">&quot; cm-s-&quot;</span><span class="p">),</span><span class="nx">L</span><span class="p">(</span><span class="nx">a</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">i</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">s</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">i</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">gutters</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gutters</span><span class="p">;</span><span class="nx">id</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;CodeMirror-gutter &quot;</span><span class="o">+</span><span class="nx">e</span><span class="p">));</span><span class="s2">&quot;CodeMirror-linenumbers&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">lineGutter</span><span class="o">=</span><span class="nx">f</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">lineNumWidth</span><span class="o">||</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">)}</span><span class="nx">b</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="nx">d</span><span class="o">?</span><span class="s2">&quot;&quot;</span><span class="o">:</span><span class="s2">&quot;none&quot;</span><span class="p">}</span><span class="kd">function</span> <span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span><span class="k">return</span> <span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="nx">c</span><span class="o">=</span><span class="nx">hc</span><span class="p">(</span><span class="nx">e</span><span class="p">);){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span><span class="nx">e</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">d</span><span class="o">+=</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">ch</span><span class="o">-</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">ch</span><span class="p">}</span><span class="k">for</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="nx">c</span><span class="o">=</span><span class="nx">ic</span><span class="p">(</span><span class="nx">e</span><span class="p">);){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span><span class="nx">d</span><span class="o">-=</span><span class="nx">e</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">d</span><span class="o">+=</span><span class="nx">e</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">ch</span><span class="p">}</span><span class="k">return</span> <span class="nx">d</span><span class="p">}</span><span class="kd">function</span> <span class="nx">k</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">maxLine</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">maxLineLength</span><span class="o">=</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">maxLine</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">maxLineChanged</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="nx">c</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">maxLineLength</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">maxLineLength</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">maxLine</span><span class="o">=</span><span class="nx">b</span><span class="p">)})}</span><span class="kd">function</span> <span class="nx">l</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">)</span><span class="s2">&quot;CodeMirror-linenumbers&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">gutters</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">lineNumbers</span><span class="o">?</span><span class="nx">b</span><span class="o">=!</span><span class="mi">0</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">c</span><span class="o">--</span><span class="p">,</span><span class="mi">1</span><span class="p">));</span><span class="o">!</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">lineNumbers</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;CodeMirror-linenumbers&quot;</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">m</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="nx">G</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">sizer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">minHeight</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">heightForcer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nx">c</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollWidth</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">d</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span><span class="nx">f</span><span class="o">?</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;block&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">bottom</span><span class="o">=</span><span class="nx">e</span><span class="o">?</span><span class="nx">ld</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">d</span><span class="o">-</span><span class="nx">a</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">clientHeight</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">clientHeight</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">?</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;block&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">right</span><span class="o">=</span><span class="nx">f</span><span class="o">?</span><span class="nx">ld</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="o">:</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollWidth</span><span class="o">-</span><span class="nx">a</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="o">?</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarFiller</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;block&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarFiller</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarFiller</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">ld</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarFiller</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">Nd</span><span class="o">&amp;&amp;</span><span class="mi">0</span><span class="o">===</span><span class="nx">ld</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">minWidth</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">minHeight</span><span class="o">=</span><span class="nx">Od</span><span class="o">?</span><span class="s2">&quot;18px&quot;</span><span class="o">:</span><span class="s2">&quot;12px&quot;</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">n</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span><span class="s2">&quot;number&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">c</span><span class="o">?</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="o">:</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">d</span><span class="o">-</span><span class="nx">G</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">d</span><span class="o">+</span><span class="nx">e</span><span class="p">);</span><span class="k">return</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="nx">Hc</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">),</span><span class="nx">to</span><span class="o">:</span><span class="nx">Hc</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">o</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">alignWidgets</span><span class="o">||</span><span class="nx">b</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">r</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">c</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">lineDiv</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span><span class="nx">f</span><span class="p">;</span><span class="nx">f</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">alignable</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">alignable</span><span class="p">;</span><span class="nx">g</span><span class="o">&lt;</span><span class="nx">h</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">g</span><span class="p">)</span><span class="nx">h</span><span class="p">[</span><span class="nx">g</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">e</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">c</span><span class="o">+</span><span class="nx">d</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">p</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineNumbers</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">q</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">size</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">!=</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineNumChars</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">measure</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">)],</span><span class="s2">&quot;CodeMirror-linenumber CodeMirror-gutter-elt&quot;</span><span class="p">)),</span><span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="o">-</span><span class="nx">f</span><span class="p">;</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">lineGutter</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineNumInnerWidth</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineGutter</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="o">-</span><span class="nx">g</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineNumWidth</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineNumInnerWidth</span><span class="o">+</span><span class="nx">g</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineNumChars</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineNumInnerWidth</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">:-</span><span class="mi">1</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineGutter</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineNumWidth</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">}</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">}</span><span class="kd">function</span> <span class="nx">q</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nb">String</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">lineNumberFormatter</span><span class="p">(</span><span class="nx">b</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">firstLineNumber</span><span class="p">))}</span><span class="kd">function</span> <span class="nx">r</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">().</span><span class="nx">left</span><span class="o">-</span><span class="nx">a</span><span class="p">.</span><span class="nx">sizer</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">().</span><span class="nx">left</span><span class="p">}</span><span class="kd">function</span> <span class="nx">s</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingFrom</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingTo</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">t</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="k">return</span> <span class="nx">f</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Xc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;update&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">),(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">!=</span><span class="nx">d</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingTo</span><span class="o">!=</span><span class="nx">e</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">Xc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;viewportChange&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingFrom</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingTo</span><span class="p">)),</span><span class="nx">y</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">m</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">height</span><span class="p">),</span><span class="nx">f</span><span class="p">}</span><span class="kd">function</span> <span class="nx">t</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingTo</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">viewOffset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="k">void</span> <span class="mi">0</span><span class="p">;</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">n</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">b</span><span class="o">!==!</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="mi">0</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">&gt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingTo</span><span class="p">)){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">p</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=!</span><span class="mi">0</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">sizer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginLeft</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">b</span><span class="o">!==!</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">Ud</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">g</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">g</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">h</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">g</span><span class="p">];</span><span class="nx">h</span><span class="o">=</span><span class="nx">hc</span><span class="p">(</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="p">));){</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="p">;</span><span class="nx">i</span><span class="p">.</span><span class="nx">diff</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">diff</span><span class="o">-=</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="o">-</span><span class="nx">j</span><span class="p">),</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="o">=</span><span class="nx">j</span><span class="p">}</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">b</span><span class="o">===!</span><span class="mi">0</span><span class="o">?</span><span class="mi">0</span><span class="o">:</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineNumbers</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="o">!==!</span><span class="mi">0</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">g</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">g</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">g</span><span class="p">].</span><span class="nx">diff</span><span class="p">){</span><span class="nx">k</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">g</span><span class="p">].</span><span class="nx">from</span><span class="p">;</span><span class="k">break</span><span class="p">}</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">-</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">viewportMargin</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="nx">l</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">viewportMargin</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">&lt;</span><span class="nx">j</span><span class="o">&amp;&amp;</span><span class="nx">j</span><span class="o">-</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">&lt;</span><span class="mi">20</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">j</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingFrom</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingTo</span><span class="o">&gt;</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingTo</span><span class="o">-</span><span class="nx">l</span><span class="o">&lt;</span><span class="mi">20</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">l</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingTo</span><span class="p">)),</span><span class="nx">Ud</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="nx">j</span><span class="o">=</span><span class="nx">Gc</span><span class="p">(</span><span class="nx">jc</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">j</span><span class="p">)));</span><span class="nx">l</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">size</span><span class="o">&amp;&amp;</span><span class="nx">kc</span><span class="p">(</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">l</span><span class="p">));)</span><span class="o">++</span><span class="nx">l</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="nx">b</span><span class="o">===!</span><span class="mi">0</span><span class="o">?</span><span class="p">[]</span><span class="o">:</span><span class="nx">u</span><span class="p">([{</span><span class="nx">from</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingFrom</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingTo</span><span class="p">}],</span><span class="nx">b</span><span class="p">),</span><span class="nx">o</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">g</span><span class="o">&lt;</span><span class="nx">m</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">g</span><span class="p">){</span><span class="kd">var</span> <span class="nx">q</span><span class="o">=</span><span class="nx">m</span><span class="p">[</span><span class="nx">g</span><span class="p">];</span><span class="nx">q</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;</span><span class="nx">j</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">q</span><span class="p">.</span><span class="nx">from</span><span class="o">=</span><span class="nx">j</span><span class="p">),</span><span class="nx">q</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">q</span><span class="p">.</span><span class="nx">to</span><span class="o">=</span><span class="nx">l</span><span class="p">),</span><span class="nx">q</span><span class="p">.</span><span class="nx">from</span><span class="o">&gt;=</span><span class="nx">q</span><span class="p">.</span><span class="nx">to</span><span class="o">?</span><span class="nx">m</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">g</span><span class="o">--</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">o</span><span class="o">+=</span><span class="nx">q</span><span class="p">.</span><span class="nx">to</span><span class="o">-</span><span class="nx">q</span><span class="p">.</span><span class="nx">from</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="nx">o</span><span class="o">!=</span><span class="nx">l</span><span class="o">-</span><span class="nx">j</span><span class="o">||</span><span class="nx">j</span><span class="o">!=</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">||</span><span class="nx">l</span><span class="o">!=</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingTo</span><span class="p">){</span><span class="nx">m</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">from</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">from</span><span class="p">}),.</span><span class="mi">7</span><span class="o">*</span><span class="p">(</span><span class="nx">l</span><span class="o">-</span><span class="nx">j</span><span class="p">)</span><span class="o">&gt;</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">),</span><span class="nx">w</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="nx">l</span><span class="p">,</span><span class="nx">m</span><span class="p">,</span><span class="nx">k</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="nx">j</span><span class="o">!=</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">||</span><span class="nx">l</span><span class="o">!=</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingTo</span><span class="o">||</span><span class="nx">d</span><span class="p">.</span><span class="nx">lastSizeC</span><span class="o">!=</span><span class="nx">d</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span><span class="nx">r</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">lastSizeC</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">=</span><span class="nx">j</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">showingTo</span><span class="o">=</span><span class="nx">l</span><span class="p">,</span><span class="nx">C</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">s</span><span class="p">,</span><span class="nx">t</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineDiv</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">,</span><span class="nx">v</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineDiv</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span><span class="nx">v</span><span class="p">;</span><span class="nx">v</span><span class="o">=</span><span class="nx">v</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">lineObj</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">Fd</span><span class="p">){</span><span class="kd">var</span> <span class="nx">x</span><span class="o">=</span><span class="nx">v</span><span class="p">.</span><span class="nx">offsetTop</span><span class="o">+</span><span class="nx">v</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span><span class="nx">s</span><span class="o">=</span><span class="nx">x</span><span class="o">-</span><span class="nx">t</span><span class="p">,</span><span class="nx">t</span><span class="o">=</span><span class="nx">x</span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">y</span><span class="o">=</span><span class="nx">v</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span><span class="nx">s</span><span class="o">=</span><span class="nx">y</span><span class="p">.</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">y</span><span class="p">.</span><span class="nx">top</span><span class="p">}</span><span class="kd">var</span> <span class="nx">z</span><span class="o">=</span><span class="nx">v</span><span class="p">.</span><span class="nx">lineObj</span><span class="p">.</span><span class="nx">height</span><span class="o">-</span><span class="nx">s</span><span class="p">;</span><span class="mi">2</span><span class="o">&gt;</span><span class="nx">s</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">s</span><span class="o">=</span><span class="nx">R</span><span class="p">(</span><span class="nx">d</span><span class="p">)),(</span><span class="nx">z</span><span class="o">&gt;</span><span class="p">.</span><span class="mi">001</span><span class="o">||-</span><span class="p">.</span><span class="mi">001</span><span class="o">&gt;</span><span class="nx">z</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">Fc</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">lineObj</span><span class="p">,</span><span class="nx">s</span><span class="p">)}</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">viewOffset</span><span class="o">=</span><span class="nx">Ic</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">j</span><span class="p">)),</span><span class="nx">d</span><span class="p">.</span><span class="nx">mover</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">viewOffset</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">}}}</span><span class="kd">function</span> <span class="nx">u</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="o">||</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&gt;</span><span class="nx">c</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">],</span><span class="nx">f</span><span class="o">=</span><span class="p">[],</span><span class="nx">g</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">diff</span><span class="o">||</span><span class="mi">0</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">h</span><span class="p">;</span><span class="o">++</span><span class="nx">h</span><span class="p">){</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">h</span><span class="p">];</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="o">&lt;=</span><span class="nx">j</span><span class="p">.</span><span class="nx">from</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">.</span><span class="nx">diff</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="nx">j</span><span class="p">.</span><span class="nx">from</span><span class="o">+</span><span class="nx">g</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">j</span><span class="p">.</span><span class="nx">to</span><span class="o">+</span><span class="nx">g</span><span class="p">})</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="o">&lt;=</span><span class="nx">j</span><span class="p">.</span><span class="nx">from</span><span class="o">||</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">&gt;=</span><span class="nx">j</span><span class="p">.</span><span class="nx">to</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">j</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">&gt;</span><span class="nx">j</span><span class="p">.</span><span class="nx">from</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="nx">j</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="p">}),</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">.</span><span class="nx">to</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="o">+</span><span class="nx">g</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">j</span><span class="p">.</span><span class="nx">to</span><span class="o">+</span><span class="nx">g</span><span class="p">}))}</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">}</span><span class="k">return</span> <span class="nx">a</span><span class="p">}</span><span class="kd">function</span> <span class="nx">v</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="p">{},</span><span class="nx">d</span><span class="o">=</span><span class="p">{},</span><span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">,</span><span class="o">++</span><span class="nx">f</span><span class="p">)</span><span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gutters</span><span class="p">[</span><span class="nx">f</span><span class="p">]]</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">,</span><span class="nx">d</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gutters</span><span class="p">[</span><span class="nx">f</span><span class="p">]]</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">fixedPos</span><span class="o">:</span><span class="nx">r</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">gutterTotalWidth</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="nx">gutterLeft</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">gutterWidth</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="nx">wrapperWidth</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">w</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">;</span><span class="k">return</span> <span class="nx">Hd</span><span class="o">&amp;&amp;</span><span class="nx">Sd</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">currentWheelTarget</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">lineObj</span><span class="o">=</span><span class="kc">null</span><span class="p">)</span><span class="o">:</span><span class="nx">j</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">c</span><span class="p">}</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">v</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">h</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineNumbers</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">||</span><span class="nx">Ed</span><span class="o">||</span><span class="nx">Hd</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">currentWheelTarget</span><span class="o">||</span><span class="nx">id</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">lineDiv</span><span class="p">);</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">lineDiv</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="nx">j</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span><span class="nx">m</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">l</span><span class="p">.</span><span class="nx">to</span><span class="o">==</span><span class="nx">m</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">l</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">shift</span><span class="p">()),</span><span class="nx">kc</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="mi">0</span><span class="o">!=</span><span class="nx">b</span><span class="p">.</span><span class="nx">height</span><span class="o">&amp;&amp;</span><span class="nx">Fc</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">l</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;=</span><span class="nx">m</span><span class="o">&amp;&amp;</span><span class="nx">l</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;</span><span class="nx">m</span><span class="p">){</span><span class="k">for</span><span class="p">(;</span><span class="nx">k</span><span class="p">.</span><span class="nx">lineObj</span><span class="o">!=</span><span class="nx">b</span><span class="p">;)</span><span class="nx">k</span><span class="o">=</span><span class="nx">f</span><span class="p">(</span><span class="nx">k</span><span class="p">);</span><span class="nx">i</span><span class="o">&amp;&amp;</span><span class="nx">m</span><span class="o">&gt;=</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">k</span><span class="p">.</span><span class="nx">lineNumber</span><span class="o">&amp;&amp;</span><span class="nx">kd</span><span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">lineNumber</span><span class="p">,</span><span class="nx">q</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span><span class="nx">m</span><span class="p">)),</span><span class="nx">k</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">x</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">m</span><span class="p">,</span><span class="nx">g</span><span class="p">);</span><span class="nx">j</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">k</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">lineObj</span><span class="o">=</span><span class="nx">b</span><span class="p">}</span><span class="o">++</span><span class="nx">m</span><span class="p">});</span><span class="nx">k</span><span class="p">;)</span><span class="nx">k</span><span class="o">=</span><span class="nx">f</span><span class="p">(</span><span class="nx">k</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">x</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">xc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">gutterMarkers</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineNumbers</span><span class="o">||</span><span class="nx">f</span><span class="o">||</span><span class="nx">b</span><span class="p">.</span><span class="nx">bgClass</span><span class="o">||</span><span class="nx">b</span><span class="p">.</span><span class="nx">wrapClass</span><span class="o">||</span><span class="nx">b</span><span class="p">.</span><span class="nx">widgets</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">widgets</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span><span class="k">return</span> <span class="nx">e</span><span class="p">;</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">wrapClass</span><span class="p">,</span><span class="s2">&quot;position: relative&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineNumbers</span><span class="o">||</span><span class="nx">f</span><span class="p">){</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;position: absolute; left: &quot;</span><span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">fixedPos</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">));</span><span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">alignable</span><span class="o">=</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineNumbers</span><span class="o">||</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">[</span><span class="s2">&quot;CodeMirror-linenumbers&quot;</span><span class="p">]</span><span class="o">||</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">lineNumber</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="nx">q</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="s2">&quot;CodeMirror-linenumber CodeMirror-gutter-elt&quot;</span><span class="p">,</span><span class="s2">&quot;left: &quot;</span><span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutterLeft</span><span class="p">[</span><span class="s2">&quot;CodeMirror-linenumbers&quot;</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;px; width: &quot;</span><span class="o">+</span><span class="nx">g</span><span class="p">.</span><span class="nx">lineNumInnerWidth</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">))),</span><span class="nx">f</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">j</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">j</span><span class="p">){</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gutters</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span><span class="nx">l</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">[</span><span class="nx">k</span><span class="p">];</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">i</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">l</span><span class="p">],</span><span class="s2">&quot;CodeMirror-gutter-elt&quot;</span><span class="p">,</span><span class="s2">&quot;left: &quot;</span><span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutterLeft</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;px; width: &quot;</span><span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutterWidth</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">))}}</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">bgClass</span><span class="o">&amp;&amp;</span><span class="nx">h</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">bgClass</span><span class="o">+</span><span class="s2">&quot; CodeMirror-linebackground&quot;</span><span class="p">)),</span><span class="nx">h</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">widgets</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">widgets</span><span class="p">;</span><span class="nx">m</span><span class="o">&lt;</span><span class="nx">n</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">m</span><span class="p">){</span><span class="kd">var</span> <span class="nx">o</span><span class="o">=</span><span class="nx">n</span><span class="p">[</span><span class="nx">m</span><span class="p">],</span><span class="nx">p</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,[</span><span class="nx">o</span><span class="p">.</span><span class="nx">node</span><span class="p">],</span><span class="s2">&quot;CodeMirror-linewidget&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">widget</span><span class="o">=</span><span class="nx">o</span><span class="p">,</span><span class="nx">o</span><span class="p">.</span><span class="nx">noHScroll</span><span class="p">){(</span><span class="nx">h</span><span class="p">.</span><span class="nx">alignable</span><span class="o">||</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">alignable</span><span class="o">=</span><span class="p">[])).</span><span class="nx">push</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">wrapperWidth</span><span class="p">;</span><span class="nx">p</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">fixedPos</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">o</span><span class="p">.</span><span class="nx">coverGutter</span><span class="o">||</span><span class="p">(</span><span class="nx">r</span><span class="o">-=</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutterTotalWidth</span><span class="p">,</span><span class="nx">p</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">paddingLeft</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutterTotalWidth</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">),</span><span class="nx">p</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">r</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">}</span><span class="nx">o</span><span class="p">.</span><span class="nx">coverGutter</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zIndex</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="nx">p</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span><span class="o">=</span><span class="s2">&quot;relative&quot;</span><span class="p">,</span><span class="nx">o</span><span class="p">.</span><span class="nx">noHScroll</span><span class="o">||</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginLeft</span><span class="o">=-</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutterTotalWidth</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">)),</span><span class="nx">o</span><span class="p">.</span><span class="nx">above</span><span class="o">?</span><span class="nx">h</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineNumbers</span><span class="o">&amp;&amp;</span><span class="mi">0</span><span class="o">!=</span><span class="nx">b</span><span class="p">.</span><span class="nx">height</span><span class="o">?</span><span class="nx">i</span><span class="o">:</span><span class="nx">e</span><span class="p">)</span><span class="o">:</span><span class="nx">h</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">p</span><span class="p">)}</span><span class="k">return</span> <span class="nx">Fd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zIndex</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span><span class="nx">h</span><span class="p">}</span><span class="kd">function</span> <span class="nx">y</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">zb</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">);</span><span class="nx">c</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showCursorWhenSelecting</span><span class="o">?</span><span class="nx">z</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">otherCursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">selectionDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="o">:</span><span class="nx">A</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">O</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">head</span><span class="p">,</span><span class="s2">&quot;div&quot;</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">(),</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">lineDiv</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span><span class="nx">b</span><span class="p">.</span><span class="nx">inputDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">clientHeight</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">top</span><span class="o">+</span><span class="nx">f</span><span class="p">.</span><span class="nx">top</span><span class="o">-</span><span class="nx">e</span><span class="p">.</span><span class="nx">top</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">inputDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">left</span><span class="o">+</span><span class="nx">f</span><span class="p">.</span><span class="nx">left</span><span class="o">-</span><span class="nx">e</span><span class="p">.</span><span class="nx">left</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">}</span><span class="kd">function</span> <span class="nx">z</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">O</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">head</span><span class="p">,</span><span class="s2">&quot;div&quot;</span><span class="p">);</span><span class="nx">b</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">left</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span><span class="o">*</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">cursorHeight</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">other</span><span class="o">?</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">otherCursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">otherCursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">left</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">otherCursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">top</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">otherCursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="p">.</span><span class="mi">85</span><span class="o">*</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">c</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">otherCursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">}</span><span class="kd">function</span> <span class="nx">A</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">function</span> <span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span><span class="nx">g</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;CodeMirror-selected&quot;</span><span class="p">,</span><span class="s2">&quot;position: absolute; left: &quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;px; top: &quot;</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="s2">&quot;px; width: &quot;</span><span class="o">+</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">c</span><span class="o">?</span><span class="nx">h</span><span class="o">-</span><span class="nx">a</span><span class="o">:</span><span class="nx">c</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;px; height: &quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">d</span><span class="o">-</span><span class="nx">b</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">))}</span><span class="kd">function</span> <span class="nx">c</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">g</span><span class="p">){</span><span class="kd">function</span> <span class="nx">j</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">N</span><span class="p">(</span><span class="nx">a</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">b</span><span class="p">},</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="nx">k</span><span class="p">)}</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">l</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="nx">g</span><span class="o">?</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="o">:-</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">;</span><span class="k">return</span> <span class="nx">nd</span><span class="p">(</span><span class="nx">Jc</span><span class="p">(</span><span class="nx">k</span><span class="p">),</span><span class="nx">d</span><span class="o">||</span><span class="mi">0</span><span class="p">,</span><span class="kc">null</span><span class="o">==</span><span class="nx">f</span><span class="o">?</span><span class="nx">l</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">j</span><span class="p">(</span><span class="s2">&quot;rtl&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">?</span><span class="nx">c</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="nx">a</span><span class="p">),</span><span class="nx">n</span><span class="o">=</span><span class="nx">j</span><span class="p">(</span><span class="s2">&quot;rtl&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">?</span><span class="nx">a</span><span class="o">:</span><span class="nx">c</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="nx">o</span><span class="o">=</span><span class="nx">k</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span><span class="nx">p</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span><span class="nx">n</span><span class="p">.</span><span class="nx">top</span><span class="o">-</span><span class="nx">k</span><span class="p">.</span><span class="nx">top</span><span class="o">&gt;</span><span class="mi">3</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="nx">k</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">k</span><span class="p">.</span><span class="nx">bottom</span><span class="p">),</span><span class="nx">o</span><span class="o">=</span><span class="nx">i</span><span class="p">,</span><span class="nx">k</span><span class="p">.</span><span class="nx">bottom</span><span class="o">&lt;</span><span class="nx">n</span><span class="p">.</span><span class="nx">top</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="nx">k</span><span class="p">.</span><span class="nx">bottom</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">n</span><span class="p">.</span><span class="nx">top</span><span class="p">)),</span><span class="kc">null</span><span class="o">==</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="o">==</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">p</span><span class="o">=</span><span class="nx">h</span><span class="p">),</span><span class="kc">null</span><span class="o">==</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="mi">0</span><span class="o">==</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="nx">i</span><span class="p">),</span><span class="nx">m</span><span class="o">=</span><span class="nx">g</span><span class="o">?</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span><span class="o">:</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">bottom</span><span class="p">,</span><span class="nx">m</span><span class="p">),</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="o">&gt;</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="nx">i</span><span class="p">),</span><span class="nx">b</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="nx">n</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span><span class="nx">p</span><span class="o">-</span><span class="nx">o</span><span class="p">,</span><span class="nx">n</span><span class="p">.</span><span class="nx">bottom</span><span class="p">)}),</span><span class="nx">m</span><span class="p">}</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">(),</span><span class="nx">h</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineSpace</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">H</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="p">)</span><span class="nx">c</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">ch</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">m</span><span class="o">=</span><span class="nx">l</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="p">[</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">ch</span><span class="p">];</span><span class="nx">j</span><span class="o">=</span><span class="nx">ic</span><span class="p">(</span><span class="nx">m</span><span class="p">);){</span><span class="kd">var</span> <span class="nx">o</span><span class="o">=</span><span class="nx">j</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="nx">o</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">o</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">ch</span><span class="p">),</span><span class="nx">o</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="p">){</span><span class="nx">n</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">ch</span><span class="p">),</span><span class="nx">k</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="k">break</span><span class="p">}</span><span class="nx">m</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">o</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="p">)}</span><span class="k">if</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">p</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">p</span><span class="o">&lt;</span><span class="nx">n</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">p</span><span class="o">+=</span><span class="mi">3</span><span class="p">)</span><span class="nx">c</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="nx">p</span><span class="p">],</span><span class="nx">n</span><span class="p">[</span><span class="nx">p</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="nx">n</span><span class="p">[</span><span class="nx">p</span><span class="o">+</span><span class="mi">2</span><span class="p">]);</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">q</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">s</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="p">);</span><span class="nx">q</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">ch</span><span class="o">?</span><span class="nx">c</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">Ic</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">l</span><span class="p">)</span><span class="o">-</span><span class="nx">d</span><span class="p">.</span><span class="nx">viewOffset</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">ch</span><span class="o">?</span><span class="nx">c</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">hc</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="nx">Ic</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span><span class="o">-</span><span class="nx">d</span><span class="p">.</span><span class="nx">viewOffset</span><span class="p">,</span><span class="nx">r</span><span class="o">&gt;</span><span class="nx">q</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">q</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">r</span><span class="p">)}}</span><span class="nx">jd</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">selectionDiv</span><span class="p">,</span><span class="nx">g</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">selectionDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">}</span><span class="kd">function</span> <span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">blinker</span><span class="p">);</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">otherCursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">blinker</span><span class="o">=</span><span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">b</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">otherCursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span><span class="o">=</span><span class="p">(</span><span class="nx">c</span><span class="o">=!</span><span class="nx">c</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;&quot;</span><span class="o">:</span><span class="s2">&quot;hidden&quot;</span><span class="p">)},</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">cursorBlinkRate</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">C</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">frontier</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingTo</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">highlight</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">ed</span><span class="p">(</span><span class="nx">D</span><span class="p">,</span><span class="nx">a</span><span class="p">))}</span><span class="kd">function</span> <span class="nx">D</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">frontier</span><span class="o">&gt;=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingTo</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="o">=+</span><span class="k">new</span> <span class="nb">Date</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">workTime</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">Tb</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="nx">F</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">frontier</span><span class="p">)),</span><span class="nx">g</span><span class="o">=</span><span class="p">[];</span><span class="nx">c</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">frontier</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingTo</span><span class="o">+</span><span class="mi">500</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">frontier</span><span class="o">&gt;=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">?</span><span class="p">(</span><span class="nx">uc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">f</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">frontier</span><span class="o">&gt;=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">end</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">frontier</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">end</span><span class="o">++:</span><span class="nx">g</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">frontier</span><span class="p">,</span><span class="nx">end</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">frontier</span><span class="o">+</span><span class="mi">1</span><span class="p">})),</span><span class="nx">c</span><span class="p">.</span><span class="nx">stateAfter</span><span class="o">=</span><span class="nx">Tb</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="nx">f</span><span class="p">))</span><span class="o">:</span><span class="p">(</span><span class="nx">vc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">f</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">stateAfter</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">frontier</span><span class="o">%</span><span class="mi">5</span><span class="o">==</span><span class="mi">0</span><span class="o">?</span><span class="nx">Tb</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="nx">f</span><span class="p">)</span><span class="o">:</span><span class="kc">null</span><span class="p">),</span><span class="o">++</span><span class="nx">b</span><span class="p">.</span><span class="nx">frontier</span><span class="p">,</span><span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="o">&gt;</span><span class="nx">e</span><span class="o">?</span><span class="p">(</span><span class="nx">C</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">workDelay</span><span class="p">),</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">}),</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="o">&amp;&amp;</span><span class="nx">V</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="o">&lt;</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">a</span><span class="p">)</span><span class="nx">W</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">g</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">start</span><span class="p">,</span><span class="nx">g</span><span class="p">[</span><span class="nx">a</span><span class="p">].</span><span class="nx">end</span><span class="p">)})()}}</span><span class="kd">function</span> <span class="nx">E</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="o">-</span><span class="mi">100</span><span class="p">;</span><span class="nx">f</span><span class="o">&gt;</span><span class="nx">g</span><span class="p">;</span><span class="o">--</span><span class="nx">f</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="o">==</span><span class="nx">f</span><span class="p">)</span><span class="k">return</span> <span class="mi">0</span><span class="p">;</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">stateAfter</span><span class="p">)</span><span class="k">return</span> <span class="nx">f</span><span class="p">;</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">$c</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">tabSize</span><span class="p">);(</span><span class="kc">null</span><span class="o">==</span><span class="nx">d</span><span class="o">||</span><span class="nx">c</span><span class="o">&gt;</span><span class="nx">i</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">f</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">i</span><span class="p">)}</span><span class="k">return</span> <span class="nx">d</span><span class="p">}</span><span class="kd">function</span> <span class="nx">F</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">E</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">d</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">stateAfter</span><span class="p">;</span><span class="k">return</span> <span class="nx">e</span><span class="o">=</span><span class="nx">e</span><span class="o">?</span><span class="nx">Tb</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="nx">e</span><span class="p">)</span><span class="o">:</span><span class="nx">Ub</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">mode</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">){</span><span class="nx">vc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">e</span><span class="p">);</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">d</span><span class="o">==</span><span class="nx">b</span><span class="o">-</span><span class="mi">1</span><span class="o">||</span><span class="nx">d</span><span class="o">%</span><span class="mi">5</span><span class="o">==</span><span class="mi">0</span><span class="o">||</span><span class="nx">d</span><span class="o">&gt;=</span><span class="nx">c</span><span class="p">.</span><span class="nx">showingFrom</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">.</span><span class="nx">showingTo</span><span class="p">;</span><span class="nx">f</span><span class="p">.</span><span class="nx">stateAfter</span><span class="o">=</span><span class="nx">g</span><span class="o">?</span><span class="nx">Tb</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="nx">e</span><span class="p">)</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="o">++</span><span class="nx">d</span><span class="p">}),</span><span class="nx">e</span><span class="p">}</span><span class="kd">function</span> <span class="nx">G</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">lineSpace</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">}</span><span class="kd">function</span> <span class="nx">H</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">jd</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="p">,</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;pre&quot;</span><span class="p">)).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span><span class="s2">&quot;x&quot;</span><span class="p">));</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">}</span><span class="kd">function</span> <span class="nx">I</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="o">||</span><span class="nx">J</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">e</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">c</span><span class="p">;;</span><span class="nx">f</span><span class="o">+=</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">f</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="mi">0</span><span class="o">==</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="mi">1</span><span class="p">)}</span><span class="k">return</span><span class="p">{</span><span class="nx">left</span><span class="o">:</span><span class="nx">c</span><span class="o">&gt;</span><span class="nx">f</span><span class="o">?</span><span class="nx">g</span><span class="p">.</span><span class="nx">right</span><span class="o">:</span><span class="nx">g</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span><span class="nx">right</span><span class="o">:</span><span class="nx">f</span><span class="o">&gt;</span><span class="nx">c</span><span class="o">?</span><span class="nx">g</span><span class="p">.</span><span class="nx">left</span><span class="o">:</span><span class="nx">g</span><span class="p">.</span><span class="nx">right</span><span class="p">,</span><span class="nx">top</span><span class="o">:</span><span class="nx">g</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span><span class="nx">bottom</span><span class="o">:</span><span class="nx">g</span><span class="p">.</span><span class="nx">bottom</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">J</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">measureLineCache</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">text</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">markedSpans</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">markedSpans</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span><span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">measure</span><span class="p">}</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">K</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="p">{</span><span class="nx">text</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="nx">width</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">,</span><span class="nx">markedSpans</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">,</span><span class="nx">measure</span><span class="o">:</span><span class="nx">g</span><span class="p">};</span><span class="k">return</span> <span class="mi">16</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="nx">d</span><span class="p">[</span><span class="o">++</span><span class="nx">c</span><span class="p">.</span><span class="nx">measureLineCachePos</span><span class="o">%</span><span class="mi">16</span><span class="p">]</span><span class="o">=</span><span class="nx">f</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">),</span><span class="nx">g</span><span class="p">}</span><span class="kd">function</span> <span class="nx">K</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">dd</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">xc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">Ed</span><span class="o">&amp;&amp;!</span><span class="nx">Fd</span><span class="o">&amp;&amp;!</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineWrapping</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">100</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">(),</span><span class="nx">g</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">h</span><span class="o">/</span><span class="nx">g</span><span class="p">);</span><span class="nx">j</span><span class="o">&gt;</span><span class="nx">i</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;display: inline-block&quot;</span><span class="p">),</span><span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">g</span><span class="o">&gt;</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">h</span><span class="p">;</span><span class="o">++</span><span class="nx">l</span><span class="p">)</span><span class="nx">k</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">),</span><span class="o">--</span><span class="nx">h</span><span class="p">;</span><span class="nx">f</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">k</span><span class="p">)}</span><span class="nx">e</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">f</span><span class="p">)}</span><span class="nx">jd</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">measure</span><span class="p">,</span><span class="nx">e</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">m</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">lineDiv</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">(),</span><span class="nx">o</span><span class="o">=</span><span class="p">[],</span><span class="nx">p</span><span class="o">=</span><span class="nx">dd</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span><span class="nx">q</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">m</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">i</span><span class="p">]){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="nx">m</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">(),</span><span class="nx">s</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">r</span><span class="p">.</span><span class="nx">top</span><span class="o">-</span><span class="nx">n</span><span class="p">.</span><span class="nx">top</span><span class="p">),</span><span class="nx">t</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">bottom</span><span class="o">-</span><span class="nx">n</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span><span class="nx">q</span><span class="p">),</span><span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">l</span><span class="o">&lt;</span><span class="nx">o</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">l</span><span class="o">+=</span><span class="mi">2</span><span class="p">){</span><span class="kd">var</span> <span class="nx">u</span><span class="o">=</span><span class="nx">o</span><span class="p">[</span><span class="nx">l</span><span class="p">],</span><span class="nx">v</span><span class="o">=</span><span class="nx">o</span><span class="p">[</span><span class="nx">l</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">u</span><span class="o">&gt;</span><span class="nx">t</span><span class="o">||</span><span class="nx">s</span><span class="o">&gt;</span><span class="nx">v</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">s</span><span class="o">&gt;=</span><span class="nx">u</span><span class="o">&amp;&amp;</span><span class="nx">v</span><span class="o">&gt;=</span><span class="nx">t</span><span class="o">||</span><span class="nx">u</span><span class="o">&gt;=</span><span class="nx">s</span><span class="o">&amp;&amp;</span><span class="nx">t</span><span class="o">&gt;=</span><span class="nx">v</span><span class="o">||</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">v</span><span class="p">)</span><span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">u</span><span class="p">)</span><span class="o">&gt;=</span><span class="nx">t</span><span class="o">-</span><span class="nx">s</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)){</span><span class="nx">o</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">u</span><span class="p">),</span><span class="nx">o</span><span class="p">[</span><span class="nx">l</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">v</span><span class="p">);</span><span class="k">break</span><span class="p">}}</span><span class="nx">l</span><span class="o">==</span><span class="nx">o</span><span class="p">.</span><span class="nx">length</span><span class="o">&amp;&amp;</span><span class="nx">o</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">t</span><span class="p">),</span><span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="nx">left</span><span class="o">:</span><span class="nx">r</span><span class="p">.</span><span class="nx">left</span><span class="o">-</span><span class="nx">n</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span><span class="nx">right</span><span class="o">:</span><span class="nx">r</span><span class="p">.</span><span class="nx">right</span><span class="o">-</span><span class="nx">n</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span><span class="nx">top</span><span class="o">:</span><span class="nx">l</span><span class="p">}}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">m</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">p</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">m</span><span class="o">=</span><span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]){</span><span class="kd">var</span> <span class="nx">w</span><span class="o">=</span><span class="nx">m</span><span class="p">.</span><span class="nx">top</span><span class="p">;</span><span class="nx">m</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nx">o</span><span class="p">[</span><span class="nx">w</span><span class="p">],</span><span class="nx">m</span><span class="p">.</span><span class="nx">bottom</span><span class="o">=</span><span class="nx">o</span><span class="p">[</span><span class="nx">w</span><span class="o">+</span><span class="mi">1</span><span class="p">]}</span><span class="k">return</span> <span class="nx">p</span><span class="p">}</span><span class="kd">function</span> <span class="nx">L</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">measureLineCache</span><span class="p">.</span><span class="nx">length</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">measureLineCachePos</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">cachedCharWidth</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">cachedTextHeight</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">maxLineChanged</span><span class="o">=!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">M</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">widgets</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">widgets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">widgets</span><span class="p">[</span><span class="nx">e</span><span class="p">].</span><span class="nx">above</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">widgets</span><span class="p">[</span><span class="nx">e</span><span class="p">].</span><span class="nx">node</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="o">+=</span><span class="nx">f</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">bottom</span><span class="o">+=</span><span class="nx">f</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="o">==</span><span class="nx">d</span><span class="p">)</span><span class="k">return</span> <span class="nx">c</span><span class="p">;</span><span class="nx">d</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="s2">&quot;local&quot;</span><span class="p">);</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">Ic</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;local&quot;</span><span class="o">!=</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="o">-=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">viewOffset</span><span class="p">),</span><span class="s2">&quot;page&quot;</span><span class="o">==</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">lineSpace</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span><span class="nx">g</span><span class="o">+=</span><span class="nx">h</span><span class="p">.</span><span class="nx">top</span><span class="o">+</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">pageYOffset</span><span class="o">||</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="o">||</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">).</span><span class="nx">scrollTop</span><span class="p">);</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">left</span><span class="o">+</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">pageXOffset</span><span class="o">||</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="o">||</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">).</span><span class="nx">scrollLeft</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">left</span><span class="o">+=</span><span class="nx">i</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">right</span><span class="o">+=</span><span class="nx">i</span><span class="p">}</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="o">+=</span><span class="nx">g</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">bottom</span><span class="o">+=</span><span class="nx">g</span><span class="p">,</span><span class="nx">c</span><span class="p">}</span><span class="kd">function</span> <span class="nx">N</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">return</span> <span class="nx">d</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">)),</span><span class="nx">M</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">I</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">),</span><span class="nx">c</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">O</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">I</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">e</span><span class="p">);</span><span class="k">return</span> <span class="nx">f</span><span class="o">?</span><span class="nx">g</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">right</span><span class="o">:</span><span class="nx">g</span><span class="p">.</span><span class="nx">right</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span><span class="nx">M</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">c</span><span class="p">)}</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="o">||</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">e</span><span class="o">||</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">J</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">));</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">Jc</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span><span class="nx">h</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">g</span><span class="p">)</span><span class="k">return</span> <span class="nx">f</span><span class="p">(</span><span class="nx">h</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="nx">g</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">level</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">l</span><span class="o">&lt;</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">l</span><span class="p">){</span><span class="kd">var</span> <span class="nx">m</span><span class="p">,</span><span class="nx">n</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nx">g</span><span class="p">[</span><span class="nx">l</span><span class="p">],</span><span class="nx">p</span><span class="o">=</span><span class="nx">o</span><span class="p">.</span><span class="nx">level</span><span class="o">%</span><span class="mi">2</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;</span><span class="nx">h</span><span class="o">&amp;&amp;</span><span class="nx">o</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;</span><span class="nx">h</span><span class="p">)</span><span class="k">return</span> <span class="nx">f</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span><span class="nx">p</span><span class="p">);</span><span class="kd">var</span> <span class="nx">q</span><span class="o">=</span><span class="nx">p</span><span class="o">?</span><span class="nx">o</span><span class="p">.</span><span class="nx">to</span><span class="o">:</span><span class="nx">o</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="nx">p</span><span class="o">?</span><span class="nx">o</span><span class="p">.</span><span class="nx">from</span><span class="o">:</span><span class="nx">o</span><span class="p">.</span><span class="nx">to</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">q</span><span class="o">==</span><span class="nx">h</span><span class="p">)</span><span class="nx">n</span><span class="o">=</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">o</span><span class="p">.</span><span class="nx">level</span><span class="o">&lt;</span><span class="p">(</span><span class="nx">m</span><span class="o">=</span><span class="nx">g</span><span class="p">[</span><span class="nx">l</span><span class="o">-</span><span class="mi">1</span><span class="p">]).</span><span class="nx">level</span><span class="o">?</span><span class="nx">f</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">level</span><span class="o">%</span><span class="mi">2</span><span class="o">?</span><span class="nx">m</span><span class="p">.</span><span class="nx">from</span><span class="o">:</span><span class="nx">m</span><span class="p">.</span><span class="nx">to</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="nx">f</span><span class="p">(</span><span class="nx">p</span><span class="o">&amp;&amp;</span><span class="nx">o</span><span class="p">.</span><span class="nx">from</span><span class="o">!=</span><span class="nx">o</span><span class="p">.</span><span class="nx">to</span><span class="o">?</span><span class="nx">h</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="nx">h</span><span class="p">),</span><span class="nx">p</span><span class="o">==</span><span class="nx">k</span><span class="o">?</span><span class="nx">i</span><span class="o">=</span><span class="nx">n</span><span class="o">:</span><span class="nx">j</span><span class="o">=</span><span class="nx">n</span><span class="p">;</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="o">==</span><span class="nx">h</span><span class="p">){</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="nx">l</span><span class="o">&lt;</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nx">g</span><span class="p">[</span><span class="nx">l</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">p</span><span class="o">&amp;&amp;</span><span class="nx">m</span><span class="o">&amp;&amp;</span><span class="nx">m</span><span class="p">.</span><span class="nx">from</span><span class="o">==</span><span class="nx">m</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span><span class="k">continue</span><span class="p">;</span><span class="nx">n</span><span class="o">=</span><span class="nx">m</span><span class="o">&amp;&amp;</span><span class="nx">o</span><span class="p">.</span><span class="nx">level</span><span class="o">&lt;</span><span class="nx">m</span><span class="p">.</span><span class="nx">level</span><span class="o">?</span><span class="nx">f</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">level</span><span class="o">%</span><span class="mi">2</span><span class="o">?</span><span class="nx">m</span><span class="p">.</span><span class="nx">to</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="nx">m</span><span class="p">.</span><span class="nx">from</span><span class="p">)</span><span class="o">:</span><span class="nx">f</span><span class="p">(</span><span class="nx">p</span><span class="o">?</span><span class="nx">h</span><span class="o">:</span><span class="nx">h</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">p</span><span class="o">==</span><span class="nx">k</span><span class="o">?</span><span class="nx">i</span><span class="o">=</span><span class="nx">n</span><span class="o">:</span><span class="nx">j</span><span class="o">=</span><span class="nx">n</span><span class="p">}}</span><span class="k">return</span> <span class="nx">k</span><span class="o">&amp;&amp;!</span><span class="nx">h</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">j</span><span class="o">=</span><span class="nx">f</span><span class="p">(</span><span class="nx">g</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">to</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span><span class="nx">i</span><span class="o">?</span><span class="p">(</span><span class="nx">j</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">other</span><span class="o">=</span><span class="nx">j</span><span class="p">),</span><span class="nx">i</span><span class="p">)</span><span class="o">:</span><span class="nx">j</span><span class="p">}</span><span class="kd">function</span> <span class="nx">P</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">+=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">viewOffset</span><span class="p">,</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">c</span><span class="p">)</span><span class="k">return</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">outside</span><span class="o">:!</span><span class="mi">0</span><span class="p">};</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">Hc</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">&gt;=</span><span class="nx">d</span><span class="p">.</span><span class="nx">size</span><span class="p">)</span><span class="k">return</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">size</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">size</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">};</span><span class="k">for</span><span class="p">(</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">);;){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="nx">Q</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">h</span><span class="o">=</span><span class="nx">ic</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">h</span><span class="o">||</span><span class="nx">g</span><span class="p">.</span><span class="nx">ch</span><span class="o">!=</span><span class="nx">rd</span><span class="p">(</span><span class="nx">f</span><span class="p">))</span><span class="k">return</span> <span class="nx">g</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">Q</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">O</span><span class="p">(</span><span class="nx">a</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">d</span><span class="p">},</span><span class="s2">&quot;line&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">j</span><span class="p">);</span><span class="k">return</span> <span class="nx">h</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="o">&gt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">bottom</span><span class="o">?</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">left</span><span class="o">-</span><span class="nx">i</span><span class="p">)</span><span class="o">:</span><span class="nx">g</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">top</span><span class="o">?</span><span class="nx">e</span><span class="p">.</span><span class="nx">left</span><span class="o">+</span><span class="nx">i</span><span class="o">:</span><span class="p">(</span><span class="nx">h</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">left</span><span class="p">)}</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">e</span><span class="o">-</span><span class="nx">Ic</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">h</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="nx">J</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">k</span><span class="o">=</span><span class="nx">Jc</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">l</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="nx">qd</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">n</span><span class="o">=</span><span class="nx">rd</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">o</span><span class="o">=</span><span class="nx">H</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">),</span><span class="nx">p</span><span class="o">=</span><span class="nx">f</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="o">&gt;</span><span class="nx">p</span><span class="p">)</span><span class="k">return</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">n</span><span class="p">,</span><span class="nx">outside</span><span class="o">:</span><span class="nx">h</span><span class="p">};</span><span class="k">for</span><span class="p">(;;){</span><span class="k">if</span><span class="p">(</span><span class="nx">k</span><span class="o">?</span><span class="nx">n</span><span class="o">==</span><span class="nx">m</span><span class="o">||</span><span class="nx">n</span><span class="o">==</span><span class="nx">ud</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">m</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="mi">1</span><span class="o">&gt;=</span><span class="nx">n</span><span class="o">-</span><span class="nx">m</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">q</span><span class="o">=</span><span class="nx">p</span><span class="o">-</span><span class="nx">d</span><span class="o">&gt;</span><span class="nx">d</span><span class="o">-</span><span class="nx">o</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="nx">q</span><span class="o">?</span><span class="nx">m</span><span class="o">:</span><span class="nx">n</span><span class="p">;</span><span class="nx">ne</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">r</span><span class="p">));)</span><span class="o">++</span><span class="nx">r</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">r</span><span class="p">,</span><span class="nx">after</span><span class="o">:</span><span class="nx">q</span><span class="p">,</span><span class="nx">outside</span><span class="o">:</span><span class="nx">h</span><span class="p">}}</span><span class="kd">var</span> <span class="nx">s</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">l</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="nx">t</span><span class="o">=</span><span class="nx">m</span><span class="o">+</span><span class="nx">s</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">k</span><span class="p">){</span><span class="nx">t</span><span class="o">=</span><span class="nx">m</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">u</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">s</span><span class="o">&gt;</span><span class="nx">u</span><span class="p">;</span><span class="o">++</span><span class="nx">u</span><span class="p">)</span><span class="nx">t</span><span class="o">=</span><span class="nx">ud</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">t</span><span class="p">,</span><span class="mi">1</span><span class="p">)}</span><span class="kd">var</span> <span class="nx">v</span><span class="o">=</span><span class="nx">f</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span><span class="nx">v</span><span class="o">&gt;</span><span class="nx">d</span><span class="o">?</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="nx">t</span><span class="p">,</span><span class="nx">p</span><span class="o">=</span><span class="nx">v</span><span class="p">,</span><span class="nx">h</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">p</span><span class="o">+=</span><span class="mi">1</span><span class="nx">e3</span><span class="p">),</span><span class="nx">l</span><span class="o">-=</span><span class="nx">s</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">m</span><span class="o">=</span><span class="nx">t</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nx">v</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="nx">s</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">R</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">cachedTextHeight</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">cachedTextHeight</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">wd</span><span class="p">){</span><span class="nx">wd</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;pre&quot;</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="mi">49</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">;</span><span class="o">++</span><span class="nx">b</span><span class="p">)</span><span class="nx">wd</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)),</span><span class="nx">wd</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;br&quot;</span><span class="p">));</span><span class="nx">wd</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))}</span><span class="nx">jd</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="p">,</span><span class="nx">wd</span><span class="p">);</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">wd</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="o">/</span><span class="mi">50</span><span class="p">;</span><span class="k">return</span> <span class="nx">c</span><span class="o">&gt;</span><span class="mi">3</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">cachedTextHeight</span><span class="o">=</span><span class="nx">c</span><span class="p">),</span><span class="nx">id</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="p">),</span><span class="nx">c</span><span class="o">||</span><span class="mi">1</span><span class="p">}</span><span class="kd">function</span> <span class="nx">S</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">cachedCharWidth</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">cachedCharWidth</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span><span class="s2">&quot;x&quot;</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;pre&quot;</span><span class="p">,[</span><span class="nx">b</span><span class="p">]);</span><span class="nx">jd</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">;</span><span class="k">return</span> <span class="nx">d</span><span class="o">&gt;</span><span class="mi">2</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">cachedCharWidth</span><span class="o">=</span><span class="nx">d</span><span class="p">),</span><span class="nx">d</span><span class="o">||</span><span class="mi">10</span><span class="p">}</span><span class="kd">function</span> <span class="nx">T</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="o">?++</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">depth</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="o">=</span><span class="p">{</span><span class="nx">depth</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">changes</span><span class="o">:</span><span class="p">[],</span><span class="nx">delayedCallbacks</span><span class="o">:</span><span class="p">[],</span><span class="nx">updateInput</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">userSelChange</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">textChanged</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">selectionChanged</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">updateMaxLine</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">id</span><span class="o">:++</span><span class="nx">a</span><span class="p">.</span><span class="nx">nextOpId</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">U</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!--</span><span class="nx">b</span><span class="p">.</span><span class="nx">depth</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">updateMaxLine</span><span class="o">&amp;&amp;</span><span class="nx">k</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">maxLineChanged</span><span class="o">&amp;&amp;!</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineWrapping</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">I</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">maxLine</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">maxLine</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">right</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">sizer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">minWidth</span><span class="o">=</span><span class="nx">e</span><span class="o">+</span><span class="mi">3</span><span class="o">+</span><span class="nx">je</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">maxLineChanged</span><span class="o">=!</span><span class="mi">1</span><span class="p">}</span><span class="kd">var</span> <span class="nx">f</span><span class="p">,</span><span class="nx">g</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">selectionChanged</span><span class="p">){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">O</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">head</span><span class="p">);</span><span class="nx">f</span><span class="o">=</span><span class="nx">Mb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">h</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span><span class="nx">h</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span><span class="nx">h</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span><span class="nx">h</span><span class="p">.</span><span class="nx">bottom</span><span class="p">)}(</span><span class="nx">b</span><span class="p">.</span><span class="nx">changes</span><span class="p">.</span><span class="nx">length</span><span class="o">||</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="kc">null</span><span class="o">!=</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="nx">s</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">changes</span><span class="p">,</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">)),</span><span class="o">!</span><span class="nx">g</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">selectionChanged</span><span class="o">&amp;&amp;</span><span class="nx">y</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">Jb</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">selectionChanged</span><span class="o">&amp;&amp;</span><span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">focused</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">updateInput</span><span class="o">&amp;&amp;</span><span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">userSelChange</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">textChanged</span><span class="o">&amp;&amp;</span><span class="nx">Wc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;change&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">textChanged</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">selectionChanged</span><span class="o">&amp;&amp;</span><span class="nx">Wc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;cursorActivity&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">delayedCallbacks</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">)</span><span class="nx">b</span><span class="p">.</span><span class="nx">delayedCallbacks</span><span class="p">[</span><span class="nx">i</span><span class="p">](</span><span class="nx">a</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">V</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="o">||</span><span class="k">this</span><span class="p">;</span><span class="nx">T</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="k">try</span><span class="p">{</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">arguments</span><span class="p">)}</span><span class="k">finally</span><span class="p">{</span><span class="nx">U</span><span class="p">(</span><span class="nx">c</span><span class="p">)}</span><span class="k">return</span> <span class="nx">d</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">W</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">changes</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">diff</span><span class="o">:</span><span class="nx">d</span><span class="p">})}</span><span class="kd">function</span> <span class="nx">X</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">pollingFast</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">poll</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">pollInterval</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">Z</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">focused</span><span class="o">&amp;&amp;</span><span class="nx">X</span><span class="p">(</span><span class="nx">a</span><span class="p">)})}</span><span class="kd">function</span> <span class="nx">Y</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">function</span> <span class="nx">b</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">Z</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="nx">d</span><span class="o">||</span><span class="nx">c</span><span class="o">?</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">pollingFast</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">X</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="o">:</span><span class="p">(</span><span class="nx">c</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">poll</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span><span class="nx">b</span><span class="p">))}</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">pollingFast</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">poll</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="nx">b</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">Z</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">prevInput</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">sel</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">focused</span><span class="o">||</span><span class="nx">te</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">||</span><span class="nx">ab</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="o">==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">zb</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="nx">T</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">shift</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span><span class="nx">h</span><span class="o">&gt;</span><span class="nx">g</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">[</span><span class="nx">g</span><span class="p">]</span><span class="o">==</span><span class="nx">f</span><span class="p">[</span><span class="nx">g</span><span class="p">];)</span><span class="o">++</span><span class="nx">g</span><span class="p">;</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="p">;</span><span class="nx">g</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="nx">i</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">ch</span><span class="o">-</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">g</span><span class="p">)}</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">overwrite</span><span class="o">&amp;&amp;</span><span class="nx">zb</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">)</span><span class="o">&amp;&amp;!</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">pasteIncoming</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">j</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">j</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">j</span><span class="p">.</span><span class="nx">line</span><span class="p">).</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">j</span><span class="p">.</span><span class="nx">ch</span><span class="o">+</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">g</span><span class="p">))});</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">updateInput</span><span class="p">;</span><span class="k">return</span> <span class="nx">ub</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="nx">se</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">g</span><span class="p">)),</span><span class="s2">&quot;end&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">pasteIncoming</span><span class="o">?</span><span class="s2">&quot;paste&quot;</span><span class="o">:</span><span class="s2">&quot;input&quot;</span><span class="p">,{</span><span class="nx">from</span><span class="o">:</span><span class="nx">i</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">j</span><span class="p">}),</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">updateInput</span><span class="o">=</span><span class="nx">k</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">1</span><span class="nx">e3</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">prevInput</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">prevInput</span><span class="o">=</span><span class="nx">f</span><span class="p">,</span><span class="nx">U</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">pasteIncoming</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">;</span><span class="nx">zb</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span><span class="o">?</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">prevInput</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">prevInput</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">ue</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="o">-</span><span class="nx">e</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="o">&gt;</span><span class="mi">100</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">()).</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">1</span><span class="nx">e3</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="nx">c</span><span class="o">?</span><span class="s2">&quot;-&quot;</span><span class="o">:</span><span class="nx">d</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">(),</span><span class="nx">e</span><span class="p">.</span><span class="nx">focused</span><span class="o">&amp;&amp;</span><span class="nx">bd</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">input</span><span class="p">)),</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">inaccurateSelection</span><span class="o">=</span><span class="nx">c</span><span class="p">}</span><span class="kd">function</span> <span class="nx">_</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="s2">&quot;nocursor&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">readOnly</span><span class="o">||!</span><span class="nx">Ed</span><span class="o">&amp;&amp;</span><span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">input</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">focus</span><span class="p">()}</span><span class="kd">function</span> <span class="nx">ab</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">readOnly</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">cantEdit</span><span class="p">}</span><span class="kd">function</span> <span class="nx">bb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">function</span> <span class="nx">b</span><span class="p">(){</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">focused</span><span class="o">&amp;&amp;</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">ed</span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="mi">0</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">c</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onDragEvent</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onDragEvent</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">Nc</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="o">||</span><span class="nx">Qc</span><span class="p">(</span><span class="nx">b</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">d</span><span class="p">(){</span><span class="nx">e</span><span class="p">.</span><span class="nx">inaccurateSelection</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">prevInput</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">inaccurateSelection</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">(),</span><span class="nx">bd</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">))}</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;mousedown&quot;</span><span class="p">,</span><span class="nx">V</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">eb</span><span class="p">)),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;dblclick&quot;</span><span class="p">,</span><span class="nx">V</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">Oc</span><span class="p">)),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">lineSpace</span><span class="p">,</span><span class="s2">&quot;selectstart&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">cb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">a</span><span class="p">)}),</span><span class="nx">Dd</span><span class="o">||</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;contextmenu&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">tb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)}),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;scroll&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">ib</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">),</span><span class="nx">jb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Wc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;scroll&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">)}),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">,</span><span class="s2">&quot;scroll&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">ib</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">)}),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">,</span><span class="s2">&quot;scroll&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">jb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">)}),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;mousewheel&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">kb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)}),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;DOMMouseScroll&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">kb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)}),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">,</span><span class="s2">&quot;mousedown&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">,</span><span class="s2">&quot;mousedown&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">,</span><span class="s2">&quot;scroll&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">e</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">=</span><span class="mi">0</span><span class="p">}),</span><span class="nx">Uc</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="s2">&quot;resize&quot;</span><span class="p">,</span><span class="kd">function</span> <span class="nx">f</span><span class="p">(){</span><span class="nx">e</span><span class="p">.</span><span class="nx">cachedCharWidth</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">cachedTextHeight</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">L</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">parentNode</span><span class="o">?</span><span class="nx">s</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="nx">Vc</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="s2">&quot;resize&quot;</span><span class="p">,</span><span class="nx">f</span><span class="p">)}),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span><span class="s2">&quot;keyup&quot;</span><span class="p">,</span><span class="nx">V</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onKeyEvent</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onKeyEvent</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">Nc</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="o">||</span><span class="mi">16</span><span class="o">==</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;keyCode&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">shift</span><span class="o">=!</span><span class="mi">1</span><span class="p">)})),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span><span class="s2">&quot;input&quot;</span><span class="p">,</span><span class="nx">ed</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span><span class="nx">a</span><span class="p">)),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span><span class="s2">&quot;keydown&quot;</span><span class="p">,</span><span class="nx">V</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">pb</span><span class="p">)),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span><span class="s2">&quot;keypress&quot;</span><span class="p">,</span><span class="nx">V</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">qb</span><span class="p">)),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span><span class="s2">&quot;focus&quot;</span><span class="p">,</span><span class="nx">ed</span><span class="p">(</span><span class="nx">rb</span><span class="p">,</span><span class="nx">a</span><span class="p">)),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span><span class="s2">&quot;blur&quot;</span><span class="p">,</span><span class="nx">ed</span><span class="p">(</span><span class="nx">sb</span><span class="p">,</span><span class="nx">a</span><span class="p">)),</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">dragDrop</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;dragstart&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">hb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)}),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;dragenter&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;dragover&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;drop&quot;</span><span class="p">,</span><span class="nx">V</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">fb</span><span class="p">))),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;paste&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">_</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">Y</span><span class="p">(</span><span class="nx">a</span><span class="p">)}),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span><span class="s2">&quot;paste&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">e</span><span class="p">.</span><span class="nx">pasteIncoming</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">Y</span><span class="p">(</span><span class="nx">a</span><span class="p">)}),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span><span class="s2">&quot;cut&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span><span class="s2">&quot;copy&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">),</span><span class="nx">Md</span><span class="o">&amp;&amp;</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">sizer</span><span class="p">,</span><span class="s2">&quot;mouseup&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span><span class="o">==</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">blur</span><span class="p">(),</span><span class="nx">_</span><span class="p">(</span><span class="nx">a</span><span class="p">)})}</span><span class="kd">function</span> <span class="nx">cb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">Rc</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="nx">c</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">;</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="sr">/\bCodeMirror-(?:line)?widget\b/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">className</span><span class="p">)</span><span class="o">||</span><span class="nx">c</span><span class="p">.</span><span class="nx">parentNode</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">sizer</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">mover</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">db</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">Rc</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="o">||</span><span class="nx">e</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">firstChild</span><span class="o">||</span><span class="nx">e</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="o">||</span><span class="nx">e</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">firstChild</span><span class="o">||</span><span class="nx">e</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">scrollbarFiller</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">}</span><span class="kd">var</span> <span class="nx">f</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">lineSpace</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span><span class="k">try</span><span class="p">{</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">clientX</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">clientY</span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="kc">null</span><span class="p">}</span><span class="k">return</span> <span class="nx">P</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="o">-</span><span class="nx">h</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span><span class="nx">g</span><span class="o">-</span><span class="nx">h</span><span class="p">.</span><span class="nx">top</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">eb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">function</span> <span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;single&quot;</span><span class="o">==</span><span class="nx">l</span><span class="p">)</span><span class="k">return</span> <span class="nx">Fb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">Db</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">),</span><span class="nx">a</span><span class="p">),</span><span class="k">void</span> <span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">q</span><span class="o">=</span><span class="nx">Db</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">q</span><span class="p">),</span><span class="nx">r</span><span class="o">=</span><span class="nx">Db</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">r</span><span class="p">),</span><span class="s2">&quot;double&quot;</span><span class="o">==</span><span class="nx">l</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">Qb</span><span class="p">(</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="p">).</span><span class="nx">text</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">q</span><span class="p">)</span><span class="o">?</span><span class="nx">Fb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">r</span><span class="p">)</span><span class="o">:</span><span class="nx">Fb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">q</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">to</span><span class="p">)}</span><span class="k">else</span><span class="s2">&quot;triple&quot;</span><span class="o">==</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">q</span><span class="p">)</span><span class="o">?</span><span class="nx">Fb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">Db</span><span class="p">(</span><span class="nx">i</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">}))</span><span class="o">:</span><span class="nx">Fb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">q</span><span class="p">,</span><span class="nx">Db</span><span class="p">(</span><span class="nx">i</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">})))}</span><span class="kd">function</span> <span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=++</span><span class="nx">t</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">db</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">zb</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span><span class="nx">o</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientY</span><span class="o">&lt;</span><span class="nx">s</span><span class="p">.</span><span class="nx">top</span><span class="o">?-</span><span class="mi">20</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientY</span><span class="o">&gt;</span><span class="nx">s</span><span class="p">.</span><span class="nx">bottom</span><span class="o">?</span><span class="mi">20</span><span class="o">:</span><span class="mi">0</span><span class="p">;</span><span class="nx">j</span><span class="o">&amp;&amp;</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">V</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">t</span><span class="o">==</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">+=</span><span class="nx">j</span><span class="p">,</span><span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">))}),</span><span class="mi">50</span><span class="p">)}</span><span class="k">else</span><span class="p">{</span><span class="nx">g</span><span class="p">.</span><span class="nx">focused</span><span class="o">||</span><span class="nx">rb</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span><span class="nx">o</span><span class="o">=</span><span class="nx">h</span><span class="p">,</span><span class="nx">b</span><span class="p">(</span><span class="nx">h</span><span class="p">);</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">n</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">i</span><span class="p">);(</span><span class="nx">h</span><span class="p">.</span><span class="nx">line</span><span class="o">&gt;=</span><span class="nx">k</span><span class="p">.</span><span class="nx">to</span><span class="o">||</span><span class="nx">h</span><span class="p">.</span><span class="nx">line</span><span class="o">&lt;</span><span class="nx">k</span><span class="p">.</span><span class="nx">from</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">V</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">t</span><span class="o">==</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">)}),</span><span class="mi">150</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">t</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">;</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">db</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">_</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span><span class="nx">Vc</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span><span class="s2">&quot;mousemove&quot;</span><span class="p">,</span><span class="nx">u</span><span class="p">),</span><span class="nx">Vc</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span><span class="s2">&quot;mouseup&quot;</span><span class="p">,</span><span class="nx">v</span><span class="p">)}</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">sel</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">shift</span><span class="o">=</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;shiftKey&quot;</span><span class="p">),</span><span class="nx">cb</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">a</span><span class="p">))</span><span class="k">return</span> <span class="nx">Hd</span><span class="o">||</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">draggable</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">draggable</span><span class="o">=!</span><span class="mi">0</span><span class="p">},</span><span class="mi">100</span><span class="p">)),</span><span class="k">void</span> <span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">gb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nx">db</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">switch</span><span class="p">(</span><span class="nx">Sc</span><span class="p">(</span><span class="nx">a</span><span class="p">)){</span><span class="k">case</span> <span class="mi">3</span><span class="o">:</span><span class="k">return</span> <span class="nx">Dd</span><span class="o">&amp;&amp;</span><span class="nx">tb</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="k">void</span> <span class="mi">0</span><span class="p">;</span><span class="k">case</span> <span class="mi">2</span><span class="o">:</span><span class="k">return</span> <span class="nx">j</span><span class="o">&amp;&amp;</span><span class="nx">Fb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">j</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">ed</span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="nx">e</span><span class="p">),</span><span class="mi">20</span><span class="p">),</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="k">void</span> <span class="mi">0</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">j</span><span class="p">)</span><span class="k">return</span> <span class="nx">Rc</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="o">&amp;&amp;</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="k">void</span> <span class="mi">0</span><span class="p">;</span><span class="nx">g</span><span class="p">.</span><span class="nx">focused</span><span class="o">||</span><span class="nx">rb</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="s2">&quot;single&quot;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">yd</span><span class="o">&amp;&amp;</span><span class="nx">yd</span><span class="p">.</span><span class="nx">time</span><span class="o">&gt;</span><span class="nx">k</span><span class="o">-</span><span class="mi">400</span><span class="o">&amp;&amp;</span><span class="nx">zb</span><span class="p">(</span><span class="nx">yd</span><span class="p">.</span><span class="nx">pos</span><span class="p">,</span><span class="nx">j</span><span class="p">))</span><span class="nx">l</span><span class="o">=</span><span class="s2">&quot;triple&quot;</span><span class="p">,</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">ed</span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="nx">e</span><span class="p">),</span><span class="mi">20</span><span class="p">),</span><span class="nx">Rb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">j</span><span class="p">.</span><span class="nx">line</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">xd</span><span class="o">&amp;&amp;</span><span class="nx">xd</span><span class="p">.</span><span class="nx">time</span><span class="o">&gt;</span><span class="nx">k</span><span class="o">-</span><span class="mi">400</span><span class="o">&amp;&amp;</span><span class="nx">zb</span><span class="p">(</span><span class="nx">xd</span><span class="p">.</span><span class="nx">pos</span><span class="p">,</span><span class="nx">j</span><span class="p">)){</span><span class="nx">l</span><span class="o">=</span><span class="s2">&quot;double&quot;</span><span class="p">,</span><span class="nx">yd</span><span class="o">=</span><span class="p">{</span><span class="nx">time</span><span class="o">:</span><span class="nx">k</span><span class="p">,</span><span class="nx">pos</span><span class="o">:</span><span class="nx">j</span><span class="p">},</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="nx">Qb</span><span class="p">(</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">.</span><span class="nx">line</span><span class="p">).</span><span class="nx">text</span><span class="p">,</span><span class="nx">j</span><span class="p">);</span><span class="nx">Fb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">m</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">m</span><span class="p">.</span><span class="nx">to</span><span class="p">)}</span><span class="k">else</span> <span class="nx">xd</span><span class="o">=</span><span class="p">{</span><span class="nx">time</span><span class="o">:</span><span class="nx">k</span><span class="p">,</span><span class="nx">pos</span><span class="o">:</span><span class="nx">j</span><span class="p">};</span><span class="kd">var</span> <span class="nx">o</span><span class="o">=</span><span class="nx">j</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">dragDrop</span><span class="o">&amp;&amp;</span><span class="nx">oe</span><span class="o">&amp;&amp;!</span><span class="nx">ab</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">&amp;&amp;!</span><span class="nx">zb</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">h</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span><span class="o">&amp;&amp;!</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span><span class="nx">h</span><span class="p">.</span><span class="nx">from</span><span class="p">)</span><span class="o">&amp;&amp;!</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">j</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="s2">&quot;single&quot;</span><span class="o">==</span><span class="nx">l</span><span class="p">){</span><span class="kd">var</span> <span class="nx">p</span><span class="o">=</span><span class="nx">V</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">Hd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">draggable</span><span class="o">=!</span><span class="mi">1</span><span class="p">),</span><span class="nx">g</span><span class="p">.</span><span class="nx">draggingText</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">Vc</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span><span class="s2">&quot;mouseup&quot;</span><span class="p">,</span><span class="nx">p</span><span class="p">),</span><span class="nx">Vc</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;drop&quot;</span><span class="p">,</span><span class="nx">p</span><span class="p">),</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientX</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">clientX</span><span class="p">)</span><span class="o">+</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientY</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">clientY</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">Fb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">j</span><span class="p">),</span><span class="nx">_</span><span class="p">(</span><span class="nx">e</span><span class="p">))});</span><span class="k">return</span> <span class="nx">Hd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">draggable</span><span class="o">=!</span><span class="mi">0</span><span class="p">),</span><span class="nx">g</span><span class="p">.</span><span class="nx">draggingText</span><span class="o">=</span><span class="nx">p</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">dragDrop</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">dragDrop</span><span class="p">(),</span><span class="nx">Uc</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span><span class="s2">&quot;mouseup&quot;</span><span class="p">,</span><span class="nx">p</span><span class="p">),</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="s2">&quot;drop&quot;</span><span class="p">,</span><span class="nx">p</span><span class="p">),</span><span class="k">void</span> <span class="mi">0</span><span class="p">}</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="s2">&quot;single&quot;</span><span class="o">==</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">Fb</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">Db</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">));</span><span class="kd">var</span> <span class="nx">q</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">r</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">s</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">(),</span><span class="nx">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">u</span><span class="o">=</span><span class="nx">V</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">Ed</span><span class="o">||</span><span class="nx">Sc</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">)}),</span><span class="nx">v</span><span class="o">=</span><span class="nx">V</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="nx">Uc</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span><span class="s2">&quot;mousemove&quot;</span><span class="p">,</span><span class="nx">u</span><span class="p">),</span><span class="nx">Uc</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span><span class="s2">&quot;mouseup&quot;</span><span class="p">,</span><span class="nx">v</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">fb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onDragEvent</span><span class="o">||!</span><span class="nx">b</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onDragEvent</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">Nc</span><span class="p">(</span><span class="nx">a</span><span class="p">))){</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">db</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">files</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">&amp;&amp;!</span><span class="nx">ab</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">&amp;&amp;</span><span class="nb">window</span><span class="p">.</span><span class="nx">FileReader</span><span class="o">&amp;&amp;</span><span class="nb">window</span><span class="p">.</span><span class="nx">File</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nb">Array</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="k">new</span> <span class="nx">FileReader</span><span class="p">;</span><span class="nx">h</span><span class="p">.</span><span class="nx">onload</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">f</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">result</span><span class="p">,</span><span class="o">++</span><span class="nx">g</span><span class="o">==</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">Db</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">V</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">yb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">c</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="s2">&quot;paste&quot;</span><span class="p">);</span><span class="nx">Gb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">)})())},</span><span class="nx">h</span><span class="p">.</span><span class="nx">readAsText</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">i</span><span class="p">;</span><span class="o">++</span><span class="nx">i</span><span class="p">)</span><span class="nx">h</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="nx">i</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">draggingText</span><span class="o">&amp;&amp;!</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">from</span><span class="p">)</span><span class="o">&amp;&amp;!</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">c</span><span class="p">))</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">draggingText</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">Ed</span><span class="o">&amp;&amp;</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">ed</span><span class="p">(</span><span class="nx">_</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="mi">50</span><span class="p">),</span><span class="k">void</span> <span class="mi">0</span><span class="p">;</span><span class="k">try</span><span class="p">{</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">getData</span><span class="p">(</span><span class="s2">&quot;Text&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="p">){</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">;</span><span class="nx">Gb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">draggingText</span><span class="o">&amp;&amp;</span><span class="nx">yb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="s2">&quot;paste&quot;</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">replaceSelection</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;paste&quot;</span><span class="p">),</span><span class="nx">_</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">rb</span><span class="p">(</span><span class="nx">b</span><span class="p">)}}</span><span class="k">catch</span><span class="p">(</span><span class="nx">a</span><span class="p">){}}}}</span><span class="kd">function</span> <span class="nx">gb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span><span class="k">try</span><span class="p">{</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">clientX</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">clientY</span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="o">&gt;=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">().</span><span class="nx">right</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="o">!</span><span class="nx">Yc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;gutterClick&quot;</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">lineDiv</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">f</span><span class="p">.</span><span class="nx">bottom</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">-=</span><span class="nx">f</span><span class="p">.</span><span class="nx">top</span><span class="o">-</span><span class="nx">c</span><span class="p">.</span><span class="nx">viewOffset</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">g</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">g</span><span class="p">){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="nx">g</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="o">&amp;&amp;</span><span class="nx">h</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">().</span><span class="nx">right</span><span class="o">&gt;=</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">Hc</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">e</span><span class="p">),</span><span class="nx">j</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">gutters</span><span class="p">[</span><span class="nx">g</span><span class="p">];</span><span class="nx">Xc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;gutterClick&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">break</span><span class="p">}}</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">hb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getSelection</span><span class="p">();</span><span class="nx">b</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">setData</span><span class="p">(</span><span class="s2">&quot;Text&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">setDragImage</span><span class="o">&amp;&amp;!</span><span class="nx">Ld</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">setDragImage</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">ib</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">-</span><span class="nx">b</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">2</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">Dd</span><span class="o">||</span><span class="nx">s</span><span class="p">(</span><span class="nx">a</span><span class="p">,[],</span><span class="nx">b</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">!=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="nx">b</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">!=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="nx">b</span><span class="p">),</span><span class="nx">Dd</span><span class="o">&amp;&amp;</span><span class="nx">s</span><span class="p">(</span><span class="nx">a</span><span class="p">,[]))}</span><span class="kd">function</span> <span class="nx">jb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){(</span><span class="nx">c</span><span class="o">?</span><span class="nx">b</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">:</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">-</span><span class="nx">b</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">o</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">!=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">=</span><span class="nx">b</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">!=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">=</span><span class="nx">b</span><span class="p">))}</span><span class="kd">function</span> <span class="nx">kb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">wheelDeltaX</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">wheelDeltaY</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">detail</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">axis</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">HORIZONTAL_AXIS</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">detail</span><span class="p">),</span><span class="kc">null</span><span class="o">==</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">detail</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">axis</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">VERTICAL_AXIS</span><span class="o">?</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">detail</span><span class="o">:</span><span class="kc">null</span><span class="o">==</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">wheelDelta</span><span class="p">),</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">Sd</span><span class="o">&amp;&amp;</span><span class="nx">Hd</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span><span class="nx">e</span><span class="o">!=</span><span class="nx">f</span><span class="p">;</span><span class="nx">e</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">lineObj</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">currentWheelTarget</span><span class="o">=</span><span class="nx">e</span><span class="p">;</span><span class="k">break</span><span class="p">}</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">&amp;&amp;!</span><span class="nx">Dd</span><span class="o">&amp;&amp;!</span><span class="nx">Kd</span><span class="o">&amp;&amp;</span><span class="kc">null</span><span class="o">!=</span><span class="nx">Wd</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">ib</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">+</span><span class="nx">d</span><span class="o">*</span><span class="nx">Wd</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="o">-</span><span class="nx">f</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">))),</span><span class="nx">jb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">+</span><span class="nx">c</span><span class="o">*</span><span class="nx">Wd</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollWidth</span><span class="o">-</span><span class="nx">f</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">))),</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">Bd</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="k">void</span> <span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="kc">null</span><span class="o">!=</span><span class="nx">Wd</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">d</span><span class="o">*</span><span class="nx">Wd</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">h</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">g</span><span class="o">?</span><span class="nx">h</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">h</span><span class="o">+</span><span class="nx">g</span><span class="o">-</span><span class="mi">50</span><span class="p">)</span><span class="o">:</span><span class="nx">i</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span><span class="nx">i</span><span class="o">+</span><span class="nx">g</span><span class="o">+</span><span class="mi">50</span><span class="p">),</span><span class="nx">s</span><span class="p">(</span><span class="nx">a</span><span class="p">,[],{</span><span class="nx">top</span><span class="o">:</span><span class="nx">h</span><span class="p">,</span><span class="nx">bottom</span><span class="o">:</span><span class="nx">i</span><span class="p">})}</span><span class="mi">20</span><span class="o">&gt;</span><span class="nx">Vd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">Bd</span><span class="o">?</span><span class="p">(</span><span class="nx">Bd</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">,</span><span class="nx">Cd</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span><span class="nx">zd</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nx">Ad</span><span class="o">=</span><span class="nx">d</span><span class="p">,</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">!=</span><span class="nx">Bd</span><span class="p">){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">-</span><span class="nx">Bd</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">-</span><span class="nx">Cd</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">Ad</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="o">/</span><span class="nx">Ad</span><span class="o">||</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">zd</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="o">/</span><span class="nx">zd</span><span class="p">;</span><span class="nx">Bd</span><span class="o">=</span><span class="nx">Cd</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Wd</span><span class="o">=</span><span class="p">(</span><span class="nx">Wd</span><span class="o">*</span><span class="nx">Vd</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="nx">Vd</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="o">++</span><span class="nx">Vd</span><span class="p">)}},</span><span class="mi">200</span><span class="p">))</span><span class="o">:</span><span class="p">(</span><span class="nx">zd</span><span class="o">+=</span><span class="nx">c</span><span class="p">,</span><span class="nx">Ad</span><span class="o">+=</span><span class="nx">d</span><span class="p">))}</span><span class="kd">function</span> <span class="nx">lb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">fe</span><span class="p">[</span><span class="nx">b</span><span class="p">],</span><span class="o">!</span><span class="nx">b</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">pollingFast</span><span class="o">&amp;&amp;</span><span class="nx">Z</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">pollingFast</span><span class="o">=!</span><span class="mi">1</span><span class="p">);</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">shift</span><span class="p">;</span><span class="k">try</span><span class="p">{</span><span class="nx">ab</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">suppressEdits</span><span class="o">=!</span><span class="mi">0</span><span class="p">),</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">shift</span><span class="o">=!</span><span class="mi">1</span><span class="p">),</span><span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">)}</span><span class="k">catch</span><span class="p">(</span><span class="nx">f</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="o">!=</span><span class="nx">ke</span><span class="p">)</span><span class="k">throw</span> <span class="nx">f</span><span class="p">;</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">}</span><span class="k">finally</span><span class="p">{</span><span class="nx">d</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">shift</span><span class="o">=</span><span class="nx">e</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">suppressEdits</span><span class="o">=!</span><span class="mi">1</span><span class="p">}</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">mb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">keyMaps</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">keyMap</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">extraKeys</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">extraKeys</span><span class="p">),</span><span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">nb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">function</span> <span class="nx">c</span><span class="p">(){</span><span class="nx">i</span><span class="o">=!</span><span class="mi">0</span><span class="p">}</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">Vb</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">keyMap</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">auto</span><span class="p">;</span><span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">Xd</span><span class="p">),</span><span class="nx">e</span><span class="o">&amp;&amp;!</span><span class="nx">Xb</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Xd</span><span class="o">=</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">Vb</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">keyMap</span><span class="p">)</span><span class="o">==</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">keyMap</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">call</span><span class="o">?</span><span class="nx">e</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="nx">e</span><span class="p">)},</span><span class="mi">50</span><span class="p">));</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">ve</span><span class="p">[</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;keyCode&quot;</span><span class="p">)],</span><span class="nx">g</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">Sd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Kd</span><span class="o">||</span><span class="nx">Id</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">f</span><span class="o">||</span><span class="nx">b</span><span class="p">.</span><span class="nx">altGraphKey</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;altKey&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="s2">&quot;Alt-&quot;</span><span class="o">+</span><span class="nx">f</span><span class="p">),</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="o">?</span><span class="s2">&quot;metaKey&quot;</span><span class="o">:</span><span class="s2">&quot;ctrlKey&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="s2">&quot;Ctrl-&quot;</span><span class="o">+</span><span class="nx">f</span><span class="p">),</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="o">?</span><span class="s2">&quot;ctrlKey&quot;</span><span class="o">:</span><span class="s2">&quot;metaKey&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="s2">&quot;Cmd-&quot;</span><span class="o">+</span><span class="nx">f</span><span class="p">);</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="nx">mb</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span> <span class="nx">g</span><span class="o">=</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;shiftKey&quot;</span><span class="p">)</span><span class="o">?</span><span class="nx">Wb</span><span class="p">(</span><span class="s2">&quot;Shift-&quot;</span><span class="o">+</span><span class="nx">f</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">lb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)},</span><span class="nx">c</span><span class="p">)</span><span class="o">||</span><span class="nx">Wb</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">b</span><span class="o">&amp;&amp;</span><span class="sr">/^go[A-Z]/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">?</span><span class="nx">lb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">},</span><span class="nx">c</span><span class="p">)</span><span class="o">:</span><span class="nx">Wb</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">lb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)},</span><span class="nx">c</span><span class="p">),</span><span class="nx">i</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="o">=!</span><span class="mi">1</span><span class="p">),</span><span class="nx">g</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">Gd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">oldKeyCode</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">keyCode</span><span class="o">=</span><span class="mi">0</span><span class="p">)),</span><span class="nx">g</span><span class="p">}</span><span class="kd">function</span> <span class="nx">ob</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">Wb</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="nx">c</span><span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="nx">mb</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">lb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)});</span><span class="k">return</span> <span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">)),</span><span class="nx">d</span><span class="p">}</span><span class="kd">function</span> <span class="nx">pb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">focused</span><span class="o">||</span><span class="nx">rb</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">Ed</span><span class="o">&amp;&amp;</span><span class="mi">27</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">keyCode</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">returnValue</span><span class="o">=!</span><span class="mi">1</span><span class="p">),</span><span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onKeyEvent</span><span class="o">||!</span><span class="nx">b</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onKeyEvent</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">Nc</span><span class="p">(</span><span class="nx">a</span><span class="p">))){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;keyCode&quot;</span><span class="p">);</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">shift</span><span class="o">=</span><span class="mi">16</span><span class="o">==</span><span class="nx">c</span><span class="o">||</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;shiftKey&quot;</span><span class="p">);</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">nb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="nx">Kd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Zd</span><span class="o">=</span><span class="nx">d</span><span class="o">?</span><span class="nx">c</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">d</span><span class="o">||</span><span class="mi">88</span><span class="o">!=</span><span class="nx">c</span><span class="o">||</span><span class="nx">ue</span><span class="o">||!</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">Sd</span><span class="o">?</span><span class="s2">&quot;metaKey&quot;</span><span class="o">:</span><span class="s2">&quot;ctrlKey&quot;</span><span class="p">)</span><span class="o">||</span><span class="nx">b</span><span class="p">.</span><span class="nx">replaceSelection</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">))}}</span><span class="kd">function</span> <span class="nx">qb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onKeyEvent</span><span class="o">||!</span><span class="nx">b</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">onKeyEvent</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">Nc</span><span class="p">(</span><span class="nx">a</span><span class="p">))){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;keyCode&quot;</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;charCode&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">Kd</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="o">==</span><span class="nx">Zd</span><span class="p">)</span><span class="k">return</span> <span class="nx">Zd</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="k">void</span> <span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">Kd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">which</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">which</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">)</span><span class="o">||</span><span class="nx">Md</span><span class="p">)</span><span class="o">||!</span><span class="nx">nb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">d</span><span class="o">?</span><span class="nx">c</span><span class="o">:</span><span class="nx">d</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">electricChars</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">mode</span><span class="p">.</span><span class="nx">electricChars</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">smartIndent</span><span class="o">&amp;&amp;!</span><span class="nx">ab</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">mode</span><span class="p">.</span><span class="nx">electricChars</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">V</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">Nb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="s2">&quot;smart&quot;</span><span class="p">)}),</span><span class="mi">75</span><span class="p">),</span><span class="nx">ob</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">)</span><span class="o">||</span><span class="nx">Y</span><span class="p">(</span><span class="nx">b</span><span class="p">)}}}</span><span class="kd">function</span> <span class="nx">rb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="s2">&quot;nocursor&quot;</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">readOnly</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">focused</span><span class="o">||</span><span class="p">(</span><span class="nx">Wc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;focus&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">focused</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="sr">/\bCodeMirror-focused\b/</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">className</span><span class="o">+=</span><span class="s2">&quot; CodeMirror-focused&quot;</span><span class="p">),</span><span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)),</span><span class="nx">X</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">))}</span><span class="kd">function</span> <span class="nx">sb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">focused</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Wc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;blur&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">focused</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot; CodeMirror-focused&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)),</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">blinker</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">focused</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">shift</span><span class="o">=!</span><span class="mi">1</span><span class="p">)},</span><span class="mi">150</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">tb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">function</span> <span class="nx">c</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">inputDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span><span class="o">=</span><span class="s2">&quot;relative&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span><span class="o">=</span><span class="nx">h</span><span class="p">,</span><span class="nx">Gd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="nx">g</span><span class="p">),</span><span class="nx">X</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="kc">null</span><span class="o">!=</span><span class="nx">d</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">selectionStart</span><span class="p">){</span><span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">Yd</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">zb</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;&quot;</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">prevInput</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">selectionStart</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">selectionEnd</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">Yd</span><span class="o">=</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="nx">f</span><span class="p">(){</span><span class="s2">&quot; &quot;</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">prevInput</span><span class="o">&amp;&amp;</span><span class="mi">0</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">selectionStart</span><span class="o">?</span><span class="nx">V</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">fe</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">)(</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="nx">c</span><span class="o">++&lt;</span><span class="mi">10</span><span class="o">?</span><span class="nx">Yd</span><span class="o">=</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="mi">500</span><span class="p">)</span><span class="o">:</span><span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="mi">200</span><span class="p">)}}</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">db</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="o">&amp;&amp;!</span><span class="nx">Kd</span><span class="p">){(</span><span class="nx">zb</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span><span class="o">||</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="p">)</span><span class="o">||!</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="p">))</span><span class="o">&amp;&amp;</span><span class="nx">V</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">Gb</span><span class="p">)(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">f</span><span class="p">);</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">inputDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span><span class="o">=</span><span class="s2">&quot;absolute&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span><span class="o">=</span><span class="s2">&quot;position: fixed; width: 30px; height: 30px; top: &quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">clientY</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;px; left: &quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">clientX</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);&quot;</span><span class="p">,</span><span class="nx">_</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">zb</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">prevInput</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">),</span><span class="nx">Dd</span><span class="o">?</span><span class="p">(</span><span class="nx">Qc</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">Uc</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="s2">&quot;mouseup&quot;</span><span class="p">,</span><span class="kd">function</span> <span class="nx">i</span><span class="p">(){</span><span class="nx">Vc</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="s2">&quot;mouseup&quot;</span><span class="p">,</span><span class="nx">i</span><span class="p">),</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="mi">20</span><span class="p">)}))</span><span class="o">:</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="mi">50</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">ub</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">Td</span><span class="o">&amp;&amp;</span><span class="nx">fc</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">g</span><span class="p">)</span><span class="k">return</span> <span class="nx">vb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nx">h</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">;</span><span class="o">--</span><span class="nx">h</span><span class="p">)</span><span class="nx">vb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">[</span><span class="nx">h</span><span class="p">].</span><span class="nx">from</span><span class="p">,</span><span class="nx">g</span><span class="p">[</span><span class="nx">h</span><span class="p">].</span><span class="nx">to</span><span class="p">,[</span><span class="s2">&quot;&quot;</span><span class="p">],</span><span class="nx">f</span><span class="p">);</span><span class="k">return</span> <span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="nx">vb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">from</span><span class="p">,</span><span class="nx">g</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">to</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">vb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">suppressEdits</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="p">[];</span><span class="nx">h</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">i</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">oc</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">))});</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="nx">ec</span><span class="p">(</span><span class="nx">nc</span><span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nx">nc</span><span class="p">(</span><span class="nx">ad</span><span class="p">(</span><span class="nx">i</span><span class="p">)),</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="nx">d</span><span class="p">),</span><span class="nx">m</span><span class="o">=</span><span class="nx">xb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">l</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">);</span><span class="k">return</span> <span class="nx">g</span><span class="p">.</span><span class="nx">history</span><span class="o">&amp;&amp;</span><span class="nx">Lc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">),</span><span class="nx">m</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">wb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;undo&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">done</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">undone</span><span class="p">).</span><span class="nx">pop</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="p">{</span><span class="nx">events</span><span class="o">:</span><span class="p">[],</span><span class="nx">fromBefore</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">fromAfter</span><span class="p">,</span><span class="nx">toBefore</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">toAfter</span><span class="p">,</span><span class="nx">fromAfter</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">fromBefore</span><span class="p">,</span><span class="nx">toAfter</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">toBefore</span><span class="p">},</span><span class="nx">g</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nx">g</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span><span class="nx">g</span><span class="o">-=</span><span class="mi">1</span><span class="p">){</span><span class="nx">d</span><span class="p">.</span><span class="nx">dirtyCounter</span><span class="o">+=</span><span class="s2">&quot;undo&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">?-</span><span class="mi">1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">events</span><span class="p">[</span><span class="nx">g</span><span class="p">],</span><span class="nx">i</span><span class="o">=</span><span class="p">[],</span><span class="nx">j</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">start</span><span class="o">+</span><span class="nx">h</span><span class="p">.</span><span class="nx">added</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">start</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">i</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">oc</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">))}),</span><span class="nx">f</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">start</span><span class="o">:</span><span class="nx">h</span><span class="p">.</span><span class="nx">start</span><span class="p">,</span><span class="nx">added</span><span class="o">:</span><span class="nx">h</span><span class="p">.</span><span class="nx">old</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">old</span><span class="o">:</span><span class="nx">i</span><span class="p">});</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">g</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">fromBefore</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">toBefore</span><span class="p">};</span><span class="nx">xb</span><span class="p">(</span><span class="nx">a</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">h</span><span class="p">.</span><span class="nx">start</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">},{</span><span class="nx">line</span><span class="o">:</span><span class="nx">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">j</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">},</span><span class="nx">h</span><span class="p">.</span><span class="nx">old</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">b</span><span class="p">)}(</span><span class="s2">&quot;undo&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">undone</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">done</span><span class="p">).</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">xb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">g</span><span class="p">.</span><span class="nx">suppressEdits</span><span class="p">){</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">m</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">n</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineWrapping</span><span class="o">||</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="nx">Gc</span><span class="p">(</span><span class="nx">jc</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span><span class="nx">l</span><span class="p">)),</span><span class="nx">h</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">j</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">==</span><span class="nx">g</span><span class="p">.</span><span class="nx">maxLineLength</span><span class="o">?</span><span class="p">(</span><span class="nx">n</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">}));</span><span class="kd">var</span> <span class="nx">p</span><span class="o">=</span><span class="nx">ad</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span><span class="nx">q</span><span class="o">=</span><span class="nx">R</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="o">&amp;&amp;</span><span class="mi">0</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="o">&amp;&amp;</span><span class="s2">&quot;&quot;</span><span class="o">==</span><span class="nx">mc</span><span class="p">(</span><span class="nx">p</span><span class="p">)){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="p">[],</span><span class="nx">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">t</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nx">t</span><span class="o">&gt;</span><span class="nx">s</span><span class="p">;</span><span class="o">++</span><span class="nx">s</span><span class="p">)</span><span class="nx">r</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">rc</span><span class="p">(</span><span class="nx">mc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">s</span><span class="p">]),</span><span class="nx">nc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">s</span><span class="p">]),</span><span class="nx">q</span><span class="p">));</span><span class="nx">sc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">,</span><span class="nx">m</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="nx">nc</span><span class="p">(</span><span class="nx">p</span><span class="p">)),</span><span class="nx">k</span><span class="o">&amp;&amp;</span><span class="nx">h</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">r</span><span class="p">.</span><span class="nx">length</span><span class="o">&amp;&amp;</span><span class="nx">h</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">r</span><span class="p">)}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">l</span><span class="o">==</span><span class="nx">m</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="mi">1</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="nx">sc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">l</span><span class="p">,</span><span class="nx">l</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">)</span><span class="o">+</span><span class="nx">mc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="nx">l</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="p">),</span><span class="nx">nc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span><span class="k">else</span><span class="p">{</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="p">[],</span><span class="nx">s</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nx">t</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nx">t</span><span class="o">&gt;</span><span class="nx">s</span><span class="p">;</span><span class="o">++</span><span class="nx">s</span><span class="p">)</span><span class="nx">r</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">rc</span><span class="p">(</span><span class="nx">mc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">s</span><span class="p">]),</span><span class="nx">nc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">s</span><span class="p">]),</span><span class="nx">q</span><span class="p">));</span><span class="nx">r</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">rc</span><span class="p">(</span><span class="nx">mc</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span><span class="o">+</span><span class="nx">l</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="p">),</span><span class="nx">nc</span><span class="p">(</span><span class="nx">p</span><span class="p">),</span><span class="nx">q</span><span class="p">)),</span><span class="nx">sc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">l</span><span class="p">,</span><span class="nx">l</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">)</span><span class="o">+</span><span class="nx">mc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nx">nc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span><span class="nx">h</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">r</span><span class="p">)}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="mi">1</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="nx">sc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">l</span><span class="p">,</span><span class="nx">l</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">)</span><span class="o">+</span><span class="nx">mc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="nx">m</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="p">),</span><span class="nx">nc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span><span class="nx">h</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="p">[];</span><span class="nx">sc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">l</span><span class="p">,</span><span class="nx">l</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">)</span><span class="o">+</span><span class="nx">mc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nx">nc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span><span class="nx">sc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">,</span><span class="nx">mc</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span><span class="o">+</span><span class="nx">m</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="p">),</span><span class="nx">nc</span><span class="p">(</span><span class="nx">p</span><span class="p">));</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">s</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nx">t</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nx">t</span><span class="o">&gt;</span><span class="nx">s</span><span class="p">;</span><span class="o">++</span><span class="nx">s</span><span class="p">)</span><span class="nx">r</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">rc</span><span class="p">(</span><span class="nx">mc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">s</span><span class="p">]),</span><span class="nx">nc</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">s</span><span class="p">]),</span><span class="nx">q</span><span class="p">));</span><span class="nx">k</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nx">h</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">k</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">h</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">r</span><span class="p">)}</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineWrapping</span><span class="p">){</span><span class="kd">var</span> <span class="nx">u</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">/</span><span class="nx">S</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">-</span><span class="mi">3</span><span class="p">);</span><span class="nx">h</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">height</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="nx">u</span><span class="p">)</span><span class="o">||</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="nx">q</span><span class="p">;</span><span class="nx">b</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">height</span><span class="o">&amp;&amp;</span><span class="nx">Fc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)}})}</span><span class="k">else</span> <span class="nx">h</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">j</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="nx">b</span><span class="o">&gt;</span><span class="nx">g</span><span class="p">.</span><span class="nx">maxLineLength</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">maxLine</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">maxLineLength</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">maxLineChanged</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">n</span><span class="o">=!</span><span class="mi">1</span><span class="p">)}),</span><span class="nx">n</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">updateMaxLine</span><span class="o">=!</span><span class="mi">0</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">frontier</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">frontier</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">C</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="mi">400</span><span class="p">);</span><span class="kd">var</span> <span class="nx">v</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">k</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">W</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">v</span><span class="p">),</span><span class="nx">Yc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;change&quot;</span><span class="p">)){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">s</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">s</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">s</span><span class="p">)</span><span class="s2">&quot;string&quot;</span><span class="o">!=</span><span class="k">typeof</span> <span class="nx">d</span><span class="p">[</span><span class="nx">s</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">s</span><span class="p">]</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">s</span><span class="p">].</span><span class="nx">text</span><span class="p">);</span><span class="kd">var</span> <span class="nx">w</span><span class="o">=</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">text</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="nx">origin</span><span class="o">:</span><span class="nx">f</span><span class="p">};</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">textChanged</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">x</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">textChanged</span><span class="p">;</span><span class="nx">x</span><span class="p">.</span><span class="nx">next</span><span class="p">;</span><span class="nx">x</span><span class="o">=</span><span class="nx">x</span><span class="p">.</span><span class="nx">next</span><span class="p">);</span><span class="nx">x</span><span class="p">.</span><span class="nx">next</span><span class="o">=</span><span class="nx">w</span><span class="p">}</span><span class="k">else</span> <span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">textChanged</span><span class="o">=</span><span class="nx">w</span><span class="p">}</span><span class="kd">var</span> <span class="nx">y</span><span class="p">,</span><span class="nx">z</span><span class="p">,</span><span class="nx">A</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">mc</span><span class="p">(</span><span class="nx">p</span><span class="p">).</span><span class="nx">length</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">)};</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="s2">&quot;string&quot;</span><span class="o">!=</span><span class="k">typeof</span> <span class="nx">e</span><span class="p">)</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">?</span><span class="p">(</span><span class="nx">y</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">z</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span><span class="o">:</span><span class="nx">y</span><span class="o">=</span><span class="nx">z</span><span class="o">=</span><span class="nx">e</span><span class="p">;</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="o">==</span><span class="nx">e</span><span class="p">)</span><span class="nx">y</span><span class="o">=</span><span class="nx">z</span><span class="o">=</span><span class="nx">A</span><span class="p">;</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="o">==</span><span class="nx">e</span><span class="p">)</span><span class="nx">y</span><span class="o">=</span><span class="nx">z</span><span class="o">=</span><span class="nx">b</span><span class="p">;</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s2">&quot;around&quot;</span><span class="o">==</span><span class="nx">e</span><span class="p">)</span><span class="nx">y</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">z</span><span class="o">=</span><span class="nx">A</span><span class="p">;</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">B</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">))</span><span class="k">return</span> <span class="nx">a</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">))</span><span class="k">return</span> <span class="nx">A</span><span class="p">;</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="nx">v</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">ch</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">+=</span><span class="nx">mc</span><span class="p">(</span><span class="nx">p</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="o">-</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">))),{</span><span class="nx">line</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">e</span><span class="p">}};</span><span class="nx">y</span><span class="o">=</span><span class="nx">B</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">from</span><span class="p">),</span><span class="nx">z</span><span class="o">=</span><span class="nx">B</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">)}</span><span class="k">return</span> <span class="nx">Gb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">z</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">A</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">yb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">),</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">f</span><span class="p">}</span><span class="k">return</span> <span class="nx">ub</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">se</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="kc">null</span><span class="p">,</span><span class="nx">e</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">zb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">ch</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Ab</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">ch</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Bb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">ch</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">Cb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">size</span><span class="o">-</span><span class="mi">1</span><span class="p">))}</span><span class="kd">function</span> <span class="nx">Db</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">};</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">&gt;=</span><span class="nx">a</span><span class="p">.</span><span class="nx">size</span><span class="p">)</span><span class="k">return</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">size</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">size</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">};</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">).</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="k">return</span> <span class="kc">null</span><span class="o">==</span><span class="nx">c</span><span class="o">||</span><span class="nx">c</span><span class="o">&gt;</span><span class="nx">d</span><span class="o">?</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">d</span><span class="p">}</span><span class="o">:</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">c</span><span class="o">?</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Eb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="o">&gt;=</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">size</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Fb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">shift</span><span class="o">||</span><span class="nx">e</span><span class="p">.</span><span class="nx">extend</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">anchor</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">);</span><span class="nx">g</span><span class="o">!=</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">f</span><span class="p">)</span><span class="o">?</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="nx">c</span><span class="p">)</span><span class="o">:</span><span class="nx">g</span><span class="o">!=</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">c</span><span class="p">)}</span><span class="nx">Gb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">)}</span><span class="k">else</span> <span class="nx">Gb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="o">||</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">userSelChange</span><span class="o">=!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Gb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">goalColumn</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">;</span><span class="k">if</span><span class="p">((</span><span class="nx">e</span><span class="o">||!</span><span class="nx">zb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">anchor</span><span class="p">))</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">Ib</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="s2">&quot;push&quot;</span><span class="o">!=</span><span class="nx">e</span><span class="p">)),(</span><span class="nx">e</span><span class="o">||!</span><span class="nx">zb</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">head</span><span class="p">))</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">Ib</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="s2">&quot;push&quot;</span><span class="o">!=</span><span class="nx">e</span><span class="p">)),</span><span class="o">!</span><span class="nx">zb</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">anchor</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span><span class="o">||!</span><span class="nx">zb</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">head</span><span class="p">,</span><span class="nx">c</span><span class="p">)){</span><span class="nx">f</span><span class="p">.</span><span class="nx">anchor</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">head</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">=</span><span class="nx">g</span><span class="o">?</span><span class="nx">c</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="o">=</span><span class="nx">g</span><span class="o">?</span><span class="nx">b</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">updateInput</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">selectionChanged</span><span class="o">=!</span><span class="mi">0</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">Hb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">Gb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;push&quot;</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">Ib</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">f</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">c</span><span class="o">||</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">cantEdit</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="o">:</span><span class="k">for</span><span class="p">(;;){</span><span class="kd">var</span> <span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">line</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">k</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">k</span><span class="p">){</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="nx">j</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">[</span><span class="nx">k</span><span class="p">],</span><span class="nx">m</span><span class="o">=</span><span class="nx">l</span><span class="p">.</span><span class="nx">marker</span><span class="p">;</span><span class="k">if</span><span class="p">((</span><span class="kc">null</span><span class="o">==</span><span class="nx">l</span><span class="p">.</span><span class="nx">from</span><span class="o">||</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">inclusiveLeft</span><span class="o">?</span><span class="nx">l</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;=</span><span class="nx">g</span><span class="p">.</span><span class="nx">ch</span><span class="o">:</span><span class="nx">l</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;</span><span class="nx">g</span><span class="p">.</span><span class="nx">ch</span><span class="p">))</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">l</span><span class="p">.</span><span class="nx">to</span><span class="o">||</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">inclusiveRight</span><span class="o">?</span><span class="nx">l</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;=</span><span class="nx">g</span><span class="p">.</span><span class="nx">ch</span><span class="o">:</span><span class="nx">l</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;</span><span class="nx">g</span><span class="p">.</span><span class="nx">ch</span><span class="p">))){</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">m</span><span class="p">.</span><span class="nx">clearOnEnter</span><span class="p">){(</span><span class="nx">i</span><span class="o">||</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="p">[])).</span><span class="nx">push</span><span class="p">(</span><span class="nx">m</span><span class="p">);</span><span class="k">continue</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">m</span><span class="p">.</span><span class="nx">atomic</span><span class="p">)</span><span class="k">continue</span><span class="p">;</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="nx">m</span><span class="p">.</span><span class="nx">find</span><span class="p">()[</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">h</span><span class="o">?</span><span class="s2">&quot;from&quot;</span><span class="o">:</span><span class="s2">&quot;to&quot;</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">zb</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">g</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">ch</span><span class="o">+=</span><span class="nx">h</span><span class="p">,</span><span class="nx">n</span><span class="p">.</span><span class="nx">ch</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">?</span><span class="nx">n</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">line</span><span class="o">?</span><span class="nx">Db</span><span class="p">(</span><span class="nx">e</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">n</span><span class="p">.</span><span class="nx">line</span><span class="o">-</span><span class="mi">1</span><span class="p">})</span><span class="o">:</span><span class="kc">null</span><span class="o">:</span><span class="nx">n</span><span class="p">.</span><span class="nx">ch</span><span class="o">&gt;</span><span class="nx">j</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">line</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">size</span><span class="o">-</span><span class="mi">1</span><span class="o">?</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">n</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="kc">null</span><span class="p">),</span><span class="o">!</span><span class="nx">n</span><span class="p">)){</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="o">?</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">cantEdit</span><span class="o">=!</span><span class="mi">0</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">})</span><span class="o">:</span><span class="nx">Ib</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">);</span><span class="nx">f</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="o">=-</span><span class="nx">h</span><span class="p">}</span><span class="nx">g</span><span class="o">=</span><span class="nx">n</span><span class="p">;</span><span class="k">continue</span> <span class="nx">a</span><span class="p">}}</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">k</span><span class="o">&lt;</span><span class="nx">i</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">k</span><span class="p">)</span><span class="nx">i</span><span class="p">[</span><span class="nx">k</span><span class="p">].</span><span class="nx">clear</span><span class="p">()}</span><span class="k">return</span> <span class="nx">g</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">Jb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">Kb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">head</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">focused</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">sizer</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">(),</span><span class="nx">f</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="o">+</span><span class="nx">e</span><span class="p">.</span><span class="nx">top</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">?</span><span class="nx">f</span><span class="o">=!</span><span class="mi">0</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">bottom</span><span class="o">+</span><span class="nx">e</span><span class="p">.</span><span class="nx">top</span><span class="o">&gt;</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="o">||</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">=!</span><span class="mi">1</span><span class="p">),</span><span class="kc">null</span><span class="o">!=</span><span class="nx">f</span><span class="o">&amp;&amp;!</span><span class="nx">Pd</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span><span class="nx">g</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">left</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">top</span><span class="o">-</span><span class="nx">d</span><span class="p">.</span><span class="nx">viewOffset</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">scrollIntoView</span><span class="p">(</span><span class="nx">f</span><span class="p">),</span><span class="nx">g</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">)}}}</span><span class="kd">function</span> <span class="nx">Kb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(;;){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">O</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">Mb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">bottom</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">!=</span><span class="nx">e</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">ib</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">),</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">-</span><span class="nx">f</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=!</span><span class="mi">0</span><span class="p">)),</span><span class="kc">null</span><span class="o">!=</span><span class="nx">e</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">jb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">),</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">-</span><span class="nx">g</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=!</span><span class="mi">0</span><span class="p">)),</span><span class="o">!</span><span class="nx">c</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">Lb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">Mb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">);</span><span class="kc">null</span><span class="o">!=</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">&amp;&amp;</span><span class="nx">ib</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">),</span><span class="kc">null</span><span class="o">!=</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">&amp;&amp;</span><span class="nx">jb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">Mb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">G</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span><span class="nx">c</span><span class="o">+=</span><span class="nx">g</span><span class="p">,</span><span class="nx">e</span><span class="o">+=</span><span class="nx">g</span><span class="p">;</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">clientHeight</span><span class="o">-</span><span class="nx">je</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="p">{},</span><span class="nx">k</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">height</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="nx">g</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="nx">g</span><span class="o">+</span><span class="mi">10</span><span class="o">&gt;</span><span class="nx">c</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="nx">e</span><span class="o">+</span><span class="nx">g</span><span class="o">&gt;</span><span class="nx">k</span><span class="o">-</span><span class="mi">10</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">c</span><span class="o">?</span><span class="nx">j</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="nx">l</span><span class="o">?</span><span class="mi">0</span><span class="o">:</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span><span class="o">:</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">i</span><span class="o">+</span><span class="nx">h</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="p">(</span><span class="nx">m</span><span class="o">?</span><span class="nx">k</span><span class="o">:</span><span class="nx">e</span><span class="p">)</span><span class="o">-</span><span class="nx">h</span><span class="p">);</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">-</span><span class="nx">je</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">;</span><span class="nx">b</span><span class="o">+=</span><span class="nx">f</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="nx">d</span><span class="o">+=</span><span class="nx">f</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">;</span><span class="kd">var</span> <span class="nx">p</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">gutters</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="nx">q</span><span class="o">=</span><span class="nx">p</span><span class="o">+</span><span class="mi">10</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">;</span><span class="k">return</span> <span class="nx">o</span><span class="o">+</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">b</span><span class="o">||</span><span class="nx">q</span><span class="o">?</span><span class="p">(</span><span class="nx">q</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span><span class="nx">j</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="nx">p</span><span class="p">))</span><span class="o">:</span><span class="nx">d</span><span class="o">&gt;</span><span class="nx">n</span><span class="o">+</span><span class="nx">o</span><span class="o">-</span><span class="mi">3</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">=</span><span class="nx">d</span><span class="o">+</span><span class="mi">10</span><span class="o">-</span><span class="nx">n</span><span class="p">),</span><span class="nx">j</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Nb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="s2">&quot;add&quot;</span><span class="p">),</span><span class="s2">&quot;smart&quot;</span><span class="o">==</span><span class="nx">c</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">mode</span><span class="p">.</span><span class="nx">indent</span><span class="p">)</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">F</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">else</span> <span class="nx">c</span><span class="o">=</span><span class="s2">&quot;prev&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">tabSize</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">j</span><span class="o">=</span><span class="nx">$c</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">h</span><span class="p">),</span><span class="nx">k</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^\s*/</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;smart&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">mode</span><span class="p">.</span><span class="nx">indent</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span><span class="nx">i</span><span class="p">.</span><span class="nx">text</span><span class="p">),</span><span class="nx">g</span><span class="o">==</span><span class="nx">ke</span><span class="p">)){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">)</span><span class="k">return</span><span class="p">;</span><span class="nx">c</span><span class="o">=</span><span class="s2">&quot;prev&quot;</span><span class="p">}</span><span class="s2">&quot;prev&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">?</span><span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="o">?</span><span class="nx">$c</span><span class="p">(</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">text</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">h</span><span class="p">)</span><span class="o">:</span><span class="mi">0</span><span class="o">:</span><span class="s2">&quot;add&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">?</span><span class="nx">g</span><span class="o">=</span><span class="nx">j</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">indentUnit</span><span class="o">:</span><span class="s2">&quot;subtract&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="nx">j</span><span class="o">-</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">indentUnit</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="p">);</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">indentWithTabs</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">g</span><span class="o">/</span><span class="nx">h</span><span class="p">);</span><span class="nx">n</span><span class="p">;</span><span class="o">--</span><span class="nx">n</span><span class="p">)</span><span class="nx">m</span><span class="o">+=</span><span class="nx">h</span><span class="p">,</span><span class="nx">l</span><span class="o">+=</span><span class="s2">&quot;  &quot;</span><span class="p">;</span><span class="nx">g</span><span class="o">&gt;</span><span class="nx">m</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">l</span><span class="o">+=</span><span class="nx">_c</span><span class="p">(</span><span class="nx">g</span><span class="o">-</span><span class="nx">m</span><span class="p">)),</span><span class="nx">l</span><span class="o">!=</span><span class="nx">k</span><span class="o">&amp;&amp;</span><span class="nx">yb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">l</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">},{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">k</span><span class="p">.</span><span class="nx">length</span><span class="p">},</span><span class="s2">&quot;input&quot;</span><span class="p">),</span><span class="nx">i</span><span class="p">.</span><span class="nx">stateAfter</span><span class="o">=</span><span class="kc">null</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Ob</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="k">return</span><span class="s2">&quot;number&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">b</span><span class="o">?</span><span class="nx">e</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">Cb</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">b</span><span class="p">))</span><span class="o">:</span><span class="nx">d</span><span class="o">=</span><span class="nx">Gc</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="kc">null</span><span class="o">==</span><span class="nx">d</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="nx">c</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">d</span><span class="p">)</span><span class="o">?</span><span class="p">(</span><span class="nx">W</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">d</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="nx">e</span><span class="p">)</span><span class="o">:</span><span class="kc">null</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Pb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">function</span> <span class="nx">e</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">i</span><span class="o">+</span><span class="nx">b</span><span class="p">;</span><span class="k">return</span> <span class="mi">0</span><span class="o">&gt;</span><span class="nx">a</span><span class="o">||</span><span class="nx">a</span><span class="o">==</span><span class="nx">g</span><span class="p">.</span><span class="nx">size</span><span class="o">?!</span><span class="mi">1</span><span class="o">:</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span><span class="nx">a</span><span class="p">))}</span><span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">(</span><span class="nx">d</span><span class="o">?</span><span class="nx">ud</span><span class="o">:</span><span class="nx">vd</span><span class="p">)(</span><span class="nx">k</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">c</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">||!</span><span class="nx">e</span><span class="p">())</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="nx">j</span><span class="o">=</span><span class="nx">d</span><span class="o">?</span><span class="p">(</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">b</span><span class="o">?</span><span class="nx">rd</span><span class="o">:</span><span class="nx">qd</span><span class="p">)(</span><span class="nx">k</span><span class="p">)</span><span class="o">:</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">b</span><span class="o">?</span><span class="nx">k</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">:</span><span class="mi">0</span><span class="p">}</span><span class="k">else</span> <span class="nx">j</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">}</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">head</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span><span class="nx">i</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;char&quot;</span><span class="o">==</span><span class="nx">c</span><span class="p">)</span><span class="nx">f</span><span class="p">();</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s2">&quot;column&quot;</span><span class="o">==</span><span class="nx">c</span><span class="p">)</span><span class="nx">f</span><span class="p">(</span><span class="o">!</span><span class="mi">0</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s2">&quot;word&quot;</span><span class="o">==</span><span class="nx">c</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="o">!</span><span class="p">(</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">)</span><span class="o">||</span><span class="nx">f</span><span class="p">();){</span><span class="k">if</span><span class="p">(</span><span class="nx">fd</span><span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">j</span><span class="p">)))</span><span class="nx">l</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">l</span><span class="p">){</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nx">f</span><span class="p">());</span><span class="k">break</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;!</span><span class="nx">f</span><span class="p">())</span><span class="k">break</span><span class="p">}</span><span class="k">return</span> <span class="nx">Ib</span><span class="p">(</span><span class="nx">a</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">i</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">j</span><span class="p">},</span><span class="nx">b</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">Qb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">b</span><span class="p">.</span><span class="nx">after</span><span class="o">===!</span><span class="mi">1</span><span class="o">||</span><span class="nx">d</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">?--</span><span class="nx">c</span><span class="o">:++</span><span class="nx">d</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="nx">fd</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">?</span><span class="nx">fd</span><span class="o">:</span><span class="sr">/\s/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="o">?</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="sr">/\s/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)}</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="sr">/\s/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;!</span><span class="nx">fd</span><span class="p">(</span><span class="nx">a</span><span class="p">)};</span><span class="nx">c</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">c</span><span class="o">-</span><span class="mi">1</span><span class="p">));)</span><span class="o">--</span><span class="nx">c</span><span class="p">;</span><span class="k">for</span><span class="p">(;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">d</span><span class="p">));)</span><span class="o">++</span><span class="nx">d</span><span class="p">}</span><span class="k">return</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">c</span><span class="p">},</span><span class="nx">to</span><span class="o">:</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">d</span><span class="p">}}}</span><span class="kd">function</span> <span class="nx">Rb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">Fb</span><span class="p">(</span><span class="nx">a</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">},</span><span class="nx">Db</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">}))}</span><span class="kd">function</span> <span class="nx">Sb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">defaults</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">$d</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="o">?</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">c</span><span class="o">!=</span><span class="nx">ae</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">)}</span><span class="o">:</span><span class="nx">d</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">Tb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">===!</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span> <span class="nx">b</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">copyState</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">copyState</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">{};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span> <span class="k">in</span> <span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">];</span><span class="nx">e</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">concat</span><span class="p">([])),</span><span class="nx">c</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="p">}</span><span class="k">return</span> <span class="nx">c</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Ub</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">startState</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">startState</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Vb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">?</span><span class="nx">ge</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">:</span><span class="nx">a</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Wb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">function</span> <span class="nx">e</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">b</span><span class="o">=</span><span class="nx">Vb</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="o">===!</span><span class="mi">1</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">(),</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">!=</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">(</span><span class="nx">f</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">nofallthrough</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">(),</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">fallthrough</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">g</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;[object Array]&quot;</span><span class="o">!=</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">g</span><span class="p">))</span><span class="k">return</span> <span class="nx">e</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">h</span><span class="p">;</span><span class="o">++</span><span class="nx">h</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">(</span><span class="nx">g</span><span class="p">[</span><span class="nx">h</span><span class="p">]))</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">f</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">f</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">f</span><span class="p">]))</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Xb</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">ve</span><span class="p">[</span><span class="nx">Tc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;keyCode&quot;</span><span class="p">)];</span><span class="k">return</span><span class="s2">&quot;Ctrl&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">||</span><span class="s2">&quot;Alt&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">||</span><span class="s2">&quot;Shift&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">||</span><span class="s2">&quot;Mod&quot;</span><span class="o">==</span><span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Yb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">tabSize</span><span class="o">=</span><span class="nx">b</span><span class="o">||</span><span class="mi">8</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Zb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="o">=</span><span class="p">[],</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="o">=</span><span class="nx">a</span><span class="p">}</span><span class="kd">function</span> <span class="nx">$b</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="k">new</span> <span class="nx">Zb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;range&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">&amp;&amp;!</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">))</span><span class="k">return</span> <span class="nx">g</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">h</span> <span class="k">in</span> <span class="nx">d</span><span class="p">)</span><span class="nx">d</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">h</span><span class="p">]);</span><span class="nx">g</span><span class="p">.</span><span class="nx">replacedWith</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">collapsed</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">replacedWith</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,[</span><span class="nx">g</span><span class="p">.</span><span class="nx">replacedWith</span><span class="p">],</span><span class="s2">&quot;CodeMirror-widget&quot;</span><span class="p">)),</span><span class="nx">g</span><span class="p">.</span><span class="nx">collapsed</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Ud</span><span class="o">=!</span><span class="mi">0</span><span class="p">);</span><span class="kd">var</span> <span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">marker</span><span class="o">:</span><span class="nx">g</span><span class="p">};</span><span class="nx">l</span><span class="o">+=</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">k</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">from</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="nx">l</span><span class="o">-=</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">),</span><span class="nx">k</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">to</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="nx">l</span><span class="o">-=</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="p">),</span><span class="nx">g</span><span class="p">.</span><span class="nx">collapsed</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">k</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">j</span><span class="o">=</span><span class="nx">gc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="p">)),</span><span class="nx">k</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">?</span><span class="nx">i</span><span class="o">=</span><span class="nx">gc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">)</span><span class="o">:</span><span class="nx">Fc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span><span class="nx">bc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">),</span><span class="nx">g</span><span class="p">.</span><span class="nx">collapsed</span><span class="o">&amp;&amp;</span><span class="nx">k</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">&amp;&amp;</span><span class="nx">kc</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">Fc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="o">++</span><span class="nx">k</span><span class="p">}),</span><span class="nx">g</span><span class="p">.</span><span class="nx">readOnly</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Td</span><span class="o">=!</span><span class="mi">0</span><span class="p">,(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">length</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">undone</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">clearHistory</span><span class="p">()),</span><span class="nx">g</span><span class="p">.</span><span class="nx">collapsed</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="nx">j</span><span class="p">)</span><span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Inserting collapsed marker overlapping an existing one&quot;</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">size</span><span class="o">=</span><span class="nx">l</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">atomic</span><span class="o">=!</span><span class="mi">0</span><span class="p">}</span><span class="k">return</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">className</span><span class="o">||</span><span class="nx">g</span><span class="p">.</span><span class="nx">startStyle</span><span class="o">||</span><span class="nx">g</span><span class="p">.</span><span class="nx">endStyle</span><span class="o">||</span><span class="nx">g</span><span class="p">.</span><span class="nx">collapsed</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">W</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="nx">g</span><span class="p">.</span><span class="nx">atomic</span><span class="o">&amp;&amp;</span><span class="nx">Hb</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">g</span><span class="p">}</span><span class="kd">function</span> <span class="nx">_b</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">marker</span><span class="o">==</span><span class="nx">b</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">ac</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">!=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="p">[])).</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]);</span><span class="k">return</span> <span class="nx">c</span><span class="p">}</span><span class="kd">function</span> <span class="nx">bc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">.</span><span class="nx">concat</span><span class="p">([</span><span class="nx">b</span><span class="p">])</span><span class="o">:</span><span class="p">[</span><span class="nx">b</span><span class="p">],</span><span class="nx">b</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">cc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">marker</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="kc">null</span><span class="o">==</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">||</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">inclusiveLeft</span><span class="o">?</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;=</span><span class="nx">b</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="o">||</span><span class="s2">&quot;bookmark&quot;</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">type</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">==</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="kc">null</span><span class="o">==</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="o">||</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">inclusiveRight</span><span class="o">?</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;=</span><span class="nx">b</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">);(</span><span class="nx">c</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="p">[])).</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">h</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">marker</span><span class="o">:</span><span class="nx">f</span><span class="p">})}}</span><span class="k">return</span> <span class="nx">c</span><span class="p">}</span><span class="kd">function</span> <span class="nx">dc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span><span class="nx">g</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">marker</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="kc">null</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="o">||</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">inclusiveRight</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;=</span><span class="nx">c</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;</span><span class="nx">c</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="o">||</span><span class="s2">&quot;bookmark&quot;</span><span class="o">==</span><span class="nx">g</span><span class="p">.</span><span class="nx">type</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">!=</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="kc">null</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">||</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">inclusiveLeft</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;=</span><span class="nx">c</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">);(</span><span class="nx">d</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="p">[])).</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="nx">i</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">-</span><span class="nx">c</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="kc">null</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="o">-</span><span class="nx">c</span><span class="p">,</span><span class="nx">marker</span><span class="o">:</span><span class="nx">g</span><span class="p">})}}</span><span class="k">return</span> <span class="nx">d</span><span class="p">}</span><span class="kd">function</span> <span class="nx">ec</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="o">&amp;&amp;!</span><span class="nx">b</span><span class="p">)</span><span class="k">return</span> <span class="nx">e</span><span class="p">;</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">cc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="nx">dc</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">),</span><span class="nx">h</span><span class="o">=</span><span class="mi">1</span><span class="o">==</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">ad</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">length</span><span class="o">+</span><span class="p">(</span><span class="nx">h</span><span class="o">?</span><span class="nx">c</span><span class="o">:</span><span class="mi">0</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">j</span><span class="o">&lt;</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">j</span><span class="p">){</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">f</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">k</span><span class="p">.</span><span class="nx">to</span><span class="p">){</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="nx">_b</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span><span class="nx">k</span><span class="p">.</span><span class="nx">marker</span><span class="p">);</span><span class="nx">l</span><span class="o">?</span><span class="nx">h</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">to</span><span class="o">=</span><span class="kc">null</span><span class="o">==</span><span class="nx">l</span><span class="p">.</span><span class="nx">to</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="nx">l</span><span class="p">.</span><span class="nx">to</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span><span class="o">:</span><span class="nx">k</span><span class="p">.</span><span class="nx">to</span><span class="o">=</span><span class="nx">c</span><span class="p">}}</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">j</span><span class="o">&lt;</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">j</span><span class="p">){</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">g</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">!=</span><span class="nx">k</span><span class="p">.</span><span class="nx">to</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">to</span><span class="o">+=</span><span class="nx">i</span><span class="p">),</span><span class="kc">null</span><span class="o">==</span><span class="nx">k</span><span class="p">.</span><span class="nx">from</span><span class="p">){</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="nx">_b</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">k</span><span class="p">.</span><span class="nx">marker</span><span class="p">);</span><span class="nx">l</span><span class="o">||</span><span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">from</span><span class="o">=</span><span class="nx">i</span><span class="p">,</span><span class="nx">h</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">||</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="p">[])).</span><span class="nx">push</span><span class="p">(</span><span class="nx">k</span><span class="p">))}</span><span class="k">else</span> <span class="nx">k</span><span class="p">.</span><span class="nx">from</span><span class="o">+=</span><span class="nx">i</span><span class="p">,</span><span class="nx">h</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">||</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="p">[])).</span><span class="nx">push</span><span class="p">(</span><span class="nx">k</span><span class="p">)}</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="p">[</span><span class="nx">oc</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nx">f</span><span class="p">)];</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">h</span><span class="p">){</span><span class="kd">var</span> <span class="nx">n</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">o</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">j</span><span class="o">&lt;</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">j</span><span class="p">)</span><span class="kc">null</span><span class="o">==</span><span class="nx">f</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">to</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="o">||</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="p">[])).</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">marker</span><span class="o">:</span><span class="nx">f</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">marker</span><span class="p">});</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">o</span><span class="o">&gt;</span><span class="nx">j</span><span class="p">;</span><span class="o">++</span><span class="nx">j</span><span class="p">)</span><span class="nx">m</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">oc</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">j</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="nx">n</span><span class="p">));</span><span class="nx">m</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">oc</span><span class="p">(</span><span class="nx">ad</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span><span class="nx">g</span><span class="p">))}</span><span class="k">return</span> <span class="nx">m</span><span class="p">}</span><span class="kd">function</span> <span class="nx">fc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">[</span><span class="nx">b</span><span class="p">].</span><span class="nx">marker</span><span class="p">;</span><span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">readOnly</span><span class="o">||</span><span class="nx">d</span><span class="o">&amp;&amp;-</span><span class="mi">1</span><span class="o">!=</span><span class="nx">cd</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="p">[])).</span><span class="nx">push</span><span class="p">(</span><span class="nx">c</span><span class="p">)}}),</span><span class="o">!</span><span class="nx">d</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="p">[{</span><span class="nx">from</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">c</span><span class="p">}],</span><span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">f</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">f</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">f</span><span class="p">].</span><span class="nx">find</span><span class="p">(),</span><span class="nx">h</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">h</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">h</span><span class="p">){</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="nx">h</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span><span class="o">&amp;&amp;!</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="p">[</span><span class="nx">h</span><span class="p">,</span><span class="mi">1</span><span class="p">];</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">from</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">j</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">g</span><span class="p">.</span><span class="nx">from</span><span class="p">}),</span><span class="nx">Ab</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">j</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="nx">g</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">to</span><span class="p">}),</span><span class="nx">e</span><span class="p">.</span><span class="nx">splice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">j</span><span class="p">),</span><span class="nx">h</span><span class="o">+=</span><span class="nx">j</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">}}</span><span class="k">return</span> <span class="nx">e</span><span class="p">}</span><span class="kd">function</span> <span class="nx">gc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">Ud</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">f</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">f</span><span class="p">)</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">f</span><span class="p">],</span><span class="nx">e</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">collapsed</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">||</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="o">||</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="o">!</span><span class="nx">c</span><span class="o">||</span><span class="nx">c</span><span class="p">.</span><span class="nx">width</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">marker</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="p">}</span><span class="kd">function</span> <span class="nx">hc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">gc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">ic</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">gc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">+</span><span class="mi">1</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">jc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">;</span><span class="nx">c</span><span class="o">=</span><span class="nx">hc</span><span class="p">(</span><span class="nx">b</span><span class="p">);)</span><span class="nx">b</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">kc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">Ud</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">c</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">collapsed</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">from</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">from</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">inclusiveLeft</span><span class="o">&amp;&amp;</span><span class="nx">lc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">lc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">to</span><span class="o">||</span><span class="nx">b</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">inclusiveRight</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">to</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">c</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">collapsed</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">from</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">to</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">inclusiveLeft</span><span class="o">||</span><span class="nx">b</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">inclusiveRight</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">lc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">mc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">?</span><span class="nx">a</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span><span class="kd">function</span> <span class="nx">nc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">)</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">].</span><span class="nx">marker</span><span class="p">.</span><span class="nx">explicitlyCleared</span><span class="o">?</span><span class="nx">c</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="p">))</span><span class="o">:</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">]);</span><span class="k">return</span> <span class="nx">c</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="nx">c</span><span class="o">:</span><span class="kc">null</span><span class="o">:</span><span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">oc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="o">?</span><span class="p">{</span><span class="nx">text</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">markedSpans</span><span class="o">:</span><span class="nx">b</span><span class="p">}</span><span class="o">:</span><span class="nx">a</span><span class="p">}</span><span class="kd">function</span> <span class="nx">pc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">].</span><span class="nx">marker</span><span class="p">.</span><span class="nx">lines</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">cd</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="nx">d</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="mi">1</span><span class="p">)}</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="o">=</span><span class="kc">null</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">qc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">)</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">].</span><span class="nx">marker</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="o">=</span><span class="nx">b</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">rc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="p">{</span><span class="nx">text</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">height</span><span class="o">:</span><span class="nx">c</span><span class="p">};</span><span class="k">return</span> <span class="nx">qc</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">kc</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span><span class="nx">d</span><span class="p">}</span><span class="kd">function</span> <span class="nx">sc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">stateAfter</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">styles</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="o">!=</span><span class="nx">b</span><span class="p">.</span><span class="nx">order</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">order</span><span class="o">=</span><span class="kc">null</span><span class="p">),</span><span class="nx">pc</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">qc</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">),</span><span class="nx">kc</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="mi">0</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">height</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">R</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">)),</span><span class="nx">Xc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;change&quot;</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">tc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">parent</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">pc</span><span class="p">(</span><span class="nx">a</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">uc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">flattenSpans</span><span class="p">,</span><span class="nx">f</span><span class="o">=!</span><span class="nx">b</span><span class="p">.</span><span class="nx">styles</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="k">new</span> <span class="nx">Yb</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">tabSize</span><span class="p">),</span><span class="nx">k</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">styles</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">styles</span><span class="o">=</span><span class="p">[]);</span><span class="k">for</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">blankLine</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">blankLine</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="o">!</span><span class="nx">j</span><span class="p">.</span><span class="nx">eol</span><span class="p">();){</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">token</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">m</span><span class="o">=</span><span class="nx">j</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">start</span><span class="o">=</span><span class="nx">j</span><span class="p">.</span><span class="nx">pos</span><span class="p">,</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="nx">i</span><span class="o">==</span><span class="nx">l</span><span class="o">?</span><span class="nx">h</span><span class="o">+=</span><span class="nx">m</span><span class="o">:</span><span class="p">(</span><span class="nx">h</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="nx">f</span><span class="o">||</span><span class="nx">g</span><span class="o">&gt;=</span><span class="nx">k</span><span class="p">.</span><span class="nx">length</span><span class="o">||</span><span class="nx">h</span><span class="o">!=</span><span class="nx">k</span><span class="p">[</span><span class="nx">g</span><span class="p">]</span><span class="o">||</span><span class="nx">i</span><span class="o">!=</span><span class="nx">k</span><span class="p">[</span><span class="nx">g</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="nx">k</span><span class="p">[</span><span class="nx">g</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="nx">h</span><span class="p">,</span><span class="nx">k</span><span class="p">[</span><span class="nx">g</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">),</span><span class="nx">h</span><span class="o">=</span><span class="nx">m</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">l</span><span class="p">),</span><span class="nx">j</span><span class="p">.</span><span class="nx">pos</span><span class="o">&gt;</span><span class="mi">5</span><span class="nx">e3</span><span class="p">)</span><span class="k">break</span><span class="p">}</span><span class="k">return</span> <span class="nx">h</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="nx">f</span><span class="o">||</span><span class="nx">g</span><span class="o">&gt;=</span><span class="nx">k</span><span class="p">.</span><span class="nx">length</span><span class="o">||</span><span class="nx">h</span><span class="o">!=</span><span class="nx">k</span><span class="p">[</span><span class="nx">g</span><span class="p">]</span><span class="o">||</span><span class="nx">i</span><span class="o">!=</span><span class="nx">k</span><span class="p">[</span><span class="nx">g</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="nx">k</span><span class="p">[</span><span class="nx">g</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="nx">h</span><span class="p">,</span><span class="nx">k</span><span class="p">[</span><span class="nx">g</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">),</span><span class="nx">j</span><span class="p">.</span><span class="nx">pos</span><span class="o">&gt;</span><span class="mi">5</span><span class="nx">e3</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">k</span><span class="p">[</span><span class="nx">g</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">pos</span><span class="p">),</span><span class="nx">k</span><span class="p">[</span><span class="nx">g</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="kc">null</span><span class="p">),</span><span class="nx">g</span><span class="o">!=</span><span class="nx">k</span><span class="p">.</span><span class="nx">length</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">length</span><span class="o">=</span><span class="nx">g</span><span class="p">,</span><span class="nx">f</span><span class="o">=!</span><span class="mi">0</span><span class="p">),</span><span class="nx">f</span><span class="p">}</span><span class="kd">function</span> <span class="nx">vc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nx">Yb</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">tabSize</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">blankLine</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">blankLine</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="o">!</span><span class="nx">e</span><span class="p">.</span><span class="nx">eol</span><span class="p">()</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">.</span><span class="nx">pos</span><span class="o">&lt;=</span><span class="mi">5</span><span class="nx">e3</span><span class="p">;)</span><span class="nx">d</span><span class="p">.</span><span class="nx">token</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">start</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">pos</span><span class="p">}</span><span class="kd">function</span> <span class="nx">wc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">?</span><span class="nx">he</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">||</span><span class="p">(</span><span class="nx">he</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;cm-&quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ +/g</span><span class="p">,</span><span class="s2">&quot; cm-&quot;</span><span class="p">))</span><span class="o">:</span><span class="kc">null</span><span class="p">}</span><span class="kd">function</span> <span class="nx">xc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="o">=!</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="nx">hc</span><span class="p">(</span><span class="nx">g</span><span class="p">);)</span><span class="nx">h</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">e</span><span class="o">||</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">g</span><span class="p">);</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="p">{</span><span class="nx">pre</span><span class="o">:</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;pre&quot;</span><span class="p">),</span><span class="nx">col</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">pos</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">display</span><span class="o">:!</span><span class="nx">c</span><span class="p">,</span><span class="nx">measure</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">addedOne</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">cm</span><span class="o">:</span><span class="nx">a</span><span class="p">};</span><span class="nx">g</span><span class="p">.</span><span class="nx">textClass</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">pre</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">textClass</span><span class="p">);</span><span class="k">do</span><span class="p">{</span><span class="nx">g</span><span class="p">.</span><span class="nx">styles</span><span class="o">||</span><span class="nx">uc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">stateAfter</span><span class="o">=</span><span class="nx">F</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">Gc</span><span class="p">(</span><span class="nx">g</span><span class="p">))),</span><span class="nx">i</span><span class="p">.</span><span class="nx">measure</span><span class="o">=</span><span class="nx">g</span><span class="o">==</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">pos</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">addToken</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">measure</span><span class="o">?</span><span class="nx">zc</span><span class="o">:</span><span class="nx">yc</span><span class="p">,</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">g</span><span class="o">!=</span><span class="nx">b</span><span class="o">&amp;&amp;!</span><span class="nx">i</span><span class="p">.</span><span class="nx">addedOne</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">pre</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">md</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">measure</span><span class="p">)),</span><span class="nx">i</span><span class="p">.</span><span class="nx">addedOne</span><span class="o">=!</span><span class="mi">0</span><span class="p">);</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nx">Bc</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span><span class="nx">i</span><span class="p">);</span><span class="nx">f</span><span class="o">=</span><span class="nx">g</span><span class="o">==</span><span class="nx">e</span><span class="p">,</span><span class="nx">j</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">j</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">h</span><span class="o">=!</span><span class="mi">1</span><span class="p">)}</span><span class="k">while</span><span class="p">(</span><span class="nx">j</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="o">&amp;&amp;!</span><span class="nx">i</span><span class="p">.</span><span class="nx">addedOne</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">pre</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">h</span><span class="o">?</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span><span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">md</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">measure</span><span class="p">))),</span><span class="nx">i</span><span class="p">.</span><span class="nx">pre</span><span class="p">.</span><span class="nx">firstChild</span><span class="o">||</span><span class="nx">kc</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">||</span><span class="nx">i</span><span class="p">.</span><span class="nx">pre</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)),</span><span class="nx">i</span><span class="p">.</span><span class="nx">pre</span><span class="p">}</span><span class="kd">function</span> <span class="nx">yc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">ie</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">(),</span><span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">;;){</span><span class="nx">ie</span><span class="p">.</span><span class="nx">lastIndex</span><span class="o">=</span><span class="nx">g</span><span class="p">;</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">ie</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">i</span><span class="o">=</span><span class="nx">h</span><span class="o">?</span><span class="nx">h</span><span class="p">.</span><span class="nx">index</span><span class="o">-</span><span class="nx">g</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">g</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">g</span><span class="p">,</span><span class="nx">g</span><span class="o">+</span><span class="nx">i</span><span class="p">))),</span><span class="nx">a</span><span class="p">.</span><span class="nx">col</span><span class="o">+=</span><span class="nx">i</span><span class="p">),</span><span class="o">!</span><span class="nx">h</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="o">+=</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;  &quot;</span><span class="o">==</span><span class="nx">h</span><span class="p">[</span><span class="mi">0</span><span class="p">]){</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">cm</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">tabSize</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="nx">j</span><span class="o">-</span><span class="nx">a</span><span class="p">.</span><span class="nx">col</span><span class="o">%</span><span class="nx">j</span><span class="p">;</span><span class="nx">f</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span><span class="nx">_c</span><span class="p">(</span><span class="nx">k</span><span class="p">),</span><span class="s2">&quot;cm-tab&quot;</span><span class="p">)),</span><span class="nx">a</span><span class="p">.</span><span class="nx">col</span><span class="o">+=</span><span class="nx">k</span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span><span class="s2">&quot;•&quot;</span><span class="p">,</span><span class="s2">&quot;cm-invalidchar&quot;</span><span class="p">);</span><span class="nx">l</span><span class="p">.</span><span class="nx">title</span><span class="o">=</span><span class="s2">&quot;\\u&quot;</span><span class="o">+</span><span class="nx">h</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span><span class="nx">f</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">l</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">col</span><span class="o">+=</span><span class="mi">1</span><span class="p">}}</span><span class="k">else</span><span class="p">{</span><span class="nx">a</span><span class="p">.</span><span class="nx">col</span><span class="o">+=</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">b</span><span class="p">)}</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">||</span><span class="nx">d</span><span class="o">||</span><span class="nx">e</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="p">){</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="nx">c</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="k">return</span> <span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">m</span><span class="o">+=</span><span class="nx">d</span><span class="p">),</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">m</span><span class="o">+=</span><span class="nx">e</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">pre</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,[</span><span class="nx">f</span><span class="p">],</span><span class="nx">m</span><span class="p">))}</span><span class="nx">a</span><span class="p">.</span><span class="nx">pre</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">f</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">zc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">f</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">f</span><span class="p">)</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">cm</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">lineWrapping</span><span class="o">&amp;&amp;</span><span class="nx">pe</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">f</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nx">f</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">pre</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;wbr&quot;</span><span class="p">)),</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">pos</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="nx">yc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">f</span><span class="p">),</span><span class="nx">c</span><span class="p">,</span><span class="mi">0</span><span class="o">==</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">,</span><span class="nx">f</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">);</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">addedOne</span><span class="o">=!</span><span class="mi">0</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">Ac</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="o">!</span><span class="mi">0</span><span class="p">)),</span><span class="nx">a</span><span class="p">.</span><span class="nx">pre</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">measure</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">pos</span><span class="p">]</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">addedOne</span><span class="o">=!</span><span class="mi">0</span><span class="p">)),</span><span class="nx">a</span><span class="p">.</span><span class="nx">pos</span><span class="o">+=</span><span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Bc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">styles</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="nx">k</span><span class="o">=</span><span class="nx">j</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="mi">0</span><span class="p">;;){</span><span class="k">if</span><span class="p">(</span><span class="nx">o</span><span class="o">==</span><span class="nx">l</span><span class="p">){</span><span class="nx">f</span><span class="o">=</span><span class="nx">g</span><span class="o">=</span><span class="nx">h</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">p</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">q</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">q</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">q</span><span class="p">){</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">q</span><span class="p">],</span><span class="nx">s</span><span class="o">=</span><span class="nx">r</span><span class="p">.</span><span class="nx">marker</span><span class="p">;</span><span class="nx">r</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;=</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">r</span><span class="p">.</span><span class="nx">to</span><span class="o">||</span><span class="nx">r</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;</span><span class="nx">l</span><span class="p">)</span><span class="o">?</span><span class="p">(</span><span class="kc">null</span><span class="o">!=</span><span class="nx">r</span><span class="p">.</span><span class="nx">to</span><span class="o">&amp;&amp;</span><span class="nx">o</span><span class="o">&gt;</span><span class="nx">r</span><span class="p">.</span><span class="nx">to</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="nx">r</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="nx">s</span><span class="p">.</span><span class="nx">className</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="o">+=</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="nx">s</span><span class="p">.</span><span class="nx">className</span><span class="p">),</span><span class="nx">s</span><span class="p">.</span><span class="nx">startStyle</span><span class="o">&amp;&amp;</span><span class="nx">r</span><span class="p">.</span><span class="nx">from</span><span class="o">==</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">h</span><span class="o">+=</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="nx">s</span><span class="p">.</span><span class="nx">startStyle</span><span class="p">),</span><span class="nx">s</span><span class="p">.</span><span class="nx">endStyle</span><span class="o">&amp;&amp;</span><span class="nx">r</span><span class="p">.</span><span class="nx">to</span><span class="o">==</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="o">+=</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="nx">s</span><span class="p">.</span><span class="nx">endStyle</span><span class="p">),</span><span class="nx">s</span><span class="p">.</span><span class="nx">collapsed</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="o">!</span><span class="nx">i</span><span class="o">||</span><span class="nx">i</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">width</span><span class="o">&lt;</span><span class="nx">s</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">r</span><span class="p">))</span><span class="o">:</span><span class="nx">r</span><span class="p">.</span><span class="nx">from</span><span class="o">&gt;</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">o</span><span class="o">&gt;</span><span class="nx">r</span><span class="p">.</span><span class="nx">from</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">o</span><span class="o">=</span><span class="nx">r</span><span class="p">.</span><span class="nx">from</span><span class="p">),</span><span class="s2">&quot;bookmark&quot;</span><span class="o">==</span><span class="nx">s</span><span class="p">.</span><span class="nx">type</span><span class="o">&amp;&amp;</span><span class="nx">r</span><span class="p">.</span><span class="nx">from</span><span class="o">==</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">replacedWith</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">p</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">replacedWith</span><span class="p">)}</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="o">||</span><span class="mi">0</span><span class="p">)</span><span class="o">==</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Ac</span><span class="p">(</span><span class="nx">b</span><span class="p">,(</span><span class="kc">null</span><span class="o">==</span><span class="nx">i</span><span class="p">.</span><span class="nx">to</span><span class="o">?</span><span class="nx">k</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span><span class="o">-</span><span class="nx">l</span><span class="p">,</span><span class="kc">null</span><span class="o">!=</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="o">&amp;&amp;</span><span class="nx">i</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">replacedWith</span><span class="p">),</span><span class="kc">null</span><span class="o">==</span><span class="nx">i</span><span class="p">.</span><span class="nx">to</span><span class="p">))</span><span class="k">return</span> <span class="nx">i</span><span class="p">.</span><span class="nx">marker</span><span class="p">.</span><span class="nx">find</span><span class="p">();</span><span class="nx">p</span><span class="o">&amp;&amp;!</span><span class="nx">i</span><span class="o">&amp;&amp;</span><span class="nx">Ac</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">p</span><span class="p">)}</span><span class="k">if</span><span class="p">(</span><span class="nx">l</span><span class="o">&gt;=</span><span class="nx">k</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">t</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span><span class="nx">o</span><span class="p">);;){</span><span class="k">if</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="kd">var</span> <span class="nx">u</span><span class="o">=</span><span class="nx">l</span><span class="o">+</span><span class="nx">n</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span> <span class="nx">v</span><span class="o">=</span><span class="nx">u</span><span class="o">&gt;</span><span class="nx">t</span><span class="o">?</span><span class="nx">n</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">t</span><span class="o">-</span><span class="nx">l</span><span class="p">)</span><span class="o">:</span><span class="nx">n</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">addToken</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">v</span><span class="p">,</span><span class="nx">e</span><span class="o">+</span><span class="nx">f</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">l</span><span class="o">+</span><span class="nx">v</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="nx">o</span><span class="o">?</span><span class="nx">g</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">)}</span><span class="k">if</span><span class="p">(</span><span class="nx">u</span><span class="o">&gt;=</span><span class="nx">t</span><span class="p">){</span><span class="nx">n</span><span class="o">=</span><span class="nx">n</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">t</span><span class="o">-</span><span class="nx">l</span><span class="p">),</span><span class="nx">l</span><span class="o">=</span><span class="nx">t</span><span class="p">;</span><span class="k">break</span><span class="p">}</span><span class="nx">l</span><span class="o">=</span><span class="nx">u</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">}</span><span class="nx">n</span><span class="o">=</span><span class="nx">c</span><span class="p">[</span><span class="nx">m</span><span class="o">++</span><span class="p">],</span><span class="nx">e</span><span class="o">=</span><span class="nx">wc</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">m</span><span class="o">++</span><span class="p">])}}</span><span class="k">else</span> <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">m</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">m</span><span class="o">+=</span><span class="mi">2</span><span class="p">)</span><span class="nx">b</span><span class="p">.</span><span class="nx">addToken</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">[</span><span class="nx">m</span><span class="p">],</span><span class="nx">wc</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">m</span><span class="o">+</span><span class="mi">1</span><span class="p">]))}</span><span class="kd">function</span> <span class="nx">Cc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">;</span><span class="o">++</span><span class="nx">b</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">].</span><span class="nx">parent</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">+=</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">].</span><span class="nx">height</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">d</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Dc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">d</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">];</span><span class="nx">b</span><span class="o">+=</span><span class="nx">f</span><span class="p">.</span><span class="nx">chunkSize</span><span class="p">(),</span><span class="nx">c</span><span class="o">+=</span><span class="nx">f</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">parent</span><span class="o">=</span><span class="k">this</span><span class="p">}</span><span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="o">=</span><span class="kc">null</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(;</span><span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">lines</span><span class="p">;)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;;</span><span class="o">++</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">c</span><span class="p">],</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">chunkSize</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span><span class="o">=</span><span class="nx">d</span><span class="p">;</span><span class="k">break</span><span class="p">}</span><span class="nx">b</span><span class="o">-=</span><span class="nx">e</span><span class="p">}</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">lines</span><span class="p">[</span><span class="nx">b</span><span class="p">]}</span><span class="kd">function</span> <span class="nx">Fc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="o">-</span><span class="nx">a</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span><span class="nx">d</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span><span class="nx">d</span><span class="p">.</span><span class="nx">height</span><span class="o">+=</span><span class="nx">c</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Gc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">parent</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">cd</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">lines</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span><span class="nx">d</span><span class="p">;</span><span class="nx">b</span><span class="o">=</span><span class="nx">d</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">!=</span><span class="nx">b</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">)</span><span class="nx">c</span><span class="o">+=</span><span class="nx">d</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">e</span><span class="p">].</span><span class="nx">chunkSize</span><span class="p">();</span><span class="k">return</span> <span class="nx">c</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Hc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="o">:</span><span class="k">do</span><span class="p">{</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">d</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">g</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span><span class="o">=</span><span class="nx">f</span><span class="p">;</span><span class="k">continue</span> <span class="nx">a</span><span class="p">}</span><span class="nx">b</span><span class="o">-=</span><span class="nx">g</span><span class="p">,</span><span class="nx">c</span><span class="o">+=</span><span class="nx">f</span><span class="p">.</span><span class="nx">chunkSize</span><span class="p">()}</span><span class="k">return</span> <span class="nx">c</span><span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">lines</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">d</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">lines</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">i</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="nx">b</span><span class="o">-=</span><span class="nx">i</span><span class="p">}</span><span class="k">return</span> <span class="nx">c</span><span class="o">+</span><span class="nx">d</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Ic</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">b</span><span class="o">=</span><span class="nx">jc</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">parent</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">lines</span><span class="p">[</span><span class="nx">e</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="o">==</span><span class="nx">b</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="nx">c</span><span class="o">+=</span><span class="nx">f</span><span class="p">.</span><span class="nx">height</span><span class="p">}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span><span class="nx">g</span><span class="p">;</span><span class="nx">d</span><span class="o">=</span><span class="nx">g</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">g</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">e</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="o">==</span><span class="nx">d</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="nx">c</span><span class="o">+=</span><span class="nx">h</span><span class="p">.</span><span class="nx">height</span><span class="p">}</span><span class="k">return</span> <span class="nx">c</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Jc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">order</span><span class="p">;</span><span class="k">return</span> <span class="kc">null</span><span class="o">==</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">order</span><span class="o">=</span><span class="nx">we</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">)),</span><span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Kc</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">done</span><span class="o">:</span><span class="p">[],</span><span class="nx">undone</span><span class="o">:</span><span class="p">[],</span><span class="nx">lastTime</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">lastOp</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">lastOrigin</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">dirtyCounter</span><span class="o">:</span><span class="mi">0</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">Lc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">i</span><span class="p">){</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="p">;</span><span class="nx">j</span><span class="p">.</span><span class="nx">undone</span><span class="p">.</span><span class="nx">length</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="nx">ad</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">done</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">lastOp</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">id</span><span class="o">||</span><span class="nx">j</span><span class="p">.</span><span class="nx">lastOrigin</span><span class="o">==</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">||</span><span class="s2">&quot;delete&quot;</span><span class="o">==</span><span class="nx">e</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">j</span><span class="p">.</span><span class="nx">lastTime</span><span class="o">&gt;</span><span class="nx">k</span><span class="o">-</span><span class="mi">600</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">m</span><span class="o">=</span><span class="nx">ad</span><span class="p">(</span><span class="nx">l</span><span class="p">.</span><span class="nx">events</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">start</span><span class="o">&gt;</span><span class="nx">b</span><span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">||</span><span class="nx">m</span><span class="p">.</span><span class="nx">start</span><span class="o">+</span><span class="nx">m</span><span class="p">.</span><span class="nx">added</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">)</span><span class="nx">l</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">start</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">added</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">old</span><span class="o">:</span><span class="nx">d</span><span class="p">});</span><span class="k">else</span><span class="p">{</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">m</span><span class="p">.</span><span class="nx">start</span><span class="o">-</span><span class="nx">b</span><span class="p">),</span><span class="nx">o</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">start</span><span class="o">+</span><span class="nx">m</span><span class="p">.</span><span class="nx">added</span><span class="p">)),</span><span class="nx">p</span><span class="o">=</span><span class="nx">n</span><span class="p">;</span><span class="nx">p</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">;</span><span class="o">--</span><span class="nx">p</span><span class="p">)</span><span class="nx">m</span><span class="p">.</span><span class="nx">old</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">p</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">p</span><span class="o">=</span><span class="nx">o</span><span class="p">;</span><span class="nx">p</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">;</span><span class="o">--</span><span class="nx">p</span><span class="p">)</span><span class="nx">m</span><span class="p">.</span><span class="nx">old</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">p</span><span class="p">]);</span><span class="nx">n</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">start</span><span class="o">=</span><span class="nx">b</span><span class="p">),</span><span class="nx">m</span><span class="p">.</span><span class="nx">added</span><span class="o">+=</span><span class="nx">c</span><span class="o">-</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">n</span><span class="o">-</span><span class="nx">o</span><span class="p">)}</span><span class="nx">l</span><span class="p">.</span><span class="nx">fromAfter</span><span class="o">=</span><span class="nx">h</span><span class="p">,</span><span class="nx">l</span><span class="p">.</span><span class="nx">toAfter</span><span class="o">=</span><span class="nx">i</span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="k">for</span><span class="p">(</span><span class="nx">l</span><span class="o">=</span><span class="p">{</span><span class="nx">events</span><span class="o">:</span><span class="p">[{</span><span class="nx">start</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">added</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">old</span><span class="o">:</span><span class="nx">d</span><span class="p">}],</span><span class="nx">fromBefore</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="nx">toBefore</span><span class="o">:</span><span class="nx">g</span><span class="p">,</span><span class="nx">fromAfter</span><span class="o">:</span><span class="nx">h</span><span class="p">,</span><span class="nx">toAfter</span><span class="o">:</span><span class="nx">i</span><span class="p">},</span><span class="nx">j</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">l</span><span class="p">);</span><span class="nx">j</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">undoDepth</span><span class="p">;)</span><span class="nx">j</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span><span class="nx">j</span><span class="p">.</span><span class="nx">dirtyCounter</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">?</span><span class="nx">j</span><span class="p">.</span><span class="nx">dirtyCounter</span><span class="o">=</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="o">:</span><span class="nx">j</span><span class="p">.</span><span class="nx">dirtyCounter</span><span class="o">++</span><span class="p">}</span><span class="nx">j</span><span class="p">.</span><span class="nx">lastTime</span><span class="o">=</span><span class="nx">k</span><span class="p">,</span><span class="nx">j</span><span class="p">.</span><span class="nx">lastOp</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="nx">j</span><span class="p">.</span><span class="nx">lastOrigin</span><span class="o">=</span><span class="nx">e</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Mc</span><span class="p">(){</span><span class="nx">Qc</span><span class="p">(</span><span class="k">this</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">Nc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">stop</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">stop</span><span class="o">=</span><span class="nx">Mc</span><span class="p">),</span><span class="nx">a</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Oc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">preventDefault</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">returnValue</span><span class="o">=!</span><span class="mi">1</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Pc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">()</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">cancelBubble</span><span class="o">=!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Qc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">Oc</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">Pc</span><span class="p">(</span><span class="nx">a</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">Rc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">srcElement</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Sc</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">which</span><span class="p">;</span><span class="k">return</span> <span class="kc">null</span><span class="o">==</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="mi">1</span><span class="o">&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">button</span><span class="o">?</span><span class="nx">b</span><span class="o">=</span><span class="mi">1</span><span class="o">:</span><span class="mi">2</span><span class="o">&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">button</span><span class="o">?</span><span class="nx">b</span><span class="o">=</span><span class="mi">3</span><span class="o">:</span><span class="mi">4</span><span class="o">&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">button</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)),</span><span class="nx">Sd</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">ctrlKey</span><span class="o">&amp;&amp;</span><span class="mi">1</span><span class="o">==</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span><span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Tc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">override</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">override</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="k">return</span> <span class="nx">c</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">override</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">:</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]}</span><span class="kd">function</span> <span class="nx">Uc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span><span class="s2">&quot;on&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">_handlers</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">_handlers</span><span class="o">=</span><span class="p">{}),</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">||</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="p">[]);</span><span class="nx">e</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">c</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">Vc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span><span class="s2">&quot;on&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">_handlers</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">_handlers</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">)</span><span class="k">return</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">]</span><span class="o">==</span><span class="nx">c</span><span class="p">){</span><span class="nx">d</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="k">break</span><span class="p">}}}</span><span class="kd">function</span> <span class="nx">Wc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">_handlers</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">_handlers</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">)</span><span class="nx">c</span><span class="p">[</span><span class="nx">e</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">d</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">Xc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">function</span> <span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">f</span><span class="p">)}}</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">_handlers</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">_handlers</span><span class="p">[</span><span class="nx">c</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">delayedCallbacks</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">h</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">h</span><span class="p">)</span><span class="nx">g</span><span class="o">?</span><span class="nx">g</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">h</span><span class="p">]))</span><span class="o">:</span><span class="nx">e</span><span class="p">[</span><span class="nx">h</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">f</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">Yc</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">_handlers</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">_handlers</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span><span class="k">return</span> <span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">Zc</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="o">=</span><span class="kc">null</span><span class="p">}</span><span class="kd">function</span> <span class="nx">$c</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kc">null</span><span class="o">==</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="sr">/[^\s\u00a0]/</span><span class="p">),</span><span class="o">-</span><span class="mi">1</span><span class="o">==</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">));</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">b</span><span class="o">&gt;</span><span class="nx">d</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">)</span><span class="s2">&quot; &quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">?</span><span class="nx">e</span><span class="o">+=</span><span class="nx">c</span><span class="o">-</span><span class="nx">e</span><span class="o">%</span><span class="nx">c</span><span class="o">:++</span><span class="nx">e</span><span class="p">;</span><span class="k">return</span> <span class="nx">e</span><span class="p">}</span><span class="kd">function</span> <span class="nx">_c</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(;</span><span class="nx">le</span><span class="p">.</span><span class="nx">length</span><span class="o">&lt;=</span><span class="nx">a</span><span class="p">;)</span><span class="nx">le</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">ad</span><span class="p">(</span><span class="nx">le</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="p">);</span><span class="k">return</span> <span class="nx">le</span><span class="p">[</span><span class="nx">a</span><span class="p">]}</span><span class="kd">function</span> <span class="nx">ad</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">]}</span><span class="kd">function</span> <span class="nx">bd</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">Qd</span><span class="o">?</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">selectionStart</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">selectionEnd</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">select</span><span class="p">()}</span><span class="kd">function</span> <span class="nx">cd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">d</span><span class="o">&gt;</span><span class="nx">c</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">==</span><span class="nx">b</span><span class="p">)</span><span class="k">return</span> <span class="nx">c</span><span class="p">;</span><span class="k">return</span><span class="o">-</span><span class="mi">1</span><span class="p">}</span><span class="kd">function</span> <span class="nx">dd</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">[],</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="o">&gt;</span><span class="nx">c</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">)</span><span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">void</span> <span class="mi">0</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">ed</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">b</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">fd</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="sr">/\w/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="nx">a</span><span class="o">&gt;</span><span class="s2">&quot;&quot;</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="o">||</span><span class="nx">me</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">))}</span><span class="kd">function</span> <span class="nx">gd</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">&amp;&amp;++</span><span class="nx">b</span><span class="p">;</span><span class="k">return</span><span class="o">!</span><span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">hd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="nx">c</span><span class="p">),</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span><span class="o">=</span><span class="nx">d</span><span class="p">),</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">b</span><span class="p">)</span><span class="nx">kd</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">f</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">f</span><span class="p">)</span><span class="nx">e</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="nx">f</span><span class="p">]);</span><span class="k">return</span> <span class="nx">e</span><span class="p">}</span><span class="kd">function</span> <span class="nx">id</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">innerHTML</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">}</span><span class="kd">function</span> <span class="nx">jd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">id</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">b</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">kd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">Gd</span><span class="o">?</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">innerHTML</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">b</span><span class="p">)))</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">textContent</span><span class="o">=</span><span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">ld</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">!=</span><span class="nx">qe</span><span class="p">)</span><span class="k">return</span> <span class="nx">qe</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;width: 50px; height: 50px; overflow-x: scroll&quot;</span><span class="p">);</span><span class="k">return</span> <span class="nx">jd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">qe</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">),</span><span class="nx">qe</span><span class="o">||</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">md</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">re</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span><span class="s2">&quot;​&quot;</span><span class="p">);</span><span class="nx">jd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,[</span><span class="nx">b</span><span class="p">,</span><span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)])),</span><span class="mi">0</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">re</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="o">&lt;=</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="o">&gt;</span><span class="mi">2</span><span class="o">&amp;&amp;!</span><span class="nx">Fd</span><span class="p">)}</span><span class="k">return</span> <span class="nx">re</span><span class="o">?</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span><span class="s2">&quot;​&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="s2">&quot;display: inline-block; width: 1px; margin-right: -1px&quot;</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">nd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">)</span><span class="k">return</span> <span class="nx">d</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="s2">&quot;ltr&quot;</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">e</span><span class="p">];</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="mi">1</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">level</span><span class="o">?</span><span class="s2">&quot;rtl&quot;</span><span class="o">:</span><span class="s2">&quot;ltr&quot;</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">od</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">level</span><span class="o">%</span><span class="mi">2</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">to</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">from</span><span class="p">}</span><span class="kd">function</span> <span class="nx">pd</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">level</span><span class="o">%</span><span class="mi">2</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">from</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">to</span><span class="p">}</span><span class="kd">function</span> <span class="nx">qd</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">Jc</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="o">?</span><span class="nx">od</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">:</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">rd</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">Jc</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="o">?</span><span class="nx">pd</span><span class="p">(</span><span class="nx">ad</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="kd">function</span> <span class="nx">sd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">jc</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="nx">d</span><span class="o">!=</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">Gc</span><span class="p">(</span><span class="nx">d</span><span class="p">));</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">Jc</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="o">?</span><span class="nx">e</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">level</span><span class="o">%</span><span class="mi">2</span><span class="o">?</span><span class="nx">rd</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">:</span><span class="nx">qd</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">:</span><span class="mi">0</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">f</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">td</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">;</span><span class="nx">c</span><span class="o">=</span><span class="nx">ic</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">b</span><span class="p">));)</span><span class="nx">b</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">find</span><span class="p">().</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="p">;</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">Jc</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="o">?</span><span class="nx">e</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">level</span><span class="o">%</span><span class="mi">2</span><span class="o">?</span><span class="nx">qd</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">:</span><span class="nx">rd</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">f</span><span class="p">}}</span><span class="kd">function</span> <span class="nx">ud</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">Jc</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">e</span><span class="p">)</span><span class="k">return</span> <span class="nx">vd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">d</span><span class="o">?</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">do</span> <span class="nx">b</span><span class="o">+=</span><span class="nx">c</span><span class="p">;</span><span class="k">while</span><span class="p">(</span><span class="nx">b</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">ne</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">b</span><span class="p">)));</span><span class="k">return</span> <span class="nx">b</span><span class="p">}</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">},</span><span class="nx">g</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">level</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">h</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">h</span><span class="p">){</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="nx">h</span><span class="p">],</span><span class="nx">j</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">level</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="nx">g</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">i</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;</span><span class="nx">b</span><span class="o">||</span><span class="nx">j</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="o">==</span><span class="nx">b</span><span class="o">||</span><span class="nx">i</span><span class="p">.</span><span class="nx">to</span><span class="o">==</span><span class="nx">b</span><span class="p">))</span><span class="k">break</span><span class="p">}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">f</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">level</span><span class="o">%</span><span class="mi">2</span><span class="o">?-</span><span class="nx">c</span><span class="o">:</span><span class="nx">c</span><span class="p">);</span><span class="kc">null</span><span class="o">!=</span><span class="nx">k</span><span class="p">;)</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">level</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="nx">g</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">k</span><span class="o">&lt;</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="o">||</span><span class="nx">k</span><span class="o">&gt;</span><span class="nx">i</span><span class="p">.</span><span class="nx">to</span><span class="p">))</span><span class="k">break</span><span class="p">;</span><span class="nx">i</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="nx">h</span><span class="o">+=</span><span class="nx">c</span><span class="p">],</span><span class="nx">k</span><span class="o">=</span><span class="nx">i</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">==</span><span class="nx">i</span><span class="p">.</span><span class="nx">level</span><span class="o">%</span><span class="mi">2</span><span class="o">?</span><span class="nx">f</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">f</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="mi">1</span><span class="p">))}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">k</span><span class="o">==</span><span class="nx">od</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span><span class="nx">i</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="o">--</span><span class="nx">h</span><span class="p">],</span><span class="nx">k</span><span class="o">=</span><span class="nx">i</span><span class="o">&amp;&amp;</span><span class="nx">pd</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="nx">k</span><span class="o">!=</span><span class="nx">pd</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span><span class="k">break</span><span class="p">;</span><span class="nx">i</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="o">++</span><span class="nx">h</span><span class="p">],</span><span class="nx">k</span><span class="o">=</span><span class="nx">i</span><span class="o">&amp;&amp;</span><span class="nx">od</span><span class="p">(</span><span class="nx">i</span><span class="p">)}</span><span class="k">return</span> <span class="mi">0</span><span class="o">&gt;</span><span class="nx">k</span><span class="o">||</span><span class="nx">k</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="nx">k</span><span class="p">}</span><span class="kd">function</span> <span class="nx">vd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="o">+</span><span class="nx">c</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="k">for</span><span class="p">(;</span><span class="nx">e</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">ne</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">e</span><span class="p">));)</span><span class="nx">e</span><span class="o">+=</span><span class="nx">c</span><span class="p">;</span><span class="k">return</span> <span class="mi">0</span><span class="o">&gt;</span><span class="nx">e</span><span class="o">||</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="nx">e</span><span class="p">}</span><span class="kd">var</span> <span class="nx">wd</span><span class="p">,</span><span class="nx">xd</span><span class="p">,</span><span class="nx">yd</span><span class="p">,</span><span class="nx">zd</span><span class="p">,</span><span class="nx">Ad</span><span class="p">,</span><span class="nx">Bd</span><span class="p">,</span><span class="nx">Cd</span><span class="p">,</span><span class="nx">Dd</span><span class="o">=</span><span class="sr">/gecko\/\d/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Ed</span><span class="o">=</span><span class="sr">/MSIE \d/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Fd</span><span class="o">=</span><span class="sr">/MSIE [1-7]\b/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Gd</span><span class="o">=</span><span class="sr">/MSIE [1-8]\b/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Hd</span><span class="o">=</span><span class="sr">/WebKit\//</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Id</span><span class="o">=</span><span class="nx">Hd</span><span class="o">&amp;&amp;</span><span class="sr">/Qt\/\d+\.\d+/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Jd</span><span class="o">=</span><span class="sr">/Chrome\//</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Kd</span><span class="o">=</span><span class="sr">/Opera\//</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Ld</span><span class="o">=</span><span class="sr">/Apple Computer/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">vendor</span><span class="p">),</span><span class="nx">Md</span><span class="o">=</span><span class="sr">/KHTML\//</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Nd</span><span class="o">=</span><span class="sr">/Mac OS X 1\d\D([7-9]|\d\d)\D/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Od</span><span class="o">=</span><span class="sr">/Mac OS X 1\d\D([8-9]|\d\d)\D/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Pd</span><span class="o">=</span><span class="sr">/PhantomJS/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Qd</span><span class="o">=</span><span class="sr">/AppleWebKit/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="sr">/Mobile\/\w+/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Rd</span><span class="o">=</span><span class="nx">Qd</span><span class="o">||</span><span class="sr">/Android|webOS|BlackBerry|Opera Mini|IEMobile/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">),</span><span class="nx">Sd</span><span class="o">=</span><span class="nx">Qd</span><span class="o">||</span><span class="sr">/Mac/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">platform</span><span class="p">),</span><span class="nx">Td</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">Ud</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">Vd</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">Wd</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">Ed</span><span class="o">?</span><span class="nx">Wd</span><span class="o">=-</span><span class="p">.</span><span class="mi">53</span><span class="o">:</span><span class="nx">Dd</span><span class="o">?</span><span class="nx">Wd</span><span class="o">=</span><span class="mi">15</span><span class="o">:</span><span class="nx">Jd</span><span class="o">?</span><span class="nx">Wd</span><span class="o">=-</span><span class="p">.</span><span class="mi">7</span><span class="o">:</span><span class="nx">Ld</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Wd</span><span class="o">=-</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">);</span><span class="kd">var</span> <span class="nx">Xd</span><span class="p">,</span><span class="nx">Yd</span><span class="p">,</span><span class="nx">Zd</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="p">{</span><span class="nx">getValue</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">[],</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">)}),</span><span class="nx">b</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">a</span><span class="o">||</span><span class="s2">&quot;\n&quot;</span><span class="p">)},</span><span class="nx">setValue</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">},</span><span class="nx">d</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">size</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">vb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">size</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">d</span><span class="p">},</span><span class="nx">se</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">c</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="s2">&quot;setValue&quot;</span><span class="p">)}),</span><span class="nx">getSelection</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getRange</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">a</span><span class="p">)},</span><span class="nx">replaceSelection</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">;</span><span class="nx">ub</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">se</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">b</span><span class="o">||</span><span class="s2">&quot;around&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">)}),</span><span class="nx">focus</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="nb">window</span><span class="p">.</span><span class="nx">focus</span><span class="p">(),</span><span class="nx">_</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">rb</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="nx">Y</span><span class="p">(</span><span class="k">this</span><span class="p">)},</span><span class="nx">setOption</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">];(</span><span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">!=</span><span class="nx">b</span><span class="o">||</span><span class="s2">&quot;mode&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">$d</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">V</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">$d</span><span class="p">[</span><span class="nx">a</span><span class="p">])(</span><span class="k">this</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">))},</span><span class="nx">getOption</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">a</span><span class="p">]},</span><span class="nx">getMode</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">mode</span><span class="p">},</span><span class="nx">addKeyMap</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">keyMaps</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="nx">removeKeyMap</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">keyMaps</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">)</span><span class="k">if</span><span class="p">((</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">?</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">].</span><span class="nx">name</span><span class="o">:</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span><span class="o">==</span><span class="nx">a</span><span class="p">)</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="o">!</span><span class="mi">0</span><span class="p">},</span><span class="nx">undo</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">wb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;undo&quot;</span><span class="p">)}),</span><span class="nx">redo</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">wb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;redo&quot;</span><span class="p">)}),</span><span class="nx">indentLine</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="s2">&quot;string&quot;</span><span class="o">!=</span><span class="k">typeof</span> <span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="kc">null</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">smartIndent</span><span class="o">?</span><span class="s2">&quot;smart&quot;</span><span class="o">:</span><span class="s2">&quot;prev&quot;</span><span class="o">:</span><span class="nx">b</span><span class="o">?</span><span class="s2">&quot;add&quot;</span><span class="o">:</span><span class="s2">&quot;subtract&quot;</span><span class="p">),</span><span class="nx">Eb</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">Nb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">)}),</span><span class="nx">indentSelection</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">zb</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">to</span><span class="p">))</span><span class="k">return</span> <span class="nx">Nb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">line</span><span class="o">-</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">ch</span><span class="o">?</span><span class="mi">0</span><span class="o">:</span><span class="mi">1</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">line</span><span class="p">;</span><span class="nx">c</span><span class="o">&gt;=</span><span class="nx">d</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">)</span><span class="nx">Nb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">)}),</span><span class="nx">historySize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">undo</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">redo</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">undone</span><span class="p">.</span><span class="nx">length</span><span class="p">}},</span><span class="nx">clearHistory</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="o">=</span><span class="nx">Kc</span><span class="p">()},</span><span class="nx">markClean</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">dirtyCounter</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">lastOp</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">lastOrigin</span><span class="o">=</span><span class="kc">null</span><span class="p">},</span><span class="nx">isClean</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="mi">0</span><span class="o">==</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">dirtyCounter</span><span class="p">},</span><span class="nx">getHistory</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">function</span> <span class="nx">a</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="p">[];</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">c</span><span class="p">];</span><span class="nx">d</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">events</span><span class="o">:</span><span class="nx">b</span><span class="o">=</span><span class="p">[],</span><span class="nx">fromBefore</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">fromBefore</span><span class="p">,</span><span class="nx">toBefore</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">toBefore</span><span class="p">,</span><span class="nx">fromAfter</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">fromAfter</span><span class="p">,</span><span class="nx">toAfter</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">toAfter</span><span class="p">});</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span><span class="nx">f</span><span class="o">&lt;</span><span class="nx">g</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">f</span><span class="p">){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="p">[],</span><span class="nx">i</span><span class="o">=</span><span class="nx">g</span><span class="p">[</span><span class="nx">f</span><span class="p">];</span><span class="nx">b</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">start</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">start</span><span class="p">,</span><span class="nx">added</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">added</span><span class="p">,</span><span class="nx">old</span><span class="o">:</span><span class="nx">h</span><span class="p">});</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">j</span><span class="o">&lt;</span><span class="nx">i</span><span class="p">.</span><span class="nx">old</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">j</span><span class="p">)</span><span class="nx">h</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">mc</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">old</span><span class="p">[</span><span class="nx">j</span><span class="p">]))}}</span><span class="k">return</span> <span class="nx">d</span><span class="p">}</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">done</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">done</span><span class="p">),</span><span class="nx">undone</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">undone</span><span class="p">)}},</span><span class="nx">setHistory</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">history</span><span class="o">=</span><span class="nx">Kc</span><span class="p">();</span><span class="nx">b</span><span class="p">.</span><span class="nx">done</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">done</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">undone</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">undone</span><span class="p">},</span><span class="nx">getTokenAt</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="nx">Db</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">F</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="k">new</span> <span class="nx">Yb</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">tabSize</span><span class="p">);</span><span class="nx">f</span><span class="p">.</span><span class="nx">pos</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">ch</span><span class="o">&amp;&amp;!</span><span class="nx">f</span><span class="p">.</span><span class="nx">eol</span><span class="p">();){</span><span class="nx">f</span><span class="p">.</span><span class="nx">start</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">pos</span><span class="p">;</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">token</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">c</span><span class="p">)}</span><span class="k">return</span><span class="p">{</span><span class="nx">start</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">start</span><span class="p">,</span><span class="nx">end</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">pos</span><span class="p">,</span><span class="nx">string</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">current</span><span class="p">(),</span><span class="nx">className</span><span class="o">:</span><span class="nx">g</span><span class="o">||</span><span class="kc">null</span><span class="p">,</span><span class="nx">type</span><span class="o">:</span><span class="nx">g</span><span class="o">||</span><span class="kc">null</span><span class="p">,</span><span class="nx">state</span><span class="o">:</span><span class="nx">c</span><span class="p">}},</span><span class="nx">getStateAfter</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="o">=</span><span class="nx">Cb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="kc">null</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">size</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="nx">a</span><span class="p">),</span><span class="nx">F</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="o">+</span><span class="mi">1</span><span class="p">)},</span><span class="nx">cursorCoords</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">;</span><span class="k">return</span> <span class="nx">c</span><span class="o">=</span><span class="kc">null</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">head</span><span class="o">:</span><span class="s2">&quot;object&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">?</span><span class="nx">Db</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">from</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="nx">O</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="o">||</span><span class="s2">&quot;page&quot;</span><span class="p">)},</span><span class="nx">charCoords</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">N</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">Db</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">b</span><span class="o">||</span><span class="s2">&quot;page&quot;</span><span class="p">)},</span><span class="nx">coordsChar</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">lineSpace</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span><span class="k">return</span> <span class="nx">P</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">left</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">top</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">top</span><span class="p">)},</span><span class="nx">defaultTextHeight</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">R</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">)},</span><span class="nx">markText</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">$b</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">Db</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">Db</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">c</span><span class="p">,</span><span class="s2">&quot;range&quot;</span><span class="p">)}),</span><span class="nx">setBookmark</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">=</span><span class="nx">Db</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">$b</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="o">?</span><span class="p">{</span><span class="nx">replacedWith</span><span class="o">:</span><span class="nx">b</span><span class="p">}</span><span class="o">:</span><span class="p">{},</span><span class="s2">&quot;bookmark&quot;</span><span class="p">)}),</span><span class="nx">findMarksAt</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="nx">Db</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">d</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="p">).</span><span class="nx">markedSpans</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">];(</span><span class="kc">null</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">||</span><span class="nx">f</span><span class="p">.</span><span class="nx">from</span><span class="o">&lt;=</span><span class="nx">a</span><span class="p">.</span><span class="nx">ch</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="o">||</span><span class="nx">f</span><span class="p">.</span><span class="nx">to</span><span class="o">&gt;=</span><span class="nx">a</span><span class="p">.</span><span class="nx">ch</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">marker</span><span class="p">)}</span><span class="k">return</span> <span class="nx">c</span><span class="p">},</span><span class="nx">setGutterMarker</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">Ob</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">gutterMarkers</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">gutterMarkers</span><span class="o">=</span><span class="p">{});</span><span class="k">return</span> <span class="nx">d</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="o">!</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">gd</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">gutterMarkers</span><span class="o">=</span><span class="kc">null</span><span class="p">),</span><span class="o">!</span><span class="mi">0</span><span class="p">})}),</span><span class="nx">clearGutter</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutterMarkers</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutterMarkers</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutterMarkers</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">W</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="nx">gd</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutterMarkers</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">gutterMarkers</span><span class="o">=</span><span class="kc">null</span><span class="p">)),</span><span class="o">++</span><span class="nx">b</span><span class="p">})}),</span><span class="nx">addLineClass</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">Ob</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="s2">&quot;textClass&quot;</span><span class="o">:</span><span class="s2">&quot;background&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="s2">&quot;bgClass&quot;</span><span class="o">:</span><span class="s2">&quot;wrapClass&quot;</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]){</span><span class="k">if</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;\\b&quot;</span><span class="o">+</span><span class="nx">c</span><span class="o">+</span><span class="s2">&quot;\\b&quot;</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]))</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">+=</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">}</span><span class="k">else</span> <span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="nx">c</span><span class="p">;</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">})}),</span><span class="nx">removeLineClass</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">Ob</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="s2">&quot;textClass&quot;</span><span class="o">:</span><span class="s2">&quot;background&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="s2">&quot;bgClass&quot;</span><span class="o">:</span><span class="s2">&quot;wrapClass&quot;</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">e</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">c</span><span class="p">)</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;^&quot;</span><span class="o">+</span><span class="nx">c</span><span class="o">+</span><span class="s2">&quot;\\b\\s*|\\s*\\b&quot;</span><span class="o">+</span><span class="nx">c</span><span class="o">+</span><span class="s2">&quot;\\b&quot;</span><span class="p">),</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="o">==</span><span class="nx">e</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="nx">f</span><span class="o">||</span><span class="kc">null</span><span class="p">}</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">})}),</span><span class="nx">addLineWidget</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="o">||</span><span class="p">{};</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">node</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">noHScroll</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">alignWidgets</span><span class="o">=!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Ob</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">widgets</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">widgets</span><span class="o">=</span><span class="p">[])).</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">}),</span><span class="nx">d</span><span class="p">}),</span><span class="nx">removeLineWidget</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="p">.</span><span class="nx">widgets</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">Gc</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">!=</span><span class="nx">c</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">)</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">==</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">d</span><span class="o">--</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="nx">W</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">c</span><span class="o">+</span><span class="mi">1</span><span class="p">)}}),</span><span class="nx">lineInfo</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;number&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">Eb</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">))</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="nx">Ec</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="o">!</span><span class="nx">a</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">Gc</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">==</span><span class="nx">b</span><span class="p">)</span><span class="k">return</span> <span class="kc">null</span><span class="p">}</span><span class="k">return</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">handle</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">text</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span><span class="nx">gutterMarkers</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">gutterMarkers</span><span class="p">,</span><span class="nx">textClass</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">textClass</span><span class="p">,</span><span class="nx">bgClass</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">bgClass</span><span class="p">,</span><span class="nx">wrapClass</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">wrapClass</span><span class="p">,</span><span class="nx">widgets</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">widgets</span><span class="p">}},</span><span class="nx">getViewport</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingFrom</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">showingTo</span><span class="p">}},</span><span class="nx">addWidget</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="nx">O</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">Db</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">));</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span><span class="o">=</span><span class="s2">&quot;absolute&quot;</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">sizer</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="s2">&quot;over&quot;</span><span class="o">==</span><span class="nx">d</span><span class="p">)</span><span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">top</span><span class="p">;</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s2">&quot;near&quot;</span><span class="o">==</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">height</span><span class="p">),</span><span class="nx">j</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">sizer</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">,</span><span class="nx">f</span><span class="p">.</span><span class="nx">lineSpace</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">bottom</span><span class="o">+</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="o">&gt;</span><span class="nx">i</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">top</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">g</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">top</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">),</span><span class="nx">h</span><span class="o">+</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="o">&gt;</span><span class="nx">j</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">h</span><span class="o">=</span><span class="nx">j</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">)}</span><span class="nx">b</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span><span class="o">=</span><span class="nx">g</span><span class="o">+</span><span class="nx">G</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">right</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;right&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">?</span><span class="p">(</span><span class="nx">h</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">sizer</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">right</span><span class="o">=</span><span class="s2">&quot;0px&quot;</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">?</span><span class="nx">h</span><span class="o">=</span><span class="mi">0</span><span class="o">:</span><span class="s2">&quot;middle&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">h</span><span class="o">=</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">sizer</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">-</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="o">=</span><span class="nx">h</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="p">),</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">Lb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="o">+</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="nx">g</span><span class="o">+</span><span class="nx">b</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">)},</span><span class="nx">lineCount</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">size</span><span class="p">},</span><span class="nx">clipPos</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">Db</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">)},</span><span class="nx">getCursor</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">;</span><span class="k">return</span> <span class="nx">b</span><span class="o">=</span><span class="kc">null</span><span class="o">==</span><span class="nx">a</span><span class="o">||</span><span class="s2">&quot;head&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">head</span><span class="o">:</span><span class="s2">&quot;anchor&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">anchor</span><span class="o">:</span><span class="s2">&quot;end&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">||</span><span class="nx">a</span><span class="o">===!</span><span class="mi">1</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">to</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">Bb</span><span class="p">(</span><span class="nx">b</span><span class="p">)},</span><span class="nx">somethingSelected</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="o">!</span><span class="nx">zb</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">to</span><span class="p">)},</span><span class="nx">setCursor</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">Db</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="s2">&quot;number&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">?</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">b</span><span class="o">||</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="nx">a</span><span class="p">);</span><span class="nx">c</span><span class="o">?</span><span class="nx">Fb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="p">)</span><span class="o">:</span><span class="nx">Gb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">d</span><span class="p">)}),</span><span class="nx">setSelection</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="nx">Gb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">Db</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">Db</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="o">||</span><span class="nx">a</span><span class="p">))}),</span><span class="nx">extendSelection</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="nx">Fb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">Db</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">Db</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">))}),</span><span class="nx">setExtending</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">extend</span><span class="o">=</span><span class="nx">a</span><span class="p">},</span><span class="nx">getLine</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getLineHandle</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">text</span><span class="p">},</span><span class="nx">getLineHandle</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="k">return</span> <span class="nx">Eb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">},</span><span class="nx">getLineNumber</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">Gc</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="nx">setLine</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">Eb</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">yb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">b</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">},{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">Ec</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">).</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">})}),</span><span class="nx">removeLine</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">Eb</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">yb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">},</span><span class="nx">Db</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">}))}),</span><span class="nx">replaceRange</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="k">return</span> <span class="nx">b</span><span class="o">=</span><span class="nx">Db</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="o">?</span><span class="nx">Db</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">yb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">)}),</span><span class="nx">getRange</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="nx">Db</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">b</span><span class="o">=</span><span class="nx">Db</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">==</span><span class="nx">f</span><span class="p">)</span><span class="k">return</span> <span class="nx">Ec</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">).</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">ch</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">);</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="p">[</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">).</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">ch</span><span class="p">)];</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="nx">e</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">g</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
<span class="p">}),</span><span class="nx">g</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">Ec</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">f</span><span class="p">).</span><span class="nx">text</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">)),</span><span class="nx">g</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">c</span><span class="o">||</span><span class="s2">&quot;\n&quot;</span><span class="p">)},</span><span class="nx">triggerOnKeyDown</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">pb</span><span class="p">),</span><span class="nx">execCommand</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">fe</span><span class="p">[</span><span class="nx">a</span><span class="p">](</span><span class="k">this</span><span class="p">)},</span><span class="nx">moveH</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">a</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">from</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">to</span><span class="p">;(</span><span class="nx">c</span><span class="p">.</span><span class="nx">shift</span><span class="o">||</span><span class="nx">c</span><span class="p">.</span><span class="nx">extend</span><span class="o">||</span><span class="nx">zb</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">to</span><span class="p">))</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">Pb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)),</span><span class="nx">Fb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">a</span><span class="p">)}),</span><span class="nx">deleteH</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">;</span><span class="nx">zb</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span><span class="o">?</span><span class="nx">yb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">Pb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">),</span><span class="s2">&quot;delete&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">yb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="s2">&quot;delete&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">curOp</span><span class="p">.</span><span class="nx">userSelChange</span><span class="o">=!</span><span class="mi">0</span><span class="p">}),</span><span class="nx">moveV</span><span class="o">:</span><span class="nx">V</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">head</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">O</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="s2">&quot;div&quot;</span><span class="p">),</span><span class="nx">i</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">!=</span><span class="nx">d</span><span class="p">.</span><span class="nx">goalColumn</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">goalColumn</span><span class="p">),</span><span class="s2">&quot;page&quot;</span><span class="o">==</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">,</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="o">||</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">);</span><span class="nx">c</span><span class="o">=</span><span class="nx">h</span><span class="p">.</span><span class="nx">top</span><span class="o">+</span><span class="nx">a</span><span class="o">*</span><span class="nx">j</span><span class="p">}</span><span class="k">else</span><span class="s2">&quot;line&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="nx">h</span><span class="p">.</span><span class="nx">bottom</span><span class="o">+</span><span class="mi">3</span><span class="o">:</span><span class="nx">h</span><span class="p">.</span><span class="nx">top</span><span class="o">-</span><span class="mi">3</span><span class="p">);</span><span class="k">do</span><span class="p">{</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">P</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="nx">c</span><span class="o">+=</span><span class="mi">5</span><span class="o">*</span><span class="nx">a</span><span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">outside</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="mi">0</span><span class="o">&gt;</span><span class="nx">a</span><span class="o">?</span><span class="nx">c</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">:</span><span class="nx">c</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">.</span><span class="nx">height</span><span class="p">));</span><span class="s2">&quot;page&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">+=</span><span class="nx">N</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="s2">&quot;div&quot;</span><span class="p">).</span><span class="nx">top</span><span class="o">-</span><span class="nx">h</span><span class="p">.</span><span class="nx">top</span><span class="p">),</span><span class="nx">Fb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">goalColumn</span><span class="o">=</span><span class="nx">i</span><span class="p">}),</span><span class="nx">toggleOverwrite</span><span class="o">:</span><span class="kd">function</span><span class="p">(){(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">overwrite</span><span class="o">=!</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">overwrite</span><span class="p">)</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">className</span><span class="o">+=</span><span class="s2">&quot; CodeMirror-overwrite&quot;</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot; CodeMirror-overwrite&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="nx">posFromIndex</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">;</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="k">return</span> <span class="nx">e</span><span class="o">&gt;</span><span class="nx">a</span><span class="o">?</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">a</span><span class="o">-=</span><span class="nx">e</span><span class="p">,</span><span class="o">++</span><span class="nx">c</span><span class="p">,</span><span class="k">void</span> <span class="mi">0</span><span class="p">)}),</span><span class="nx">Db</span><span class="p">(</span><span class="nx">d</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">b</span><span class="p">})},</span><span class="nx">indexFromPos</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">ch</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="k">return</span> <span class="mi">0</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">ch</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nx">iter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">b</span><span class="o">+=</span><span class="nx">a</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="o">+</span><span class="mi">1</span><span class="p">}),</span><span class="nx">b</span><span class="p">},</span><span class="nx">scrollTo</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kc">null</span><span class="o">!=</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scrollbarH</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="o">=</span><span class="nx">a</span><span class="p">),</span><span class="kc">null</span><span class="o">!=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="nx">b</span><span class="p">),</span><span class="nx">s</span><span class="p">(</span><span class="k">this</span><span class="p">,[])},</span><span class="nx">getScrollInfo</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="nx">je</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">left</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">,</span><span class="nx">top</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span><span class="nx">height</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="o">-</span><span class="nx">b</span><span class="p">,</span><span class="nx">width</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">scrollWidth</span><span class="o">-</span><span class="nx">b</span><span class="p">,</span><span class="nx">clientHeight</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientHeight</span><span class="o">-</span><span class="nx">b</span><span class="p">,</span><span class="nx">clientWidth</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">clientWidth</span><span class="o">-</span><span class="nx">b</span><span class="p">}},</span><span class="nx">scrollIntoView</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="s2">&quot;number&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">}),</span><span class="nx">a</span><span class="o">=</span><span class="nx">a</span><span class="o">?</span><span class="nx">Db</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">doc</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">sel</span><span class="p">.</span><span class="nx">head</span><span class="p">,</span><span class="nx">Kb</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">)},</span><span class="nx">setSize</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">function</span> <span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;number&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">a</span><span class="o">||</span><span class="sr">/^\d+$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="o">?</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;px&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">}</span><span class="kc">null</span><span class="o">!=</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">)),</span><span class="kc">null</span><span class="o">!=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">c</span><span class="p">(</span><span class="nx">b</span><span class="p">)),</span><span class="k">this</span><span class="p">.</span><span class="nx">refresh</span><span class="p">()},</span><span class="nx">on</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">Uc</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)},</span><span class="nx">off</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">Vc</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)},</span><span class="nx">operation</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">V</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">a</span><span class="p">)()},</span><span class="nx">refresh</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="nx">L</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="o">&gt;</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scrollbarV</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">.</span><span class="nx">scrollTop</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">),</span><span class="nx">s</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)},</span><span class="nx">getInputField</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">input</span><span class="p">},</span><span class="nx">getWrapperElement</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">wrapper</span><span class="p">},</span><span class="nx">getScrollerElement</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">scroller</span><span class="p">},</span><span class="nx">getGutterElement</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">gutters</span><span class="p">}};</span><span class="kd">var</span> <span class="nx">$d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">optionHandlers</span><span class="o">=</span><span class="p">{},</span><span class="nx">_d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">defaults</span><span class="o">=</span><span class="p">{},</span><span class="nx">ae</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">Init</span><span class="o">=</span><span class="p">{</span><span class="nx">toString</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="s2">&quot;CodeMirror.Init&quot;</span><span class="p">}};</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="nx">b</span><span class="p">)},</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;mode&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;indentUnit&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;indentWithTabs&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;smartIndent&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;tabSize&quot;</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">L</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">s</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)},</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;electricChars&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;theme&quot;</span><span class="p">,</span><span class="s2">&quot;default&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">g</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;keyMap&quot;</span><span class="p">,</span><span class="s2">&quot;default&quot;</span><span class="p">,</span><span class="nx">f</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;extraKeys&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;onKeyEvent&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;onDragEvent&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;lineWrapping&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;gutters&quot;</span><span class="p">,[],</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">l</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">),</span><span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;lineNumbers&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">l</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">options</span><span class="p">),</span><span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;firstLineNumber&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;lineNumberFormatter&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">},</span><span class="nx">h</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;showCursorWhenSelecting&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;readOnly&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="s2">&quot;nocursor&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="p">(</span><span class="nx">sb</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">blur</span><span class="p">())</span><span class="o">:</span><span class="nx">b</span><span class="o">||</span><span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)}),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;dragDrop&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;cursorBlinkRate&quot;</span><span class="p">,</span><span class="mi">530</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;cursorHeight&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;workTime&quot;</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;workDelay&quot;</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;flattenSpans&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;pollInterval&quot;</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;undoDepth&quot;</span><span class="p">,</span><span class="mi">40</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;viewportMargin&quot;</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">refresh</span><span class="p">()},</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;tabindex&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">display</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">tabIndex</span><span class="o">=</span><span class="nx">b</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">}),</span><span class="nx">Sb</span><span class="p">(</span><span class="s2">&quot;autofocus&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span><span class="kd">var</span> <span class="nx">be</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">modes</span><span class="o">=</span><span class="p">{},</span><span class="nx">ce</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">mimeModes</span><span class="o">=</span><span class="p">{};</span><span class="nx">a</span><span class="p">.</span><span class="nx">defineMode</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">mode</span><span class="o">||</span><span class="s2">&quot;null&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">mode</span><span class="o">=</span><span class="nx">b</span><span class="p">),</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">){</span><span class="nx">c</span><span class="p">.</span><span class="nx">dependencies</span><span class="o">=</span><span class="p">[];</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">)</span><span class="nx">c</span><span class="p">.</span><span class="nx">dependencies</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="nx">d</span><span class="p">])}</span><span class="nx">be</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="nx">c</span><span class="p">},</span><span class="nx">a</span><span class="p">.</span><span class="nx">defineMIME</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">ce</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">},</span><span class="nx">a</span><span class="p">.</span><span class="nx">resolveMode</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">ce</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="nx">b</span><span class="o">=</span><span class="nx">ce</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">b</span><span class="o">&amp;&amp;</span><span class="sr">/^[\w\-]+\/[\w\-]+\+xml$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">resolveMode</span><span class="p">(</span><span class="s2">&quot;application/xml&quot;</span><span class="p">);</span><span class="k">return</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">b</span><span class="o">?</span><span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="nx">b</span><span class="p">}</span><span class="o">:</span><span class="nx">b</span><span class="o">||</span><span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;null&quot;</span><span class="p">}},</span><span class="nx">a</span><span class="p">.</span><span class="nx">getMode</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">resolveMode</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">be</span><span class="p">[</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getMode</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;text/plain&quot;</span><span class="p">);</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">de</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">de</span><span class="p">[</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="p">];</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">g</span> <span class="k">in</span> <span class="nx">f</span><span class="p">)</span><span class="nx">f</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nx">g</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="p">[</span><span class="nx">g</span><span class="p">]),</span><span class="nx">e</span><span class="p">[</span><span class="nx">g</span><span class="p">]</span><span class="o">=</span><span class="nx">f</span><span class="p">[</span><span class="nx">g</span><span class="p">])}</span><span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="nx">e</span><span class="p">},</span><span class="nx">a</span><span class="p">.</span><span class="nx">defineMode</span><span class="p">(</span><span class="s2">&quot;null&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="p">{</span><span class="nx">token</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">skipToEnd</span><span class="p">()}}}),</span><span class="nx">a</span><span class="p">.</span><span class="nx">defineMIME</span><span class="p">(</span><span class="s2">&quot;text/plain&quot;</span><span class="p">,</span><span class="s2">&quot;null&quot;</span><span class="p">);</span><span class="kd">var</span> <span class="nx">de</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">modeExtensions</span><span class="o">=</span><span class="p">{};</span><span class="nx">a</span><span class="p">.</span><span class="nx">extendMode</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">de</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">de</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">:</span><span class="nx">de</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="p">{};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span><span class="nx">b</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">])},</span><span class="nx">a</span><span class="p">.</span><span class="nx">defineExtension</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="nx">c</span><span class="p">},</span><span class="nx">a</span><span class="p">.</span><span class="nx">defineOption</span><span class="o">=</span><span class="nx">Sb</span><span class="p">;</span><span class="kd">var</span> <span class="nx">ee</span><span class="o">=</span><span class="p">[];</span><span class="nx">a</span><span class="p">.</span><span class="nx">defineInitHook</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">ee</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="nx">a</span><span class="p">.</span><span class="nx">copyState</span><span class="o">=</span><span class="nx">Tb</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">startState</span><span class="o">=</span><span class="nx">Ub</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">innerMode</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(;</span><span class="nx">a</span><span class="p">.</span><span class="nx">innerMode</span><span class="p">;){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">innerMode</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="nx">b</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">state</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">mode</span><span class="p">}</span><span class="k">return</span> <span class="nx">c</span><span class="o">||</span><span class="p">{</span><span class="nx">mode</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">state</span><span class="o">:</span><span class="nx">b</span><span class="p">}};</span><span class="kd">var</span> <span class="nx">fe</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">commands</span><span class="o">=</span><span class="p">{</span><span class="nx">selectAll</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">setSelection</span><span class="p">({</span><span class="nx">line</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">},{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">lineCount</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">})},</span><span class="nx">killLine</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getCursor</span><span class="p">(</span><span class="o">!</span><span class="mi">0</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getCursor</span><span class="p">(</span><span class="o">!</span><span class="mi">1</span><span class="p">),</span><span class="nx">d</span><span class="o">=!</span><span class="nx">zb</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span><span class="nx">d</span><span class="o">||</span><span class="nx">a</span><span class="p">.</span><span class="nx">getLine</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">).</span><span class="nx">length</span><span class="o">!=</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">replaceRange</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="o">?</span><span class="nx">c</span><span class="o">:</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">},</span><span class="s2">&quot;delete&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">replaceRange</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">},</span><span class="s2">&quot;delete&quot;</span><span class="p">)},</span><span class="nx">deleteLine</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getCursor</span><span class="p">().</span><span class="nx">line</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">replaceRange</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">},{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">},</span><span class="s2">&quot;delete&quot;</span><span class="p">)},</span><span class="nx">undo</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">undo</span><span class="p">()},</span><span class="nx">redo</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">redo</span><span class="p">()},</span><span class="nx">goDocStart</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">extendSelection</span><span class="p">({</span><span class="nx">line</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">})},</span><span class="nx">goDocEnd</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">extendSelection</span><span class="p">({</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">lineCount</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">})},</span><span class="nx">goLineStart</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">extendSelection</span><span class="p">(</span><span class="nx">sd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">getCursor</span><span class="p">().</span><span class="nx">line</span><span class="p">))},</span><span class="nx">goLineStartSmart</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getCursor</span><span class="p">(),</span><span class="nx">c</span><span class="o">=</span><span class="nx">sd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getLineHandle</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">Jc</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="mi">0</span><span class="o">!=</span><span class="nx">e</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">level</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">extendSelection</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="sr">/\S/</span><span class="p">)),</span><span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="o">&lt;=</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">extendSelection</span><span class="p">({</span><span class="nx">line</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">g</span><span class="o">?</span><span class="mi">0</span><span class="o">:</span><span class="nx">f</span><span class="p">})}},</span><span class="nx">goLineEnd</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">extendSelection</span><span class="p">(</span><span class="nx">td</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">getCursor</span><span class="p">().</span><span class="nx">line</span><span class="p">))},</span><span class="nx">goLineUp</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">moveV</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;line&quot;</span><span class="p">)},</span><span class="nx">goLineDown</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">moveV</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;line&quot;</span><span class="p">)},</span><span class="nx">goPageUp</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">moveV</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;page&quot;</span><span class="p">)},</span><span class="nx">goPageDown</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">moveV</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;page&quot;</span><span class="p">)},</span><span class="nx">goCharLeft</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">moveH</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;char&quot;</span><span class="p">)},</span><span class="nx">goCharRight</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">moveH</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;char&quot;</span><span class="p">)},</span><span class="nx">goColumnLeft</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">moveH</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;column&quot;</span><span class="p">)},</span><span class="nx">goColumnRight</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">moveH</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;column&quot;</span><span class="p">)},</span><span class="nx">goWordLeft</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">moveH</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;word&quot;</span><span class="p">)},</span><span class="nx">goWordRight</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">moveH</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;word&quot;</span><span class="p">)},</span><span class="nx">delCharBefore</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">deleteH</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;char&quot;</span><span class="p">)},</span><span class="nx">delCharAfter</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">deleteH</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;char&quot;</span><span class="p">)},</span><span class="nx">delWordBefore</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">deleteH</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;word&quot;</span><span class="p">)},</span><span class="nx">delWordAfter</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">deleteH</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;word&quot;</span><span class="p">)},</span><span class="nx">indentAuto</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">indentSelection</span><span class="p">(</span><span class="s2">&quot;smart&quot;</span><span class="p">)},</span><span class="nx">indentMore</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">indentSelection</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">)},</span><span class="nx">indentLess</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">indentSelection</span><span class="p">(</span><span class="s2">&quot;subtract&quot;</span><span class="p">)},</span><span class="nx">insertTab</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">replaceSelection</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;end&quot;</span><span class="p">,</span><span class="s2">&quot;input&quot;</span><span class="p">)},</span><span class="nx">defaultTab</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">somethingSelected</span><span class="p">()</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">indentSelection</span><span class="p">(</span><span class="s2">&quot;add&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">replaceSelection</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span><span class="s2">&quot;end&quot;</span><span class="p">,</span><span class="s2">&quot;input&quot;</span><span class="p">)},</span><span class="nx">transposeChars</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getCursor</span><span class="p">(),</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getLine</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">);</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="o">&lt;</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">replaceRange</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="p">)</span><span class="o">+</span><span class="nx">c</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="o">-</span><span class="mi">1</span><span class="p">),{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="o">-</span><span class="mi">1</span><span class="p">},{</span><span class="nx">line</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">ch</span><span class="o">+</span><span class="mi">1</span><span class="p">})},</span><span class="nx">newlineAndIndent</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">V</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">a</span><span class="p">.</span><span class="nx">replaceSelection</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">,</span><span class="s2">&quot;end&quot;</span><span class="p">,</span><span class="s2">&quot;input&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">indentLine</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">getCursor</span><span class="p">().</span><span class="nx">line</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)})()},</span><span class="nx">toggleOverwrite</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">toggleOverwrite</span><span class="p">()}},</span><span class="nx">ge</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">keyMap</span><span class="o">=</span><span class="p">{};</span><span class="nx">ge</span><span class="p">.</span><span class="nx">basic</span><span class="o">=</span><span class="p">{</span><span class="nx">Left</span><span class="o">:</span><span class="s2">&quot;goCharLeft&quot;</span><span class="p">,</span><span class="nx">Right</span><span class="o">:</span><span class="s2">&quot;goCharRight&quot;</span><span class="p">,</span><span class="nx">Up</span><span class="o">:</span><span class="s2">&quot;goLineUp&quot;</span><span class="p">,</span><span class="nx">Down</span><span class="o">:</span><span class="s2">&quot;goLineDown&quot;</span><span class="p">,</span><span class="nx">End</span><span class="o">:</span><span class="s2">&quot;goLineEnd&quot;</span><span class="p">,</span><span class="nx">Home</span><span class="o">:</span><span class="s2">&quot;goLineStartSmart&quot;</span><span class="p">,</span><span class="nx">PageUp</span><span class="o">:</span><span class="s2">&quot;goPageUp&quot;</span><span class="p">,</span><span class="nx">PageDown</span><span class="o">:</span><span class="s2">&quot;goPageDown&quot;</span><span class="p">,</span><span class="nx">Delete</span><span class="o">:</span><span class="s2">&quot;delCharAfter&quot;</span><span class="p">,</span><span class="nx">Backspace</span><span class="o">:</span><span class="s2">&quot;delCharBefore&quot;</span><span class="p">,</span><span class="nx">Tab</span><span class="o">:</span><span class="s2">&quot;defaultTab&quot;</span><span class="p">,</span><span class="s2">&quot;Shift-Tab&quot;</span><span class="o">:</span><span class="s2">&quot;indentAuto&quot;</span><span class="p">,</span><span class="nx">Enter</span><span class="o">:</span><span class="s2">&quot;newlineAndIndent&quot;</span><span class="p">,</span><span class="nx">Insert</span><span class="o">:</span><span class="s2">&quot;toggleOverwrite&quot;</span><span class="p">},</span><span class="nx">ge</span><span class="p">.</span><span class="nx">pcDefault</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Ctrl-A&quot;</span><span class="o">:</span><span class="s2">&quot;selectAll&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-D&quot;</span><span class="o">:</span><span class="s2">&quot;deleteLine&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-Z&quot;</span><span class="o">:</span><span class="s2">&quot;undo&quot;</span><span class="p">,</span><span class="s2">&quot;Shift-Ctrl-Z&quot;</span><span class="o">:</span><span class="s2">&quot;redo&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-Y&quot;</span><span class="o">:</span><span class="s2">&quot;redo&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-Home&quot;</span><span class="o">:</span><span class="s2">&quot;goDocStart&quot;</span><span class="p">,</span><span class="s2">&quot;Alt-Up&quot;</span><span class="o">:</span><span class="s2">&quot;goDocStart&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-End&quot;</span><span class="o">:</span><span class="s2">&quot;goDocEnd&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-Down&quot;</span><span class="o">:</span><span class="s2">&quot;goDocEnd&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-Left&quot;</span><span class="o">:</span><span class="s2">&quot;goWordLeft&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-Right&quot;</span><span class="o">:</span><span class="s2">&quot;goWordRight&quot;</span><span class="p">,</span><span class="s2">&quot;Alt-Left&quot;</span><span class="o">:</span><span class="s2">&quot;goLineStart&quot;</span><span class="p">,</span><span class="s2">&quot;Alt-Right&quot;</span><span class="o">:</span><span class="s2">&quot;goLineEnd&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-Backspace&quot;</span><span class="o">:</span><span class="s2">&quot;delWordBefore&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-Delete&quot;</span><span class="o">:</span><span class="s2">&quot;delWordAfter&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-S&quot;</span><span class="o">:</span><span class="s2">&quot;save&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-F&quot;</span><span class="o">:</span><span class="s2">&quot;find&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-G&quot;</span><span class="o">:</span><span class="s2">&quot;findNext&quot;</span><span class="p">,</span><span class="s2">&quot;Shift-Ctrl-G&quot;</span><span class="o">:</span><span class="s2">&quot;findPrev&quot;</span><span class="p">,</span><span class="s2">&quot;Shift-Ctrl-F&quot;</span><span class="o">:</span><span class="s2">&quot;replace&quot;</span><span class="p">,</span><span class="s2">&quot;Shift-Ctrl-R&quot;</span><span class="o">:</span><span class="s2">&quot;replaceAll&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-[&quot;</span><span class="o">:</span><span class="s2">&quot;indentLess&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-]&quot;</span><span class="o">:</span><span class="s2">&quot;indentMore&quot;</span><span class="p">,</span><span class="nx">fallthrough</span><span class="o">:</span><span class="s2">&quot;basic&quot;</span><span class="p">},</span><span class="nx">ge</span><span class="p">.</span><span class="nx">macDefault</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Cmd-A&quot;</span><span class="o">:</span><span class="s2">&quot;selectAll&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-D&quot;</span><span class="o">:</span><span class="s2">&quot;deleteLine&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-Z&quot;</span><span class="o">:</span><span class="s2">&quot;undo&quot;</span><span class="p">,</span><span class="s2">&quot;Shift-Cmd-Z&quot;</span><span class="o">:</span><span class="s2">&quot;redo&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-Y&quot;</span><span class="o">:</span><span class="s2">&quot;redo&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-Up&quot;</span><span class="o">:</span><span class="s2">&quot;goDocStart&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-End&quot;</span><span class="o">:</span><span class="s2">&quot;goDocEnd&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-Down&quot;</span><span class="o">:</span><span class="s2">&quot;goDocEnd&quot;</span><span class="p">,</span><span class="s2">&quot;Alt-Left&quot;</span><span class="o">:</span><span class="s2">&quot;goWordLeft&quot;</span><span class="p">,</span><span class="s2">&quot;Alt-Right&quot;</span><span class="o">:</span><span class="s2">&quot;goWordRight&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-Left&quot;</span><span class="o">:</span><span class="s2">&quot;goLineStart&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-Right&quot;</span><span class="o">:</span><span class="s2">&quot;goLineEnd&quot;</span><span class="p">,</span><span class="s2">&quot;Alt-Backspace&quot;</span><span class="o">:</span><span class="s2">&quot;delWordBefore&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-Alt-Backspace&quot;</span><span class="o">:</span><span class="s2">&quot;delWordAfter&quot;</span><span class="p">,</span><span class="s2">&quot;Alt-Delete&quot;</span><span class="o">:</span><span class="s2">&quot;delWordAfter&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-S&quot;</span><span class="o">:</span><span class="s2">&quot;save&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-F&quot;</span><span class="o">:</span><span class="s2">&quot;find&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-G&quot;</span><span class="o">:</span><span class="s2">&quot;findNext&quot;</span><span class="p">,</span><span class="s2">&quot;Shift-Cmd-G&quot;</span><span class="o">:</span><span class="s2">&quot;findPrev&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-Alt-F&quot;</span><span class="o">:</span><span class="s2">&quot;replace&quot;</span><span class="p">,</span><span class="s2">&quot;Shift-Cmd-Alt-F&quot;</span><span class="o">:</span><span class="s2">&quot;replaceAll&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-[&quot;</span><span class="o">:</span><span class="s2">&quot;indentLess&quot;</span><span class="p">,</span><span class="s2">&quot;Cmd-]&quot;</span><span class="o">:</span><span class="s2">&quot;indentMore&quot;</span><span class="p">,</span><span class="nx">fallthrough</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;basic&quot;</span><span class="p">,</span><span class="s2">&quot;emacsy&quot;</span><span class="p">]},</span><span class="nx">ge</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span><span class="o">=</span><span class="nx">Sd</span><span class="o">?</span><span class="nx">ge</span><span class="p">.</span><span class="nx">macDefault</span><span class="o">:</span><span class="nx">ge</span><span class="p">.</span><span class="nx">pcDefault</span><span class="p">,</span><span class="nx">ge</span><span class="p">.</span><span class="nx">emacsy</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Ctrl-F&quot;</span><span class="o">:</span><span class="s2">&quot;goCharRight&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-B&quot;</span><span class="o">:</span><span class="s2">&quot;goCharLeft&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-P&quot;</span><span class="o">:</span><span class="s2">&quot;goLineUp&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-N&quot;</span><span class="o">:</span><span class="s2">&quot;goLineDown&quot;</span><span class="p">,</span><span class="s2">&quot;Alt-F&quot;</span><span class="o">:</span><span class="s2">&quot;goWordRight&quot;</span><span class="p">,</span><span class="s2">&quot;Alt-B&quot;</span><span class="o">:</span><span class="s2">&quot;goWordLeft&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-A&quot;</span><span class="o">:</span><span class="s2">&quot;goLineStart&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-E&quot;</span><span class="o">:</span><span class="s2">&quot;goLineEnd&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-V&quot;</span><span class="o">:</span><span class="s2">&quot;goPageDown&quot;</span><span class="p">,</span><span class="s2">&quot;Shift-Ctrl-V&quot;</span><span class="o">:</span><span class="s2">&quot;goPageUp&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-D&quot;</span><span class="o">:</span><span class="s2">&quot;delCharAfter&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-H&quot;</span><span class="o">:</span><span class="s2">&quot;delCharBefore&quot;</span><span class="p">,</span><span class="s2">&quot;Alt-D&quot;</span><span class="o">:</span><span class="s2">&quot;delWordAfter&quot;</span><span class="p">,</span><span class="s2">&quot;Alt-Backspace&quot;</span><span class="o">:</span><span class="s2">&quot;delWordBefore&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-K&quot;</span><span class="o">:</span><span class="s2">&quot;killLine&quot;</span><span class="p">,</span><span class="s2">&quot;Ctrl-T&quot;</span><span class="o">:</span><span class="s2">&quot;transposeChars&quot;</span><span class="p">},</span><span class="nx">a</span><span class="p">.</span><span class="nx">isModifierKey</span><span class="o">=</span><span class="nx">Xb</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">fromTextArea</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">function</span> <span class="nx">d</span><span class="p">(){</span><span class="nx">b</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="nx">i</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()}</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="p">{}),</span><span class="nx">c</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span><span class="o">!</span><span class="nx">c</span><span class="p">.</span><span class="nx">tabindex</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">tabindex</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">tabindex</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">tabindex</span><span class="p">),</span><span class="kc">null</span><span class="o">==</span><span class="nx">c</span><span class="p">.</span><span class="nx">autofocus</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span><span class="k">try</span><span class="p">{</span><span class="nx">e</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">f</span><span class="p">){}</span><span class="nx">c</span><span class="p">.</span><span class="nx">autofocus</span><span class="o">=</span><span class="nx">e</span><span class="o">==</span><span class="nx">b</span><span class="o">||</span><span class="kc">null</span><span class="o">!=</span><span class="nx">b</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;autofocus&quot;</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="o">==</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">form</span><span class="p">){</span><span class="nx">Uc</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">form</span><span class="p">,</span><span class="s2">&quot;submit&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">);</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">form</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">submit</span><span class="p">;</span><span class="k">try</span><span class="p">{</span><span class="nx">g</span><span class="p">.</span><span class="nx">submit</span><span class="o">=</span><span class="kd">function</span> <span class="nx">j</span><span class="p">(){</span><span class="nx">d</span><span class="p">(),</span><span class="nx">g</span><span class="p">.</span><span class="nx">submit</span><span class="o">=</span><span class="nx">h</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">submit</span><span class="p">(),</span><span class="nx">g</span><span class="p">.</span><span class="nx">submit</span><span class="o">=</span><span class="nx">j</span><span class="p">}}</span><span class="k">catch</span><span class="p">(</span><span class="nx">f</span><span class="p">){}}</span><span class="nx">b</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">b</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)},</span><span class="nx">c</span><span class="p">);</span><span class="k">return</span> <span class="nx">i</span><span class="p">.</span><span class="nx">save</span><span class="o">=</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">.</span><span class="nx">getTextArea</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">b</span><span class="p">},</span><span class="nx">i</span><span class="p">.</span><span class="nx">toTextArea</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">d</span><span class="p">(),</span><span class="nx">b</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">i</span><span class="p">.</span><span class="nx">getWrapperElement</span><span class="p">()),</span><span class="nx">b</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">form</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">Vc</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">form</span><span class="p">,</span><span class="s2">&quot;submit&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">),</span><span class="s2">&quot;function&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">b</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">submit</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">submit</span><span class="o">=</span><span class="nx">h</span><span class="p">))},</span><span class="nx">i</span><span class="p">},</span><span class="nx">Yb</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="p">{</span><span class="nx">eol</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">&gt;=</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">length</span><span class="p">},</span><span class="nx">sol</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="mi">0</span><span class="o">==</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">},</span><span class="nx">peek</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">)</span><span class="o">||</span><span class="k">void</span> <span class="mi">0</span><span class="p">},</span><span class="nx">next</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">&lt;</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">++</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">},</span><span class="nx">eat</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">)</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="o">==</span><span class="nx">a</span><span class="p">;</span><span class="k">else</span> <span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">test</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">));</span><span class="k">return</span> <span class="nx">c</span><span class="o">?</span><span class="p">(</span><span class="o">++</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">},</span><span class="nx">eatWhile</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">eat</span><span class="p">(</span><span class="nx">a</span><span class="p">););</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">},</span><span class="nx">eatSpace</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">;</span><span class="sr">/[\s\u00a0]/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">));)</span><span class="o">++</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">},</span><span class="nx">skipToEnd</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">length</span><span class="p">},</span><span class="nx">skipTo</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">);</span><span class="k">return</span> <span class="nx">b</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">?</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">},</span><span class="nx">backUp</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">-=</span><span class="nx">a</span><span class="p">},</span><span class="nx">column</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">$c</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">tabSize</span><span class="p">)},</span><span class="nx">indentation</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">$c</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">tabSize</span><span class="p">)},</span><span class="nx">match</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="o">!=</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span> <span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">index</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="kc">null</span><span class="o">:</span><span class="p">(</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="o">!==!</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">+=</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">),</span><span class="nx">d</span><span class="p">)}</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">c</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="o">:</span><span class="nx">a</span><span class="p">};</span><span class="k">return</span> <span class="nx">e</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">e</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">)</span><span class="o">==</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">?</span><span class="p">(</span><span class="nx">b</span><span class="o">!==!</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">+=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">},</span><span class="nx">current</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">string</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">)}},</span><span class="nx">a</span><span class="p">.</span><span class="nx">StringStream</span><span class="o">=</span><span class="nx">Yb</span><span class="p">,</span><span class="nx">Zb</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clear</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">explicitlyCleared</span><span class="p">){</span><span class="nx">T</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">b</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">[</span><span class="nx">c</span><span class="p">],</span><span class="nx">e</span><span class="o">=</span><span class="nx">_b</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">,</span><span class="k">this</span><span class="p">);</span><span class="kc">null</span><span class="o">!=</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">Gc</span><span class="p">(</span><span class="nx">d</span><span class="p">)),</span><span class="nx">d</span><span class="p">.</span><span class="nx">markedSpans</span><span class="o">=</span><span class="nx">ac</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">,</span><span class="nx">e</span><span class="p">),</span><span class="kc">null</span><span class="o">!=</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">?</span><span class="nx">a</span><span class="o">=</span><span class="nx">Gc</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">collapsed</span><span class="o">&amp;&amp;!</span><span class="nx">kc</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">Fc</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">R</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">.</span><span class="nx">display</span><span class="p">))}</span><span class="kc">null</span><span class="o">!=</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">W</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">explicitlyCleared</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">collapsed</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">cantEdit</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">.</span><span class="nx">view</span><span class="p">.</span><span class="nx">cantEdit</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="nx">Hb</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">)),</span><span class="nx">U</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">),</span><span class="nx">Xc</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">,</span><span class="k">this</span><span class="p">,</span><span class="s2">&quot;clear&quot;</span><span class="p">)}},</span><span class="nx">Zb</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">find</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">c</span><span class="o">&lt;</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">[</span><span class="nx">c</span><span class="p">],</span><span class="nx">e</span><span class="o">=</span><span class="nx">_b</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">markedSpans</span><span class="p">,</span><span class="k">this</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="kc">null</span><span class="o">!=</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">||</span><span class="kc">null</span><span class="o">!=</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">Gc</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span><span class="kc">null</span><span class="o">!=</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">from</span><span class="p">}),</span><span class="kc">null</span><span class="o">!=</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">e</span><span class="p">.</span><span class="nx">to</span><span class="p">})}}</span><span class="k">return</span><span class="s2">&quot;bookmark&quot;</span><span class="o">==</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="o">?</span><span class="nx">a</span><span class="o">:</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">b</span><span class="p">}},</span><span class="nb">window</span><span class="p">.</span><span class="nx">lineIsHidden</span><span class="o">=</span><span class="nx">kc</span><span class="p">;</span><span class="kd">var</span> <span class="nx">he</span><span class="o">=</span><span class="p">{},</span><span class="nx">ie</span><span class="o">=</span><span class="sr">/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g</span><span class="p">;</span><span class="nx">Cc</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="p">{</span><span class="nx">chunkSize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">},</span><span class="nx">remove</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">;</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">d</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">[</span><span class="nx">d</span><span class="p">];</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">-=</span><span class="nx">f</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span><span class="nx">tc</span><span class="p">(</span><span class="nx">f</span><span class="p">),</span><span class="nx">Xc</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="s2">&quot;delete&quot;</span><span class="p">)}</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)},</span><span class="nx">collapse</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">splice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">a</span><span class="p">,[</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="mi">0</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">))},</span><span class="nx">insertHeight</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">+=</span><span class="nx">c</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">a</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">b</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">d</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">)</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">].</span><span class="nx">parent</span><span class="o">=</span><span class="k">this</span><span class="p">},</span><span class="nx">iterN</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">;</span><span class="nx">d</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">;</span><span class="o">++</span><span class="nx">a</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">[</span><span class="nx">a</span><span class="p">]))</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">}},</span><span class="nx">Dc</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="p">{</span><span class="nx">chunkSize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="p">},</span><span class="nx">remove</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="o">-=</span><span class="nx">b</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">f</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">chunkSize</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">f</span><span class="o">-</span><span class="nx">a</span><span class="p">),</span><span class="nx">h</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">-=</span><span class="nx">h</span><span class="o">-</span><span class="nx">e</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span><span class="nx">f</span><span class="o">==</span><span class="nx">g</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">d</span><span class="o">--</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="nx">e</span><span class="p">.</span><span class="nx">parent</span><span class="o">=</span><span class="kc">null</span><span class="p">),</span><span class="mi">0</span><span class="o">==</span><span class="p">(</span><span class="nx">b</span><span class="o">-=</span><span class="nx">g</span><span class="p">))</span><span class="k">break</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">}</span><span class="k">else</span> <span class="nx">a</span><span class="o">-=</span><span class="nx">f</span><span class="p">}</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="o">-</span><span class="nx">b</span><span class="o">&lt;</span><span class="mi">25</span><span class="p">){</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="p">[];</span><span class="k">this</span><span class="p">.</span><span class="nx">collapse</span><span class="p">(</span><span class="nx">i</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="o">=</span><span class="p">[</span><span class="k">new</span> <span class="nx">Cc</span><span class="p">(</span><span class="nx">i</span><span class="p">)],</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parent</span><span class="o">=</span><span class="k">this</span><span class="p">}},</span><span class="nx">collapse</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">c</span><span class="o">&gt;</span><span class="nx">b</span><span class="p">;</span><span class="o">++</span><span class="nx">b</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">b</span><span class="p">].</span><span class="nx">collapse</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="nx">insert</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">d</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">)</span><span class="nx">c</span><span class="o">+=</span><span class="nx">b</span><span class="p">[</span><span class="nx">d</span><span class="p">].</span><span class="nx">height</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">insertHeight</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">)},</span><span class="nx">insertHeight</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="o">+=</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="o">+=</span><span class="nx">c</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">d</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">g</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">chunkSize</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="o">&gt;=</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">insertHeight</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">),</span><span class="nx">f</span><span class="p">.</span><span class="nx">lines</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">50</span><span class="p">){</span><span class="k">for</span><span class="p">(;</span><span class="nx">f</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">50</span><span class="p">;){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span><span class="mi">25</span><span class="p">),</span><span class="nx">i</span><span class="o">=</span><span class="k">new</span> <span class="nx">Cc</span><span class="p">(</span><span class="nx">h</span><span class="p">);</span><span class="nx">f</span><span class="p">.</span><span class="nx">height</span><span class="o">-=</span><span class="nx">i</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">d</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">i</span><span class="p">),</span><span class="nx">i</span><span class="p">.</span><span class="nx">parent</span><span class="o">=</span><span class="k">this</span><span class="p">}</span><span class="k">this</span><span class="p">.</span><span class="nx">maybeSpill</span><span class="p">()}</span><span class="k">break</span><span class="p">}</span><span class="nx">a</span><span class="o">-=</span><span class="nx">g</span><span class="p">}},</span><span class="nx">maybeSpill</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="o">&lt;=</span><span class="mi">10</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">do</span><span class="p">{</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="k">new</span> <span class="nx">Dc</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">parent</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">size</span><span class="o">-=</span><span class="nx">c</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">height</span><span class="o">-=</span><span class="nx">c</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">cd</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">d</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="p">)}</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nx">Dc</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">children</span><span class="p">);</span><span class="nx">e</span><span class="p">.</span><span class="nx">parent</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">children</span><span class="o">=</span><span class="p">[</span><span class="nx">e</span><span class="p">,</span><span class="nx">c</span><span class="p">],</span><span class="nx">a</span><span class="o">=</span><span class="nx">e</span><span class="p">}</span><span class="nx">c</span><span class="p">.</span><span class="nx">parent</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">parent</span><span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">maybeSpill</span><span class="p">()}},</span><span class="nx">iter</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">iterN</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="o">-</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">)},</span><span class="nx">iterN</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">&gt;</span><span class="nx">d</span><span class="p">;</span><span class="o">++</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="nx">d</span><span class="p">],</span><span class="nx">g</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">chunkSize</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">g</span><span class="o">-</span><span class="nx">a</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">iterN</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">c</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="o">==</span><span class="p">(</span><span class="nx">b</span><span class="o">-=</span><span class="nx">h</span><span class="p">))</span><span class="k">break</span><span class="p">;</span><span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">}</span><span class="k">else</span> <span class="nx">a</span><span class="o">-=</span><span class="nx">g</span><span class="p">}}},</span><span class="nx">a</span><span class="p">.</span><span class="nx">e_stop</span><span class="o">=</span><span class="nx">Qc</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">e_preventDefault</span><span class="o">=</span><span class="nx">Oc</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">e_stopPropagation</span><span class="o">=</span><span class="nx">Pc</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">on</span><span class="o">=</span><span class="nx">Uc</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">off</span><span class="o">=</span><span class="nx">Vc</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">signal</span><span class="o">=</span><span class="nx">Wc</span><span class="p">;</span><span class="kd">var</span> <span class="nx">je</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="nx">ke</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">Pass</span><span class="o">=</span><span class="p">{</span><span class="nx">toString</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="s2">&quot;CodeMirror.Pass&quot;</span><span class="p">}};</span><span class="nx">Zc</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="p">{</span><span class="nx">set</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">clearTimeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="o">=</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">)}},</span><span class="nx">a</span><span class="p">.</span><span class="nx">countColumn</span><span class="o">=</span><span class="nx">$c</span><span class="p">;</span><span class="kd">var</span> <span class="nx">le</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">],</span><span class="nx">me</span><span class="o">=</span><span class="sr">/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/</span><span class="p">,</span><span class="nx">ne</span><span class="o">=</span><span class="sr">/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/</span><span class="p">,</span><span class="nx">oe</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="nx">Gd</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span><span class="k">return</span><span class="s2">&quot;draggable&quot;</span><span class="k">in</span> <span class="nx">a</span><span class="o">||</span><span class="s2">&quot;dragDrop&quot;</span><span class="k">in</span> <span class="nx">a</span><span class="p">}(),</span><span class="nx">pe</span><span class="o">=</span><span class="sr">/^$/</span><span class="p">;</span><span class="nx">Dd</span><span class="o">?</span><span class="nx">pe</span><span class="o">=</span><span class="sr">/$&#39;/</span><span class="o">:</span><span class="nx">Ld</span><span class="o">?</span><span class="nx">pe</span><span class="o">=</span><span class="sr">/\-[^ \-?]|\?[^ !&#39;\&quot;\),.\-\/:;\?\]\}]/</span><span class="o">:</span><span class="nx">Jd</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">pe</span><span class="o">=</span><span class="sr">/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!&#39;\&quot;\),\/]|[\.!\&quot;#&amp;%\)*+,:;=&gt;\]|\}~][\(\{\[&lt;]|\$&#39;/</span><span class="p">);</span><span class="kd">var</span> <span class="nx">qe</span><span class="p">,</span><span class="nx">re</span><span class="p">,</span><span class="nx">se</span><span class="o">=</span><span class="mi">3</span><span class="o">!=</span><span class="s2">&quot;\n\nb&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\n/</span><span class="p">).</span><span class="nx">length</span><span class="o">?</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">d</span><span class="o">&gt;=</span><span class="nx">b</span><span class="p">;){</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="o">-</span><span class="mi">1</span><span class="o">==</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;\r&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">e</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">?</span><span class="nx">e</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="nx">e</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;\r&quot;</span><span class="p">);</span><span class="o">-</span><span class="mi">1</span><span class="o">!=</span><span class="nx">g</span><span class="o">?</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">g</span><span class="p">)),</span><span class="nx">b</span><span class="o">+=</span><span class="nx">g</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">f</span><span class="p">),</span><span class="nx">b</span><span class="o">=</span><span class="nx">e</span><span class="o">+</span><span class="mi">1</span><span class="p">)}</span><span class="k">return</span> <span class="nx">c</span><span class="p">}</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\r\n?|\n/</span><span class="p">)};</span><span class="nx">a</span><span class="p">.</span><span class="nx">splitLines</span><span class="o">=</span><span class="nx">se</span><span class="p">;</span><span class="kd">var</span> <span class="nx">te</span><span class="o">=</span><span class="nb">window</span><span class="p">.</span><span class="nx">getSelection</span><span class="o">?</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">selectionStart</span><span class="o">!=</span><span class="nx">a</span><span class="p">.</span><span class="nx">selectionEnd</span><span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">}}</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">selection</span><span class="p">.</span><span class="nx">createRange</span><span class="p">()}</span><span class="k">catch</span><span class="p">(</span><span class="nx">c</span><span class="p">){}</span><span class="k">return</span> <span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">()</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="mi">0</span><span class="o">!=</span><span class="nx">b</span><span class="p">.</span><span class="nx">compareEndPoints</span><span class="p">(</span><span class="s2">&quot;StartToEnd&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span><span class="o">:!</span><span class="mi">1</span><span class="p">},</span><span class="nx">ue</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">hd</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span><span class="k">return</span><span class="s2">&quot;oncopy&quot;</span><span class="k">in</span> <span class="nx">a</span><span class="o">?!</span><span class="mi">0</span><span class="o">:</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;oncopy&quot;</span><span class="p">,</span><span class="s2">&quot;return;&quot;</span><span class="p">),</span><span class="s2">&quot;function&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">a</span><span class="p">.</span><span class="nx">oncopy</span><span class="p">)}(),</span><span class="nx">ve</span><span class="o">=</span><span class="p">{</span><span class="mi">3</span><span class="o">:</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span><span class="mi">8</span><span class="o">:</span><span class="s2">&quot;Backspace&quot;</span><span class="p">,</span><span class="mi">9</span><span class="o">:</span><span class="s2">&quot;Tab&quot;</span><span class="p">,</span><span class="mi">13</span><span class="o">:</span><span class="s2">&quot;Enter&quot;</span><span class="p">,</span><span class="mi">16</span><span class="o">:</span><span class="s2">&quot;Shift&quot;</span><span class="p">,</span><span class="mi">17</span><span class="o">:</span><span class="s2">&quot;Ctrl&quot;</span><span class="p">,</span><span class="mi">18</span><span class="o">:</span><span class="s2">&quot;Alt&quot;</span><span class="p">,</span><span class="mi">19</span><span class="o">:</span><span class="s2">&quot;Pause&quot;</span><span class="p">,</span><span class="mi">20</span><span class="o">:</span><span class="s2">&quot;CapsLock&quot;</span><span class="p">,</span><span class="mi">27</span><span class="o">:</span><span class="s2">&quot;Esc&quot;</span><span class="p">,</span><span class="mi">32</span><span class="o">:</span><span class="s2">&quot;Space&quot;</span><span class="p">,</span><span class="mi">33</span><span class="o">:</span><span class="s2">&quot;PageUp&quot;</span><span class="p">,</span><span class="mi">34</span><span class="o">:</span><span class="s2">&quot;PageDown&quot;</span><span class="p">,</span><span class="mi">35</span><span class="o">:</span><span class="s2">&quot;End&quot;</span><span class="p">,</span><span class="mi">36</span><span class="o">:</span><span class="s2">&quot;Home&quot;</span><span class="p">,</span><span class="mi">37</span><span class="o">:</span><span class="s2">&quot;Left&quot;</span><span class="p">,</span><span class="mi">38</span><span class="o">:</span><span class="s2">&quot;Up&quot;</span><span class="p">,</span><span class="mi">39</span><span class="o">:</span><span class="s2">&quot;Right&quot;</span><span class="p">,</span><span class="mi">40</span><span class="o">:</span><span class="s2">&quot;Down&quot;</span><span class="p">,</span><span class="mi">44</span><span class="o">:</span><span class="s2">&quot;PrintScrn&quot;</span><span class="p">,</span><span class="mi">45</span><span class="o">:</span><span class="s2">&quot;Insert&quot;</span><span class="p">,</span><span class="mi">46</span><span class="o">:</span><span class="s2">&quot;Delete&quot;</span><span class="p">,</span><span class="mi">59</span><span class="o">:</span><span class="s2">&quot;;&quot;</span><span class="p">,</span><span class="mi">91</span><span class="o">:</span><span class="s2">&quot;Mod&quot;</span><span class="p">,</span><span class="mi">92</span><span class="o">:</span><span class="s2">&quot;Mod&quot;</span><span class="p">,</span><span class="mi">93</span><span class="o">:</span><span class="s2">&quot;Mod&quot;</span><span class="p">,</span><span class="mi">109</span><span class="o">:</span><span class="s2">&quot;-&quot;</span><span class="p">,</span><span class="mi">107</span><span class="o">:</span><span class="s2">&quot;=&quot;</span><span class="p">,</span><span class="mi">127</span><span class="o">:</span><span class="s2">&quot;Delete&quot;</span><span class="p">,</span><span class="mi">186</span><span class="o">:</span><span class="s2">&quot;;&quot;</span><span class="p">,</span><span class="mi">187</span><span class="o">:</span><span class="s2">&quot;=&quot;</span><span class="p">,</span><span class="mi">188</span><span class="o">:</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="mi">189</span><span class="o">:</span><span class="s2">&quot;-&quot;</span><span class="p">,</span><span class="mi">190</span><span class="o">:</span><span class="s2">&quot;.&quot;</span><span class="p">,</span><span class="mi">191</span><span class="o">:</span><span class="s2">&quot;/&quot;</span><span class="p">,</span><span class="mi">192</span><span class="o">:</span><span class="s2">&quot;`&quot;</span><span class="p">,</span><span class="mi">219</span><span class="o">:</span><span class="s2">&quot;[&quot;</span><span class="p">,</span><span class="mi">220</span><span class="o">:</span><span class="s2">&quot;\\&quot;</span><span class="p">,</span><span class="mi">221</span><span class="o">:</span><span class="s2">&quot;]&quot;</span><span class="p">,</span><span class="mi">222</span><span class="o">:</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="mi">63276</span><span class="o">:</span><span class="s2">&quot;PageUp&quot;</span><span class="p">,</span><span class="mi">63277</span><span class="o">:</span><span class="s2">&quot;PageDown&quot;</span><span class="p">,</span><span class="mi">63275</span><span class="o">:</span><span class="s2">&quot;End&quot;</span><span class="p">,</span><span class="mi">63273</span><span class="o">:</span><span class="s2">&quot;Home&quot;</span><span class="p">,</span><span class="mi">63234</span><span class="o">:</span><span class="s2">&quot;Left&quot;</span><span class="p">,</span><span class="mi">63232</span><span class="o">:</span><span class="s2">&quot;Up&quot;</span><span class="p">,</span><span class="mi">63235</span><span class="o">:</span><span class="s2">&quot;Right&quot;</span><span class="p">,</span><span class="mi">63233</span><span class="o">:</span><span class="s2">&quot;Down&quot;</span><span class="p">,</span><span class="mi">63302</span><span class="o">:</span><span class="s2">&quot;Insert&quot;</span><span class="p">,</span><span class="mi">63272</span><span class="o">:</span><span class="s2">&quot;Delete&quot;</span><span class="p">};</span><span class="nx">a</span><span class="p">.</span><span class="nx">keyNames</span><span class="o">=</span><span class="nx">ve</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="mi">10</span><span class="o">&gt;</span><span class="nx">a</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">)</span><span class="nx">ve</span><span class="p">[</span><span class="nx">a</span><span class="o">+</span><span class="mi">48</span><span class="p">]</span><span class="o">=</span><span class="nb">String</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="mi">65</span><span class="p">;</span><span class="mi">90</span><span class="o">&gt;=</span><span class="nx">a</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">)</span><span class="nx">ve</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">=</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="mi">12</span><span class="o">&gt;=</span><span class="nx">a</span><span class="p">;</span><span class="nx">a</span><span class="o">++</span><span class="p">)</span><span class="nx">ve</span><span class="p">[</span><span class="nx">a</span><span class="o">+</span><span class="mi">111</span><span class="p">]</span><span class="o">=</span><span class="nx">ve</span><span class="p">[</span><span class="nx">a</span><span class="o">+</span><span class="mi">63235</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;F&quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">}();</span><span class="kd">var</span> <span class="nx">we</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">function</span> <span class="nx">a</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="mi">255</span><span class="o">&gt;=</span><span class="nx">a</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="o">&gt;=</span><span class="mi">1424</span><span class="o">&amp;&amp;</span><span class="mi">1524</span><span class="o">&gt;=</span><span class="nx">a</span><span class="o">?</span><span class="s2">&quot;R&quot;</span><span class="o">:</span><span class="nx">a</span><span class="o">&gt;=</span><span class="mi">1536</span><span class="o">&amp;&amp;</span><span class="mi">1791</span><span class="o">&gt;=</span><span class="nx">a</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">a</span><span class="o">-</span><span class="mi">1536</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="o">&gt;=</span><span class="mi">1792</span><span class="o">&amp;&amp;</span><span class="mi">2220</span><span class="o">&gt;=</span><span class="nx">a</span><span class="o">?</span><span class="s2">&quot;r&quot;</span><span class="o">:</span><span class="s2">&quot;L&quot;</span><span class="p">}</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="s2">&quot;bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="s2">&quot;rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr&quot;</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="sr">/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="sr">/[stwN]/</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="sr">/[LRr]/</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="sr">/[Lb1n]/</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="sr">/[1n]/</span><span class="p">;</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="nx">j</span><span class="o">=</span><span class="p">[],</span><span class="nx">k</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">l</span><span class="p">;</span><span class="o">++</span><span class="nx">l</span><span class="p">)</span><span class="nx">j</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">l</span><span class="p">))),</span><span class="kc">null</span><span class="o">==</span><span class="nx">k</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">?</span><span class="nx">k</span><span class="o">=</span><span class="s2">&quot;L&quot;</span><span class="o">:</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">||</span><span class="s2">&quot;r&quot;</span><span class="o">==</span><span class="nx">c</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">k</span><span class="o">=</span><span class="s2">&quot;R&quot;</span><span class="p">));</span><span class="kc">null</span><span class="o">==</span><span class="nx">k</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">k</span><span class="o">=</span><span class="s2">&quot;L&quot;</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="nx">k</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">l</span><span class="p">;</span><span class="o">++</span><span class="nx">l</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">];</span><span class="s2">&quot;m&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">?</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span><span class="o">=</span><span class="nx">m</span><span class="o">:</span><span class="nx">m</span><span class="o">=</span><span class="nx">c</span><span class="p">}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="nx">k</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">l</span><span class="p">;</span><span class="o">++</span><span class="nx">l</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">];</span><span class="s2">&quot;1&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="s2">&quot;r&quot;</span><span class="o">==</span><span class="nx">n</span><span class="o">?</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;n&quot;</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;R&quot;</span><span class="p">))}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="nx">j</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;</span><span class="nx">l</span><span class="p">;</span><span class="o">++</span><span class="nx">l</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">];</span><span class="s2">&quot;+&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="s2">&quot;1&quot;</span><span class="o">==</span><span class="nx">m</span><span class="o">&amp;&amp;</span><span class="s2">&quot;1&quot;</span><span class="o">==</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">?</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="o">:</span><span class="s2">&quot;,&quot;</span><span class="o">!=</span><span class="nx">c</span><span class="o">||</span><span class="nx">m</span><span class="o">!=</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">||</span><span class="s2">&quot;1&quot;</span><span class="o">!=</span><span class="nx">m</span><span class="o">&amp;&amp;</span><span class="s2">&quot;n&quot;</span><span class="o">!=</span><span class="nx">m</span><span class="o">||</span><span class="p">(</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span><span class="o">=</span><span class="nx">m</span><span class="p">),</span><span class="nx">m</span><span class="o">=</span><span class="nx">c</span><span class="p">}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">l</span><span class="p">;</span><span class="o">++</span><span class="nx">l</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="o">==</span><span class="nx">c</span><span class="p">)</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;N&quot;</span><span class="p">;</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="o">==</span><span class="nx">c</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">o</span><span class="o">=</span><span class="nx">l</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="s2">&quot;%&quot;</span><span class="o">==</span><span class="nx">j</span><span class="p">[</span><span class="nx">o</span><span class="p">];</span><span class="o">++</span><span class="nx">o</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">p</span><span class="o">=</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="s2">&quot;!&quot;</span><span class="o">==</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">||</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="s2">&quot;1&quot;</span><span class="o">==</span><span class="nx">j</span><span class="p">[</span><span class="nx">o</span><span class="p">]</span><span class="o">?</span><span class="s2">&quot;1&quot;</span><span class="o">:</span><span class="s2">&quot;N&quot;</span><span class="p">,</span><span class="nx">q</span><span class="o">=</span><span class="nx">l</span><span class="p">;</span><span class="nx">o</span><span class="o">&gt;</span><span class="nx">q</span><span class="p">;</span><span class="o">++</span><span class="nx">q</span><span class="p">)</span><span class="nx">j</span><span class="p">[</span><span class="nx">q</span><span class="p">]</span><span class="o">=</span><span class="nx">p</span><span class="p">;</span><span class="nx">l</span><span class="o">=</span><span class="nx">o</span><span class="o">-</span><span class="mi">1</span><span class="p">}}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">n</span><span class="o">=</span><span class="nx">k</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">l</span><span class="p">;</span><span class="o">++</span><span class="nx">l</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">];</span><span class="s2">&quot;L&quot;</span><span class="o">==</span><span class="nx">n</span><span class="o">&amp;&amp;</span><span class="s2">&quot;1&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">?</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;L&quot;</span><span class="o">:</span><span class="nx">f</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">n</span><span class="o">=</span><span class="nx">c</span><span class="p">)}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">l</span><span class="p">;</span><span class="o">++</span><span class="nx">l</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">])){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">o</span><span class="o">=</span><span class="nx">l</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">o</span><span class="o">&amp;&amp;</span><span class="nx">e</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">j</span><span class="p">[</span><span class="nx">o</span><span class="p">]);</span><span class="o">++</span><span class="nx">o</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="s2">&quot;L&quot;</span><span class="o">==</span><span class="p">(</span><span class="nx">l</span><span class="o">?</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span><span class="nx">k</span><span class="p">),</span><span class="nx">s</span><span class="o">=</span><span class="s2">&quot;L&quot;</span><span class="o">==</span><span class="p">(</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;</span><span class="nx">o</span><span class="o">?</span><span class="nx">j</span><span class="p">[</span><span class="nx">o</span><span class="p">]</span><span class="o">:</span><span class="nx">k</span><span class="p">),</span><span class="nx">p</span><span class="o">=</span><span class="nx">r</span><span class="o">||</span><span class="nx">s</span><span class="o">?</span><span class="s2">&quot;L&quot;</span><span class="o">:</span><span class="s2">&quot;R&quot;</span><span class="p">,</span><span class="nx">q</span><span class="o">=</span><span class="nx">l</span><span class="p">;</span><span class="nx">o</span><span class="o">&gt;</span><span class="nx">q</span><span class="p">;</span><span class="o">++</span><span class="nx">q</span><span class="p">)</span><span class="nx">j</span><span class="p">[</span><span class="nx">q</span><span class="p">]</span><span class="o">=</span><span class="nx">p</span><span class="p">;</span><span class="nx">l</span><span class="o">=</span><span class="nx">o</span><span class="o">-</span><span class="mi">1</span><span class="p">}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">t</span><span class="p">,</span><span class="nx">u</span><span class="o">=</span><span class="p">[],</span><span class="nx">l</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">l</span><span class="p">;)</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">])){</span><span class="kd">var</span> <span class="nx">v</span><span class="o">=</span><span class="nx">l</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="o">++</span><span class="nx">l</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="nx">g</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">]);</span><span class="o">++</span><span class="nx">l</span><span class="p">);</span><span class="nx">u</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="nx">v</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">l</span><span class="p">,</span><span class="nx">level</span><span class="o">:</span><span class="mi">0</span><span class="p">})}</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">w</span><span class="o">=</span><span class="nx">l</span><span class="p">,</span><span class="nx">x</span><span class="o">=</span><span class="nx">u</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="o">++</span><span class="nx">l</span><span class="p">;</span><span class="nx">i</span><span class="o">&gt;</span><span class="nx">l</span><span class="o">&amp;&amp;</span><span class="s2">&quot;L&quot;</span><span class="o">!=</span><span class="nx">j</span><span class="p">[</span><span class="nx">l</span><span class="p">];</span><span class="o">++</span><span class="nx">l</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">q</span><span class="o">=</span><span class="nx">w</span><span class="p">;</span><span class="nx">l</span><span class="o">&gt;</span><span class="nx">q</span><span class="p">;)</span><span class="k">if</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">j</span><span class="p">[</span><span class="nx">q</span><span class="p">])){</span><span class="nx">q</span><span class="o">&gt;</span><span class="nx">w</span><span class="o">&amp;&amp;</span><span class="nx">u</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="mi">0</span><span class="p">,{</span><span class="nx">from</span><span class="o">:</span><span class="nx">w</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">q</span><span class="p">,</span><span class="nx">level</span><span class="o">:</span><span class="mi">1</span><span class="p">});</span><span class="kd">var</span> <span class="nx">y</span><span class="o">=</span><span class="nx">q</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="o">++</span><span class="nx">q</span><span class="p">;</span><span class="nx">l</span><span class="o">&gt;</span><span class="nx">q</span><span class="o">&amp;&amp;</span><span class="nx">h</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">j</span><span class="p">[</span><span class="nx">q</span><span class="p">]);</span><span class="o">++</span><span class="nx">q</span><span class="p">);</span><span class="nx">u</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="mi">0</span><span class="p">,{</span><span class="nx">from</span><span class="o">:</span><span class="nx">y</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">q</span><span class="p">,</span><span class="nx">level</span><span class="o">:</span><span class="mi">2</span><span class="p">}),</span><span class="nx">w</span><span class="o">=</span><span class="nx">q</span><span class="p">}</span><span class="k">else</span><span class="o">++</span><span class="nx">q</span><span class="p">;</span><span class="nx">l</span><span class="o">&gt;</span><span class="nx">w</span><span class="o">&amp;&amp;</span><span class="nx">u</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="mi">0</span><span class="p">,{</span><span class="nx">from</span><span class="o">:</span><span class="nx">w</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">l</span><span class="p">,</span><span class="nx">level</span><span class="o">:</span><span class="mi">1</span><span class="p">})}</span><span class="k">return</span> <span class="mi">1</span><span class="o">==</span><span class="nx">u</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">level</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">t</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^\s+/</span><span class="p">))</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">u</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">from</span><span class="o">=</span><span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">,</span><span class="nx">u</span><span class="p">.</span><span class="nx">unshift</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">,</span><span class="nx">level</span><span class="o">:</span><span class="mi">0</span><span class="p">})),</span><span class="mi">1</span><span class="o">==</span><span class="nx">ad</span><span class="p">(</span><span class="nx">u</span><span class="p">).</span><span class="nx">level</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">t</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s+$/</span><span class="p">))</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">ad</span><span class="p">(</span><span class="nx">u</span><span class="p">).</span><span class="nx">to</span><span class="o">-=</span><span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">,</span><span class="nx">u</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="nx">i</span><span class="o">-</span><span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">i</span><span class="p">,</span><span class="nx">level</span><span class="o">:</span><span class="mi">0</span><span class="p">})),</span><span class="nx">u</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">level</span><span class="o">!=</span><span class="nx">ad</span><span class="p">(</span><span class="nx">u</span><span class="p">).</span><span class="nx">level</span><span class="o">&amp;&amp;</span><span class="nx">u</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">from</span><span class="o">:</span><span class="nx">i</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">i</span><span class="p">,</span><span class="nx">level</span><span class="o">:</span><span class="nx">u</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">level</span><span class="p">}),</span><span class="nx">u</span><span class="p">}}();</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">version</span><span class="o">=</span><span class="s2">&quot;3.0&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">}(),</span><span class="nx">CodeMirror</span><span class="p">.</span><span class="nx">defineMode</span><span class="p">(</span><span class="s2">&quot;javascript&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">function</span> <span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">tokenize</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="kc">null</span><span class="o">!=</span><span class="p">(</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">next</span><span class="p">());){</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="o">==</span><span class="nx">b</span><span class="o">&amp;&amp;!</span><span class="nx">d</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">1</span><span class="p">;</span><span class="nx">d</span><span class="o">=!</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="s2">&quot;\\&quot;</span><span class="o">==</span><span class="nx">c</span><span class="p">}</span><span class="k">return</span> <span class="nx">d</span><span class="p">}</span><span class="kd">function</span> <span class="nx">e</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">M</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">N</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="nx">b</span><span class="p">}</span><span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="o">==</span><span class="nx">f</span><span class="o">||</span><span class="s2">&quot;&#39;&quot;</span><span class="o">==</span><span class="nx">f</span><span class="p">)</span><span class="k">return</span> <span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">g</span><span class="p">(</span><span class="nx">f</span><span class="p">));</span><span class="k">if</span><span class="p">(</span><span class="sr">/[\[\]{}\(\),;\:\.]/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">f</span><span class="p">))</span><span class="k">return</span> <span class="nx">e</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="o">==</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">eat</span><span class="p">(</span><span class="sr">/x/i</span><span class="p">))</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">eatWhile</span><span class="p">(</span><span class="sr">/[\da-f]/i</span><span class="p">),</span><span class="nx">e</span><span class="p">(</span><span class="s2">&quot;number&quot;</span><span class="p">,</span><span class="s2">&quot;number&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="sr">/\d/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span><span class="o">||</span><span class="s2">&quot;-&quot;</span><span class="o">==</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">eat</span><span class="p">(</span><span class="sr">/\d/</span><span class="p">))</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/</span><span class="p">),</span><span class="nx">e</span><span class="p">(</span><span class="s2">&quot;number&quot;</span><span class="p">,</span><span class="s2">&quot;number&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="o">==</span><span class="nx">f</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">eat</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span><span class="o">?</span><span class="nx">c</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">h</span><span class="p">)</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">eat</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">?</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">skipToEnd</span><span class="p">(),</span><span class="nx">e</span><span class="p">(</span><span class="s2">&quot;comment&quot;</span><span class="p">,</span><span class="s2">&quot;comment&quot;</span><span class="p">))</span><span class="o">:</span><span class="s2">&quot;operator&quot;</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">lastType</span><span class="o">||</span><span class="s2">&quot;keyword c&quot;</span><span class="o">==</span><span class="nx">b</span><span class="p">.</span><span class="nx">lastType</span><span class="o">||</span><span class="sr">/^[\[{}\(,;:]$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">lastType</span><span class="p">)</span><span class="o">?</span><span class="p">(</span><span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="s2">&quot;/&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">eatWhile</span><span class="p">(</span><span class="sr">/[gimy]/</span><span class="p">),</span><span class="nx">e</span><span class="p">(</span><span class="s2">&quot;regexp&quot;</span><span class="p">,</span><span class="s2">&quot;string-2&quot;</span><span class="p">))</span><span class="o">:</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">eatWhile</span><span class="p">(</span><span class="nx">S</span><span class="p">),</span><span class="nx">e</span><span class="p">(</span><span class="s2">&quot;operator&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">current</span><span class="p">()));</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="o">==</span><span class="nx">f</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">skipToEnd</span><span class="p">(),</span><span class="nx">e</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span><span class="s2">&quot;error&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">S</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">f</span><span class="p">))</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">eatWhile</span><span class="p">(</span><span class="nx">S</span><span class="p">),</span><span class="nx">e</span><span class="p">(</span><span class="s2">&quot;operator&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">current</span><span class="p">());</span><span class="nx">a</span><span class="p">.</span><span class="nx">eatWhile</span><span class="p">(</span><span class="sr">/[\w\$_]/</span><span class="p">);</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">current</span><span class="p">(),</span><span class="nx">j</span><span class="o">=</span><span class="nx">R</span><span class="p">.</span><span class="nx">propertyIsEnumerable</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">R</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span><span class="k">return</span> <span class="nx">j</span><span class="o">&amp;&amp;</span><span class="s2">&quot;.&quot;</span><span class="o">!=</span><span class="nx">b</span><span class="p">.</span><span class="nx">lastType</span><span class="o">?</span><span class="nx">e</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span><span class="nx">j</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span><span class="o">:</span><span class="nx">e</span><span class="p">(</span><span class="s2">&quot;variable&quot;</span><span class="p">,</span><span class="s2">&quot;variable&quot;</span><span class="p">,</span><span class="nx">i</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">g</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="k">return</span> <span class="nx">d</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">tokenize</span><span class="o">=</span><span class="nx">f</span><span class="p">),</span><span class="nx">e</span><span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="s2">&quot;string&quot;</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">h</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="o">=!</span><span class="mi">1</span><span class="p">;</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">next</span><span class="p">();){</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">){</span><span class="nx">b</span><span class="p">.</span><span class="nx">tokenize</span><span class="o">=</span><span class="nx">f</span><span class="p">;</span><span class="k">break</span><span class="p">}</span><span class="nx">d</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="o">==</span><span class="nx">c</span><span class="p">}</span><span class="k">return</span> <span class="nx">e</span><span class="p">(</span><span class="s2">&quot;comment&quot;</span><span class="p">,</span><span class="s2">&quot;comment&quot;</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">i</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">indented</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">column</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="o">=</span><span class="nx">c</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">prev</span><span class="o">=</span><span class="nx">e</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">info</span><span class="o">=</span><span class="nx">f</span><span class="p">,</span><span class="kc">null</span><span class="o">!=</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">align</span><span class="o">=</span><span class="nx">d</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">localVars</span><span class="p">;</span><span class="nx">c</span><span class="p">;</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">next</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="o">==</span><span class="nx">b</span><span class="p">)</span><span class="k">return</span><span class="o">!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">k</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">cc</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">U</span><span class="p">.</span><span class="nx">stream</span><span class="o">=</span><span class="nx">e</span><span class="p">,</span><span class="nx">U</span><span class="p">.</span><span class="nx">marked</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">U</span><span class="p">.</span><span class="nx">cc</span><span class="o">=</span><span class="nx">f</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">lexical</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s2">&quot;align&quot;</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">lexical</span><span class="p">.</span><span class="nx">align</span><span class="o">=!</span><span class="mi">0</span><span class="p">);;){</span><span class="kd">var</span> <span class="nx">g</span><span class="o">=</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span><span class="o">:</span><span class="nx">P</span><span class="o">?</span><span class="nx">u</span><span class="o">:</span><span class="nx">t</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">)){</span><span class="k">for</span><span class="p">(;</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">[</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="nx">lex</span><span class="p">;)</span><span class="nx">f</span><span class="p">.</span><span class="nx">pop</span><span class="p">()();</span><span class="k">return</span> <span class="nx">U</span><span class="p">.</span><span class="nx">marked</span><span class="o">?</span><span class="nx">U</span><span class="p">.</span><span class="nx">marked</span><span class="o">:</span><span class="s2">&quot;variable&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="nx">j</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;variable-2&quot;</span><span class="o">:</span><span class="nx">b</span><span class="p">}}}</span><span class="kd">function</span> <span class="nx">l</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span><span class="nx">a</span><span class="o">--</span><span class="p">)</span><span class="nx">U</span><span class="p">.</span><span class="nx">cc</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="nx">a</span><span class="p">])}</span><span class="kd">function</span> <span class="nx">m</span><span class="p">(){</span><span class="k">return</span> <span class="nx">l</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">arguments</span><span class="p">),</span><span class="o">!</span><span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">n</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">context</span><span class="p">){</span><span class="nx">U</span><span class="p">.</span><span class="nx">marked</span><span class="o">=</span><span class="s2">&quot;def&quot;</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">localVars</span><span class="p">;</span><span class="nx">c</span><span class="p">;</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">next</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="o">==</span><span class="nx">a</span><span class="p">)</span><span class="k">return</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">localVars</span><span class="o">=</span><span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">next</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">localVars</span><span class="p">}}}</span><span class="kd">function</span> <span class="nx">o</span><span class="p">(){</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">context</span><span class="o">=</span><span class="p">{</span><span class="nx">prev</span><span class="o">:</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span><span class="nx">vars</span><span class="o">:</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">localVars</span><span class="p">},</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">localVars</span><span class="o">=</span><span class="nx">V</span><span class="p">}</span><span class="kd">function</span> <span class="nx">p</span><span class="p">(){</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">localVars</span><span class="o">=</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">vars</span><span class="p">,</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">context</span><span class="o">=</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">prev</span><span class="p">}</span><span class="kd">function</span> <span class="nx">q</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">lexical</span><span class="o">=</span><span class="k">new</span> <span class="nx">i</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">indented</span><span class="p">,</span><span class="nx">U</span><span class="p">.</span><span class="nx">stream</span><span class="p">.</span><span class="nx">column</span><span class="p">(),</span><span class="nx">a</span><span class="p">,</span><span class="kc">null</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">lexical</span><span class="p">,</span><span class="nx">b</span><span class="p">)};</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">lex</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="nx">c</span><span class="p">}</span><span class="kd">function</span> <span class="nx">r</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">U</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">lexical</span><span class="p">.</span><span class="nx">prev</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">lexical</span><span class="p">.</span><span class="nx">type</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">indented</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">lexical</span><span class="p">.</span><span class="nx">indented</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">lexical</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">lexical</span><span class="p">.</span><span class="nx">prev</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">s</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">()</span><span class="o">:</span><span class="s2">&quot;;&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">l</span><span class="p">()</span><span class="o">:</span><span class="nx">m</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">t</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;var&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;vardef&quot;</span><span class="p">),</span><span class="nx">E</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">),</span><span class="nx">r</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;keyword a&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">),</span><span class="nx">u</span><span class="p">,</span><span class="nx">t</span><span class="p">,</span><span class="nx">r</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;keyword b&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">),</span><span class="nx">t</span><span class="p">,</span><span class="nx">r</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;{&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">B</span><span class="p">,</span><span class="nx">r</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;;&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">()</span><span class="o">:</span><span class="s2">&quot;function&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">K</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;for&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">),</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">),</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">),</span><span class="nx">G</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">),</span><span class="nx">r</span><span class="p">,</span><span class="nx">t</span><span class="p">,</span><span class="nx">r</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;variable&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;stat&quot;</span><span class="p">),</span><span class="nx">x</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;switch&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">),</span><span class="nx">u</span><span class="p">,</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;}&quot;</span><span class="p">,</span><span class="s2">&quot;switch&quot;</span><span class="p">),</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;{&quot;</span><span class="p">),</span><span class="nx">B</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">r</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;case&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">u</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">))</span><span class="o">:</span><span class="s2">&quot;default&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">))</span><span class="o">:</span><span class="s2">&quot;catch&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">),</span><span class="nx">o</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">),</span><span class="nx">L</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">),</span><span class="nx">t</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">p</span><span class="p">)</span><span class="o">:</span><span class="nx">l</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;stat&quot;</span><span class="p">),</span><span class="nx">u</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">),</span><span class="nx">r</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">u</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">T</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">w</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;function&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">K</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;keyword c&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;(&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">),</span><span class="nx">v</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">),</span><span class="nx">r</span><span class="p">,</span><span class="nx">w</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;operator&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">u</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;[&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">),</span><span class="nx">A</span><span class="p">(</span><span class="nx">u</span><span class="p">,</span><span class="s2">&quot;]&quot;</span><span class="p">),</span><span class="nx">r</span><span class="p">,</span><span class="nx">w</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;{&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">A</span><span class="p">(</span><span class="nx">z</span><span class="p">,</span><span class="s2">&quot;}&quot;</span><span class="p">),</span><span class="nx">r</span><span class="p">,</span><span class="nx">w</span><span class="p">)</span><span class="o">:</span><span class="nx">m</span><span class="p">()}</span><span class="kd">function</span> <span class="nx">v</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/[;\}\)\],]/</span><span class="p">)</span><span class="o">?</span><span class="nx">l</span><span class="p">()</span><span class="o">:</span><span class="nx">l</span><span class="p">(</span><span class="nx">u</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">w</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;operator&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="sr">/\+\+|--/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="k">return</span> <span class="nx">m</span><span class="p">(</span><span class="nx">w</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;operator&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="s2">&quot;?&quot;</span><span class="o">==</span><span class="nx">b</span><span class="p">)</span><span class="k">return</span> <span class="nx">m</span><span class="p">(</span><span class="nx">u</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">),</span><span class="nx">u</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="o">!=</span><span class="nx">a</span><span class="p">)</span><span class="k">return</span><span class="s2">&quot;(&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">),</span><span class="nx">A</span><span class="p">(</span><span class="nx">u</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">),</span><span class="nx">r</span><span class="p">,</span><span class="nx">w</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;.&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span><span class="nx">w</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;[&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">),</span><span class="nx">u</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">),</span><span class="nx">r</span><span class="p">,</span><span class="nx">w</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">x</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;:&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span><span class="nx">t</span><span class="p">)</span><span class="o">:</span><span class="nx">l</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">),</span><span class="nx">r</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">y</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;variable&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="p">(</span><span class="nx">U</span><span class="p">.</span><span class="nx">marked</span><span class="o">=</span><span class="s2">&quot;property&quot;</span><span class="p">,</span><span class="nx">m</span><span class="p">())</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">z</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;variable&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">U</span><span class="p">.</span><span class="nx">marked</span><span class="o">=</span><span class="s2">&quot;property&quot;</span><span class="p">),</span><span class="nx">T</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">),</span><span class="nx">u</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">A</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">function</span> <span class="nx">c</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;,&quot;</span><span class="o">==</span><span class="nx">d</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span><span class="o">:</span><span class="nx">d</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="nx">m</span><span class="p">()</span><span class="o">:</span><span class="nx">m</span><span class="p">(</span><span class="nx">s</span><span class="p">(</span><span class="nx">b</span><span class="p">))}</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span><span class="k">return</span> <span class="nx">d</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="nx">m</span><span class="p">()</span><span class="o">:</span><span class="nx">l</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">c</span><span class="p">)}}</span><span class="kd">function</span> <span class="nx">B</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;}&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">()</span><span class="o">:</span><span class="nx">l</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">B</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">C</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;:&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">D</span><span class="p">)</span><span class="o">:</span><span class="nx">l</span><span class="p">()}</span><span class="kd">function</span> <span class="nx">D</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;variable&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="p">(</span><span class="nx">U</span><span class="p">.</span><span class="nx">marked</span><span class="o">=</span><span class="s2">&quot;variable-3&quot;</span><span class="p">,</span><span class="nx">m</span><span class="p">())</span><span class="o">:</span><span class="nx">l</span><span class="p">()}</span><span class="kd">function</span> <span class="nx">E</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;variable&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="p">(</span><span class="nx">n</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">Q</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">C</span><span class="p">,</span><span class="nx">F</span><span class="p">)</span><span class="o">:</span><span class="nx">m</span><span class="p">(</span><span class="nx">F</span><span class="p">))</span><span class="o">:</span><span class="nx">l</span><span class="p">()}</span><span class="kd">function</span> <span class="nx">F</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;=&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">u</span><span class="p">,</span><span class="nx">F</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;,&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">E</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">G</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;var&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">E</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">),</span><span class="nx">I</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;;&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">I</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;variable&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">H</span><span class="p">)</span><span class="o">:</span><span class="nx">m</span><span class="p">(</span><span class="nx">I</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">H</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;in&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">u</span><span class="p">)</span><span class="o">:</span><span class="nx">m</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="nx">I</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">I</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;;&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">J</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;in&quot;</span><span class="o">==</span><span class="nx">b</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">u</span><span class="p">)</span><span class="o">:</span><span class="nx">m</span><span class="p">(</span><span class="nx">u</span><span class="p">,</span><span class="nx">s</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">),</span><span class="nx">J</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">J</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="s2">&quot;)&quot;</span><span class="o">!=</span><span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">m</span><span class="p">(</span><span class="nx">u</span><span class="p">)}</span><span class="kd">function</span> <span class="nx">K</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;variable&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="p">(</span><span class="nx">n</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">m</span><span class="p">(</span><span class="nx">K</span><span class="p">))</span><span class="o">:</span><span class="s2">&quot;(&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">q</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">),</span><span class="nx">o</span><span class="p">,</span><span class="nx">A</span><span class="p">(</span><span class="nx">L</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">),</span><span class="nx">r</span><span class="p">,</span><span class="nx">t</span><span class="p">,</span><span class="nx">p</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">}</span><span class="kd">function</span> <span class="nx">L</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="s2">&quot;variable&quot;</span><span class="o">==</span><span class="nx">a</span><span class="o">?</span><span class="p">(</span><span class="nx">n</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">Q</span><span class="o">?</span><span class="nx">m</span><span class="p">(</span><span class="nx">C</span><span class="p">)</span><span class="o">:</span><span class="nx">m</span><span class="p">())</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">}</span><span class="kd">var</span> <span class="nx">M</span><span class="p">,</span><span class="nx">N</span><span class="p">,</span><span class="nx">O</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">indentUnit</span><span class="p">,</span><span class="nx">P</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">json</span><span class="p">,</span><span class="nx">Q</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">typescript</span><span class="p">,</span><span class="nx">R</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">function</span> <span class="nx">a</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">type</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">style</span><span class="o">:</span><span class="s2">&quot;keyword&quot;</span><span class="p">}}</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;keyword a&quot;</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;keyword b&quot;</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;keyword c&quot;</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;operator&quot;</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="p">{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;atom&quot;</span><span class="p">,</span><span class="nx">style</span><span class="o">:</span><span class="s2">&quot;atom&quot;</span><span class="p">},</span><span class="nx">g</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;if&quot;</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;while&quot;</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;with&quot;</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;else&quot;</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="s2">&quot;do&quot;</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="s2">&quot;try&quot;</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="s2">&quot;finally&quot;</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="s2">&quot;return&quot;</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="s2">&quot;break&quot;</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="s2">&quot;continue&quot;</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="s2">&quot;new&quot;</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="s2">&quot;delete&quot;</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="s2">&quot;throw&quot;</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="s2">&quot;var&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;var&quot;</span><span class="p">),</span><span class="s2">&quot;const&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;var&quot;</span><span class="p">),</span><span class="kd">let</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;var&quot;</span><span class="p">),</span><span class="s2">&quot;function&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">),</span><span class="s2">&quot;catch&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;catch&quot;</span><span class="p">),</span><span class="s2">&quot;for&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;for&quot;</span><span class="p">),</span><span class="s2">&quot;switch&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;switch&quot;</span><span class="p">),</span><span class="s2">&quot;case&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;case&quot;</span><span class="p">),</span><span class="s2">&quot;default&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">),</span><span class="s2">&quot;in&quot;</span><span class="o">:</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;typeof&quot;</span><span class="o">:</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;instanceof&quot;</span><span class="o">:</span><span class="nx">e</span><span class="p">,</span><span class="s2">&quot;true&quot;</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="s2">&quot;false&quot;</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="s2">&quot;null&quot;</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="kc">undefined</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="kc">NaN</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="kc">Infinity</span><span class="o">:</span><span class="nx">f</span><span class="p">};</span><span class="k">if</span><span class="p">(</span><span class="nx">Q</span><span class="p">){</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="p">{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;variable&quot;</span><span class="p">,</span><span class="nx">style</span><span class="o">:</span><span class="s2">&quot;variable-3&quot;</span><span class="p">},</span><span class="nx">i</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;interface&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;interface&quot;</span><span class="p">),</span><span class="s2">&quot;class&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">),</span><span class="s2">&quot;extends&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;extends&quot;</span><span class="p">),</span><span class="nx">constructor</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;constructor&quot;</span><span class="p">),</span><span class="s2">&quot;public&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;public&quot;</span><span class="p">),</span><span class="s2">&quot;private&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;private&quot;</span><span class="p">),</span><span class="s2">&quot;protected&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;protected&quot;</span><span class="p">),</span><span class="s2">&quot;static&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;static&quot;</span><span class="p">),</span><span class="s2">&quot;super&quot;</span><span class="o">:</span><span class="nx">a</span><span class="p">(</span><span class="s2">&quot;super&quot;</span><span class="p">),</span><span class="nx">string</span><span class="o">:</span><span class="nx">h</span><span class="p">,</span><span class="nx">number</span><span class="o">:</span><span class="nx">h</span><span class="p">,</span><span class="nx">bool</span><span class="o">:</span><span class="nx">h</span><span class="p">,</span><span class="nx">any</span><span class="o">:</span><span class="nx">h</span><span class="p">};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="k">in</span> <span class="nx">i</span><span class="p">)</span><span class="nx">g</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">j</span><span class="p">]}</span><span class="k">return</span> <span class="nx">g</span><span class="p">}(),</span><span class="nx">S</span><span class="o">=</span><span class="sr">/[+\-*&amp;%=&lt;&gt;!?|]/</span><span class="p">,</span><span class="nx">T</span><span class="o">=</span><span class="p">{</span><span class="nx">atom</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">number</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">variable</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">string</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">regexp</span><span class="o">:!</span><span class="mi">0</span><span class="p">},</span><span class="nx">U</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">column</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">marked</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">cc</span><span class="o">:</span><span class="kc">null</span><span class="p">},</span><span class="nx">V</span><span class="o">=</span><span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;this&quot;</span><span class="p">,</span><span class="nx">next</span><span class="o">:</span><span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;arguments&quot;</span><span class="p">}};</span><span class="k">return</span> <span class="nx">r</span><span class="p">.</span><span class="nx">lex</span><span class="o">=!</span><span class="mi">0</span><span class="p">,{</span><span class="nx">startState</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="p">{</span><span class="nx">tokenize</span><span class="o">:</span><span class="nx">f</span><span class="p">,</span><span class="nx">lastType</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="nx">cc</span><span class="o">:</span><span class="p">[],</span><span class="nx">lexical</span><span class="o">:</span><span class="k">new</span> <span class="nx">i</span><span class="p">((</span><span class="nx">a</span><span class="o">||</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="nx">O</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;block&quot;</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">),</span><span class="nx">localVars</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">localVars</span><span class="p">,</span><span class="nx">context</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">localVars</span><span class="o">&amp;&amp;</span><span class="p">{</span><span class="nx">vars</span><span class="o">:</span><span class="nx">b</span><span class="p">.</span><span class="nx">localVars</span><span class="p">},</span><span class="nx">indented</span><span class="o">:</span><span class="mi">0</span><span class="p">}},</span><span class="nx">token</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">sol</span><span class="p">()</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">lexical</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s2">&quot;align&quot;</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">lexical</span><span class="p">.</span><span class="nx">align</span><span class="o">=!</span><span class="mi">1</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">indented</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">indentation</span><span class="p">()),</span><span class="nx">a</span><span class="p">.</span><span class="nx">eatSpace</span><span class="p">())</span><span class="k">return</span> <span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">tokenize</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span><span class="k">return</span><span class="s2">&quot;comment&quot;</span><span class="o">==</span><span class="nx">M</span><span class="o">?</span><span class="nx">c</span><span class="o">:</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">lastType</span><span class="o">=</span><span class="nx">M</span><span class="p">,</span><span class="nx">k</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">M</span><span class="p">,</span><span class="nx">N</span><span class="p">,</span><span class="nx">a</span><span class="p">))},</span><span class="nx">indent</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tokenize</span><span class="o">==</span><span class="nx">h</span><span class="p">)</span><span class="k">return</span> <span class="nx">CodeMirror</span><span class="p">.</span><span class="nx">Pass</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tokenize</span><span class="o">!=</span><span class="nx">f</span><span class="p">)</span><span class="k">return</span> <span class="mi">0</span><span class="p">;</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">lexical</span><span class="p">;</span><span class="s2">&quot;stat&quot;</span><span class="o">==</span><span class="nx">d</span><span class="p">.</span><span class="nx">type</span><span class="o">&amp;&amp;</span><span class="s2">&quot;}&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">prev</span><span class="p">);</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">c</span><span class="o">==</span><span class="nx">e</span><span class="p">;</span><span class="k">return</span><span class="s2">&quot;vardef&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">indented</span><span class="o">+</span><span class="p">(</span><span class="s2">&quot;operator&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">lastType</span><span class="o">||</span><span class="s2">&quot;,&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">lastType</span><span class="o">?</span><span class="mi">4</span><span class="o">:</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;form&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">&amp;&amp;</span><span class="s2">&quot;{&quot;</span><span class="o">==</span><span class="nx">c</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">indented</span><span class="o">:</span><span class="s2">&quot;form&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">indented</span><span class="o">+</span><span class="nx">O</span><span class="o">:</span><span class="s2">&quot;stat&quot;</span><span class="o">==</span><span class="nx">e</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">indented</span><span class="o">+</span><span class="p">(</span><span class="s2">&quot;operator&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">lastType</span><span class="o">||</span><span class="s2">&quot;,&quot;</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">lastType</span><span class="o">?</span><span class="nx">O</span><span class="o">:</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;switch&quot;</span><span class="o">!=</span><span class="nx">d</span><span class="p">.</span><span class="nx">info</span><span class="o">||</span><span class="nx">g</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">align</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">column</span><span class="o">+</span><span class="p">(</span><span class="nx">g</span><span class="o">?</span><span class="mi">0</span><span class="o">:</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">indented</span><span class="o">+</span><span class="p">(</span><span class="nx">g</span><span class="o">?</span><span class="mi">0</span><span class="o">:</span><span class="nx">O</span><span class="p">)</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">indented</span><span class="o">+</span><span class="p">(</span><span class="sr">/^(?:case|default)\b/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">?</span><span class="nx">O</span><span class="o">:</span><span class="mi">2</span><span class="o">*</span><span class="nx">O</span><span class="p">)},</span><span class="nx">electricChars</span><span class="o">:</span><span class="s2">&quot;:{}&quot;</span><span class="p">,</span><span class="nx">jsonMode</span><span class="o">:</span><span class="nx">P</span><span class="p">}}),</span><span class="nx">CodeMirror</span><span class="p">.</span><span class="nx">defineMIME</span><span class="p">(</span><span class="s2">&quot;text/javascript&quot;</span><span class="p">,</span><span class="s2">&quot;javascript&quot;</span><span class="p">),</span><span class="nx">CodeMirror</span><span class="p">.</span><span class="nx">defineMIME</span><span class="p">(</span><span class="s2">&quot;application/json&quot;</span><span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;javascript&quot;</span><span class="p">,</span><span class="nx">json</span><span class="o">:!</span><span class="mi">0</span><span class="p">}),</span><span class="nx">CodeMirror</span><span class="p">.</span><span class="nx">defineMIME</span><span class="p">(</span><span class="s2">&quot;text/typescript&quot;</span><span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;javascript&quot;</span><span class="p">,</span><span class="nx">typescript</span><span class="o">:!</span><span class="mi">0</span><span class="p">}),</span><span class="nx">CodeMirror</span><span class="p">.</span><span class="nx">defineMIME</span><span class="p">(</span><span class="s2">&quot;application/typescript&quot;</span><span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;javascript&quot;</span><span class="p">,</span><span class="nx">typescript</span><span class="o">:!</span><span class="mi">0</span><span class="p">}),</span><span class="kd">function</span><span class="p">(){</span><span class="kd">function</span> <span class="nx">a</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">atOccurrence</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="kc">null</span><span class="o">==</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="s2">&quot;string&quot;</span><span class="o">==</span><span class="k">typeof</span> <span class="nx">b</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">d</span><span class="o">=!</span><span class="mi">1</span><span class="p">),</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="o">?</span><span class="nx">a</span><span class="p">.</span><span class="nx">clipPos</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">:</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">},</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">=</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">c</span><span class="p">},</span><span class="s2">&quot;string&quot;</span><span class="o">!=</span><span class="k">typeof</span> <span class="nx">b</span><span class="p">)</span><span class="nx">b</span><span class="p">.</span><span class="nx">global</span><span class="o">||</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">ignoreCase</span><span class="o">?</span><span class="s2">&quot;ig&quot;</span><span class="o">:</span><span class="s2">&quot;g&quot;</span><span class="p">)),</span><span class="k">this</span><span class="p">.</span><span class="nx">matches</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="nx">b</span><span class="p">.</span><span class="nx">lastIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getLine</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">ch</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">f</span><span class="p">;){</span><span class="nx">g</span><span class="o">+=</span><span class="nx">f</span><span class="p">.</span><span class="nx">index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">g</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">lastIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="kd">var</span> <span class="nx">h</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">h</span><span class="p">)</span><span class="k">break</span><span class="p">;</span><span class="nx">f</span><span class="o">=</span><span class="nx">h</span><span class="p">}</span><span class="nx">g</span><span class="o">--</span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="nx">b</span><span class="p">.</span><span class="nx">lastIndex</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">ch</span><span class="p">;</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getLine</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="p">),</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">e</span><span class="p">),</span><span class="nx">g</span><span class="o">=</span><span class="nx">f</span><span class="o">&amp;&amp;</span><span class="nx">f</span><span class="p">.</span><span class="nx">index</span><span class="p">}</span><span class="k">return</span> <span class="nx">f</span><span class="o">?</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">g</span><span class="p">},</span><span class="nx">to</span><span class="o">:</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">g</span><span class="o">+</span><span class="nx">f</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">},</span><span class="nx">match</span><span class="o">:</span><span class="nx">f</span><span class="p">}</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">};</span><span class="k">else</span><span class="p">{</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">());</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="nx">d</span><span class="o">?</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()}</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">},</span><span class="nx">f</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">matches</span><span class="o">=</span><span class="mi">1</span><span class="o">==</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="o">?</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">f</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">e</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">getLine</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="p">)),</span><span class="nx">h</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="k">return</span><span class="p">(</span><span class="nx">c</span><span class="o">?</span><span class="nx">d</span><span class="p">.</span><span class="nx">ch</span><span class="o">&gt;=</span><span class="nx">h</span><span class="o">&amp;&amp;-</span><span class="mi">1</span><span class="o">!=</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">ch</span><span class="o">-</span><span class="nx">h</span><span class="p">))</span><span class="o">:-</span><span class="mi">1</span><span class="o">!=</span><span class="p">(</span><span class="nx">f</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">ch</span><span class="p">)))</span><span class="o">?</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">f</span><span class="p">},</span><span class="nx">to</span><span class="o">:</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">f</span><span class="o">+</span><span class="nx">h</span><span class="p">}}</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nx">b</span><span class="o">?</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="nx">f</span><span class="p">[</span><span class="nx">g</span><span class="p">],</span><span class="nx">i</span><span class="o">=</span><span class="nx">e</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">getLine</span><span class="p">(</span><span class="nx">d</span><span class="p">)),</span><span class="nx">j</span><span class="o">=</span><span class="nx">b</span><span class="o">?</span><span class="nx">i</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span><span class="o">+</span><span class="nx">h</span><span class="p">.</span><span class="nx">length</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="nx">h</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">b</span><span class="o">?</span><span class="nx">j</span><span class="o">&gt;=</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="o">||</span><span class="nx">j</span><span class="o">!=</span><span class="nx">h</span><span class="p">.</span><span class="nx">length</span><span class="o">:</span><span class="nx">j</span><span class="o">&lt;=</span><span class="nx">c</span><span class="p">.</span><span class="nx">ch</span><span class="o">||</span><span class="nx">j</span><span class="o">!=</span><span class="nx">i</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">h</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span><span class="k">for</span><span class="p">(;;){</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">?!</span><span class="nx">d</span><span class="o">:</span><span class="nx">d</span><span class="o">==</span><span class="nx">a</span><span class="p">.</span><span class="nx">lineCount</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="k">return</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">e</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">getLine</span><span class="p">(</span><span class="nx">d</span><span class="o">+=</span><span class="nx">b</span><span class="o">?-</span><span class="mi">1</span><span class="o">:</span><span class="mi">1</span><span class="p">)),</span><span class="nx">h</span><span class="o">=</span><span class="nx">f</span><span class="p">[</span><span class="nx">b</span><span class="o">?--</span><span class="nx">g</span><span class="o">:++</span><span class="nx">g</span><span class="p">],</span><span class="o">!</span><span class="p">(</span><span class="nx">g</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="nx">g</span><span class="o">&lt;</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="nx">b</span><span class="o">?</span><span class="nx">i</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span><span class="o">:</span><span class="nx">i</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span><span class="o">+</span><span class="nx">h</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">b</span><span class="o">?</span><span class="nx">k</span><span class="o">!=</span><span class="nx">i</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="nx">h</span><span class="p">.</span><span class="nx">length</span><span class="o">:</span><span class="nx">k</span><span class="o">!=</span><span class="nx">h</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="k">return</span><span class="p">;</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">line</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">j</span><span class="p">},</span><span class="nx">m</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="nx">k</span><span class="p">};</span><span class="k">return</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="nx">b</span><span class="o">?</span><span class="nx">m</span><span class="o">:</span><span class="nx">l</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">b</span><span class="o">?</span><span class="nx">l</span><span class="o">:</span><span class="nx">m</span><span class="p">}}</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="nx">h</span><span class="p">)</span><span class="k">return</span><span class="p">}}}}</span><span class="nx">a</span><span class="p">.</span><span class="nx">prototype</span><span class="o">=</span><span class="p">{</span><span class="nx">findNext</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="o">!</span><span class="mi">1</span><span class="p">)},</span><span class="nx">findPrevious</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="o">!</span><span class="mi">0</span><span class="p">)},</span><span class="nx">find</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">function</span> <span class="nx">b</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">a</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">};</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">pos</span><span class="o">=</span><span class="p">{</span><span class="nx">from</span><span class="o">:</span><span class="nx">b</span><span class="p">,</span><span class="nx">to</span><span class="o">:</span><span class="nx">b</span><span class="p">},</span><span class="nx">c</span><span class="p">.</span><span class="nx">atOccurrence</span><span class="o">=!</span><span class="mi">1</span><span class="p">,</span><span class="o">!</span><span class="mi">1</span><span class="p">}</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">.</span><span class="nx">clipPos</span><span class="p">(</span><span class="nx">a</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">.</span><span class="nx">from</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">.</span><span class="nx">to</span><span class="p">);;){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">d</span><span class="p">))</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">atOccurrence</span><span class="o">=!</span><span class="mi">0</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">.</span><span class="nx">match</span><span class="o">||!</span><span class="mi">0</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="p">)</span><span class="k">return</span> <span class="nx">b</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="nx">d</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">.</span><span class="nx">getLine</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">length</span><span class="p">}}</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">.</span><span class="nx">lineCount</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="o">==</span><span class="nx">e</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="k">return</span> <span class="nx">b</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span><span class="nx">d</span><span class="o">=</span><span class="p">{</span><span class="nx">line</span><span class="o">:</span><span class="nx">d</span><span class="p">.</span><span class="nx">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nx">ch</span><span class="o">:</span><span class="mi">0</span><span class="p">}}}},</span><span class="nx">from</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">atOccurrence</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">.</span><span class="nx">from</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">},</span><span class="nx">to</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">atOccurrence</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">.</span><span class="nx">to</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">},</span><span class="nx">replace</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">atOccurrence</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">pos</span><span class="p">.</span><span class="nx">to</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">cm</span><span class="p">.</span><span class="nx">replaceRange</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">pos</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">pos</span><span class="p">.</span><span class="nx">to</span><span class="p">))}},</span><span class="nx">CodeMirror</span><span class="p">.</span><span class="nx">defineExtension</span><span class="p">(</span><span class="s2">&quot;getSearchCursor&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="k">return</span> <span class="k">new</span> <span class="nx">a</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">)})}();</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
